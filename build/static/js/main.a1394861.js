!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=76)}([function(t,e,n){"use strict";t.exports=n(83)},function(t,e,n){t.exports=n(93)()},function(t,e,n){"use strict";function r(t){return"[object Array]"===S.call(t)}function i(t){return"[object ArrayBuffer]"===S.call(t)}function o(t){return"undefined"!==typeof FormData&&t instanceof FormData}function a(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function s(t){return"string"===typeof t}function u(t){return"number"===typeof t}function l(t){return"undefined"===typeof t}function c(t){return null!==t&&"object"===typeof t}function p(t){return"[object Date]"===S.call(t)}function h(t){return"[object File]"===S.call(t)}function f(t){return"[object Blob]"===S.call(t)}function d(t){return"[object Function]"===S.call(t)}function y(t){return c(t)&&d(t.pipe)}function m(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function _(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),r(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function b(){function t(t,n){"object"===typeof e[n]&&"object"===typeof t?e[n]=b(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}function x(t,e,n){return _(e,function(e,r){t[r]=n&&"function"===typeof e?w(e,n):e}),t}var w=n(42),E=n(134),S=Object.prototype.toString;t.exports={isArray:r,isArrayBuffer:i,isBuffer:E,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:c,isUndefined:l,isDate:p,isFile:h,isBlob:f,isFunction:d,isStream:y,isURLSearchParams:m,isStandardBrowserEnv:g,forEach:_,merge:b,extend:x,trim:v}},function(t,e,n){"use strict";function r(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function i(t){return Math.round(t/f.EPSILON)*f.EPSILON}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,r=void 0===n?f.precision||4:n;return t=i(t),parseFloat(t.toPrecision(r))}function a(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function s(t){return t.clone?t.clone():new Array(t)}function u(t,e){if(a(t)){for(var n=s(t),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}return e(t)}function l(t){return u(t,function(t){return t/180*Math.PI})}function c(t){return u(t,function(t){return 180*t/Math.PI})}function p(t,e,n){return u(t,function(t){return Math.max(e,Math.min(n,t))})}function h(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!h(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=f.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}n.d(e,"c",function(){return f}),e.a=r,e.f=o,e.g=l,e.d=c,e.b=p,e.e=h;var f={};f.EPSILON=1e-12,f.debug=!0,f.precision=4,f.printTypes=!1,f.printDegrees=!1,f.printRowMajor=!0},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return _});var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(7),m={captureScroll:d.a.bool,captureDrag:d.a.bool,captureClick:d.a.bool,captureDoubleClick:d.a.bool},v={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0},g={viewport:d.a.instanceOf(y.a),isDragging:d.a.bool,eventManager:d.a.object},_=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._events=null,n._onContainerLoad=n._onContainerLoad.bind(p(n)),n}return l(e,t),s(e,[{key:"_onContainerLoad",value:function(t){var e=this.context.eventManager;if(e){var n=this._events;n&&(e.off(n),n=null),t&&(n={wheel:this._onScroll.bind(this),panstart:this._onDrag.bind(this),click:this._onClick.bind(this),dblclick:this._onDoubleClick.bind(this)},e.on(n,t)),this._events=n}}},{key:"_onScroll",value:function(t){this.props.captureScroll&&t.stopPropagation()}},{key:"_onDrag",value:function(t){this.props.captureDrag&&t.stopPropagation()}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation()}},{key:"_onDoubleClick",value:function(t){this.props.captureDoubleClick&&t.stopPropagation()}},{key:"render",value:function(){return null}}]),e}(h.Component);_.propTypes=m,_.defaultProps=v,_.contextTypes=g},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){y&&f&&(y=!1,f.length?d=f.concat(d):m=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(f=d,d=[];++m<e;)f&&f[m].run();m=-1,e=d.length}f=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,p,h=t.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"===typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,d=[],y=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(8);n.d(e,"a",function(){return r.a});var i=(n(70),n(207));n.d(e,"c",function(){return i.a});var o=n(208);n.d(e,"b",function(){return o.a});n(10)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return _});var h=n(158),f=n(10),d=n(70),y=n(205),m=n.n(y),v=n(206),g=n.n(v),_=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,s=void 0===a?0:a,l=n.longitude,c=void 0===l?0:l,h=n.zoom,d=void 0===h?0:h,y=n.pitch,m=void 0===y?0:y,v=n.bearing,g=void 0===v?0:v,_=n.altitude,b=void 0===_?1.5:_,x=n.farZMultiplier,w=void 0===x?10:x;o(this,e),r=r||1,i=i||1;var E=Object(f.i)(d);b=Math.max(.75,b);var S=Object(f.c)({longitude:c,latitude:s,scale:E}),k=Object(f.a)({width:r,height:i,pitch:m,bearing:g,altitude:b,farZMultiplier:w}),T=Object(f.b)({height:i,center:S,pitch:m,bearing:g,altitude:b,flipY:!0});return t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{width:r,height:i,viewMatrix:T,projectionMatrix:k})),t.latitude=s,t.longitude=c,t.zoom=d,t.pitch=m,t.bearing=g,t.altitude=b,t.scale=E,t.center=S,Object.freeze(p(t)),t}return l(e,t),s(e,[{key:"projectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(f.d)(t,e)}},{key:"unprojectFlat",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(f.g)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(f.e)(n,this.pixelUnprojectionMatrix),i=Object(f.d)(e,this.scale),o=m()([],i,g()([],r)),a=m()([],this.center,o);return Object(f.g)(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(d.a)(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}(h.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return S});var p=n(23),h=n(3),f=n(160),d=n.n(f),y=n(55),m=n.n(y),v=n(162),g=n.n(v),_=n(163),b=n.n(_),x=n(164),w=n.n(x),E=[0,0,0],S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i),t}return c(e,t),s(e,[{key:"angle",value:function(t){return d()(this,t)}},{key:"cross",value:function(t){return m()(this,this,t),this.check()}},{key:"rotateX",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return g()(this,this,r,e),this.check()}},{key:"rotateY",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return b()(this,this,r,e),this.check()}},{key:"rotateZ",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?E:n;return w()(this,this,r,e),this.check()}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(h.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(h.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(h.a)(t)}}]),e}(p.a)},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t){return Math.pow(2,t)}function u(t){return Math.log2(t)}function l(t,e){var n=r(t,2),i=n[0],o=n[1];return e*=j,[e*(i*L+z)/(2*z),e*(z-Math.log(Math.tan(R+o*L*.5)))/(2*z)]}function c(t,e){var n=r(t,2),i=n[0],o=n[1];e*=j;var a=i/e*(2*z)-z,s=2*(Math.atan(Math.exp(z-o/e*(2*z)))-R);return[a*D,s*D]}function p(t){var e=Number.isFinite,n=t.latitude,r=t.longitude,i=t.zoom,o=t.scale,a=t.highPrecision;o=void 0===o?s(i):o,Object(O.a)(e(n)&&e(r)&&e(o));var u={},l=j*o,c=Math.cos(n*L),p=l/360,h=p/c,f=l/B/c;if(u.pixelsPerMeter=[f,f,f],u.metersPerPixel=[1/f,1/f,1/f],u.pixelsPerDegree=[p,h,f],u.degreesPerPixel=[1/p,1/h,1/f],void 0!==a&&a){var d=L*Math.tan(n*L)/c,y=l/B*d,m=y/h*f;u.pixelsPerDegree2=[0,p*d/2,y],u.pixelsPerMeter2=[m,0,m]}return u}function h(t){var e=t.longitude,n=t.latitude,r=t.zoom,i=t.scale,o=t.meterOffset,a=t.distanceScales,u=void 0===a?null:a;i=void 0===i?s(r):i;var c=l([e,n],i),h=new g.b(c[0],c[1],0);if(o){u=u||p({latitude:n,longitude:e,scale:i});var f=new g.b(o).scale(u.pixelsPerMeter).scale([1,-1,1]);h.add(f)}return h}function f(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.center,a=void 0===o?null:o,s=t.flipY,u=Object(_.a)();return k()(u,u,[0,0,-i]),E()(u,u,[1,1,1/e]),C()(u,u,-n*L),M()(u,u,r*L),void 0!==s&&s&&E()(u,u,[1,-1,1]),a&&k()(u,u,new g.b(a).negate()),u}function d(t){var e=Math.PI,n=Math.sin,r=Math.atan,i=t.width,o=t.height,a=t.altitude,s=void 0===a?F:a,u=t.pitch,l=void 0===u?0:u,c=t.farZMultiplier,p=void 0===c?1:c,h=l*L,f=r(.5/s),d=n(f)*s/n(e/2-h-f),y=Math.cos(e/2-h)*d+s;return{fov:2*r(o/2/s),aspect:i/o,focalDistance:s,near:.1,far:y*p}}function y(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.farZMultiplier,a=void 0===o?10:o,s=d({width:e,height:n,altitude:i,pitch:r,farZMultiplier:a}),u=s.fov,l=s.aspect,c=s.near,p=s.far;return x()([],u,l,c,p)}function m(t,e){var n=Number.isFinite,i=r(t,3),o=i[0],a=i[1],s=i[2],u=void 0===s?0:s;return Object(O.a)(n(o)&&n(a)&&n(u)),Object(_.d)(e,[o,a,u,1])}function v(t,e){var n=Number.isFinite,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=r(t,3),a=o[0],s=o[1],u=o[2];if(Object(O.a)(n(a)&&n(s)),n(u)){return Object(_.d)(e,[a,s,u,1])}var l=Object(_.d)(e,[a,s,0,1]),c=Object(_.d)(e,[a,s,1,1]),p=l[2],h=c[2],f=p===h?0:((i||0)-p)/(h-p);return A()([],l,c,f)}e.i=s,e.f=u,e.d=l,e.g=c,e.c=h,e.b=f,e.a=y,e.h=m,e.e=v;var g=n(14),_=n(16),b=n(57),x=n.n(b),w=n(25),E=n.n(w),S=n(26),k=n.n(S),T=n(61),C=n.n(T),P=n(62),M=n.n(P),I=n(204),A=n.n(I),O=n(69),z=Math.PI,R=z/4,L=z/180,D=180/z,j=512,B=4003e4,F=1.5},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function p(t,e,n){return t<e?e:t>n?n:t}n.d(e,"a",function(){return d}),n.d(e,"b",function(){return m});var h=n(7),f=n(12),d={minZoom:0,maxZoom:20,minPitch:0,maxPitch:60},y={pitch:0,bearing:0,altitude:1.5},m=function(){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,o=n.latitude,a=n.longitude,s=n.zoom,l=n.bearing,c=void 0===l?y.bearing:l,p=n.pitch,h=void 0===p?y.pitch:p,m=n.altitude,v=void 0===m?y.altitude:m,g=n.maxZoom,_=void 0===g?d.maxZoom:g,b=n.minZoom,x=void 0===b?d.minZoom:b,w=n.maxPitch,E=void 0===w?d.maxPitch:w,S=n.minPitch,k=void 0===S?d.minPitch:S,T=n.transitionDuration,C=n.transitionEasing,P=n.transitionInterpolator,M=n.transitionInterruption,I=n.startPanLngLat,A=n.startZoomLngLat,O=n.startBearing,z=n.startPitch,R=n.startZoom;u(this,t),Object(f.a)(e(r),"`width` must be supplied"),Object(f.a)(e(i),"`height` must be supplied"),Object(f.a)(e(a),"`longitude` must be supplied"),Object(f.a)(e(o),"`latitude` must be supplied"),Object(f.a)(e(s),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:r,height:i,latitude:o,longitude:a,zoom:s,bearing:c,pitch:h,altitude:v,maxZoom:_,minZoom:x,maxPitch:E,minPitch:k,transitionDuration:T,transitionEasing:C,transitionInterpolator:P,transitionInterruption:M}),this._interactiveState={startPanLngLat:I,startZoomLngLat:A,startBearing:O,startPitch:z,startZoom:R}}var e=Number.isFinite;return c(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var o=this._calculateNewLngLat({startPanLngLat:r,pos:e}),a=i(o,2),s=a[0],u=a[1];return this._getUpdatedMapState({longitude:s,latitude:u})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){return t.pos,this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var n=t.deltaScaleX,r=void 0===n?0:n,i=t.deltaScaleY,o=void 0===i?0:i,a=this._interactiveState,s=a.startBearing,u=a.startPitch;if(!e(s)||!e(u))return this;var l=this._calculateNewPitchAndBearing({deltaScaleX:r,deltaScaleY:o,startBearing:s,startPitch:u}),c=l.pitch,p=l.bearing;return this._getUpdatedMapState({bearing:p,pitch:c})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var n=t.pos,r=t.startPos,o=t.scale;Object(f.a)(0<o,"`scale` must be a positive number");var a=this._interactiveState,s=a.startZoom,u=a.startZoomLngLat;e(s)||(s=this._viewportProps.zoom,u=this._unproject(r)||this._unproject(n)),Object(f.a)(u,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var l=this._calculateNewZoom({scale:o,startZoom:s}),c=new h.a(Object.assign({},this._viewportProps,{zoom:l})),p=c.getLocationAtPoint({lngLat:u,pos:n}),d=i(p,2),y=d[0],m=d[1];return this._getUpdatedMapState({zoom:l,longitude:y,latitude:m})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=p(r,n,e);var i=t.maxPitch,o=t.minPitch,a=t.pitch;return t.pitch=p(a,o,i),Object.assign(t,Object(h.c)(t)),t}},{key:"_unproject",value:function(t){var e=new h.a(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new h.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,o=r.minZoom;return p(n+Math.log2(e),o,i)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=p(n,-1,1);var o=this._viewportProps,a=o.minPitch,s=o.maxPitch,u=i;return 0<n?u=i+n*(s-i):0>n&&(u=i-n*(a-i)),{pitch:u,bearing:r+180*e}}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"react-map-gl: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t){if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function i(t,e,n){function o(){g===v&&(g=v.slice())}function a(){if(_)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return m}function s(t){if("function"!==typeof t)throw new Error("Expected the listener to be a function.");if(_)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return o(),g.push(t),function(){if(e){if(_)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,o();var n=g.indexOf(t);g.splice(n,1)}}}function u(t){if(!r(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,m=y(m,t)}finally{_=!1}for(var e=v=g,n=0;n<e.length;n++){(0,e[n])()}return t}function l(t){if("function"!==typeof t)throw new Error("Expected the nextReducer to be a function.");y=t,u({type:f.REPLACE})}function c(){var t,e=s;return t={subscribe:function(t){function n(){t.next&&t.next(a())}if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:e(n)}}},t[h.a]=function(){return this},t}var p;if("function"===typeof e&&"undefined"===typeof n&&(n=e,e=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(i)(t,e)}if("function"!==typeof t)throw new Error("Expected the reducer to be a function.");var y=t,m=e,v=[],g=v,_=!1;return u({type:f.INIT}),p={dispatch:u,subscribe:s,getState:a,replaceReducer:l},p[h.a]=c,p}function o(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(t){Object.keys(t).forEach(function(e){var n=t[e];if("undefined"===typeof n(void 0,{type:f.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+f.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function s(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"===typeof t[i]&&(n[i]=t[i])}var s=Object.keys(n),u=void 0;try{a(n)}catch(t){u=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(u)throw u;for(var r=!1,i={},a=0;a<s.length;a++){var l=s[a],c=n[l],p=t[l],h=c(p,e);if("undefined"===typeof h){var f=o(l,e);throw new Error(f)}i[l]=h,r=r||h!==p}return r?i:t}}function u(t,e){return function(){return e(t.apply(this,arguments))}}function l(t,e){if("function"===typeof t)return u(t,e);if("object"!==("undefined"===typeof t?"undefined":d(t))||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":"undefined"===typeof t?"undefined":d(t))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"===typeof a&&(r[o]=u(a,e))}return r}function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function p(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=t.apply(void 0,r),a=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},s={getState:o.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=e.map(function(t){return t(s)});return a=c.apply(void 0,u)(o.dispatch),y({},o,{dispatch:a})}}}n.d(e,"d",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"a",function(){return p});var h=n(101),f={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";var r=n(52);n.d(e,"a",function(){return r.a});var i=n(9);n.d(e,"b",function(){return i.a});var o=(n(56),n(24),n(63),n(3));n.d(e,"c",function(){return o.e});n(201),n(202),n(68),n(203)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return h});var p=n(3),h=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:"set",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:"toString",value:function(){return this.formatString(p.c)}},{key:"formatString",value:function(t){for(var e="",n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+Object(p.f)(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(p.e)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"negate",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:"inverse",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:"lerp",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:"min",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:"max",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:"clamp",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t&&t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(p.c.debug&&!this.validate(t))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(t){return this.subtract(t)}},{key:"setScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:"addScalar",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiplyScalar",value:function(t){return this.scale(t)}},{key:"divideScalar",value:function(t){return this.scale(1/t)}},{key:"clampScalar",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array))},function(t,e,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t,e){var n=c()([],e,t);return u()(n,n,1/n[3]),n}function o(t,e){var n=t%e;return 0>n?e+n:n}function a(t,e,n){return n*e+(1-n)*t}e.a=r,e.d=i,e.c=o,e.b=a;var s=n(67),u=n.n(s),l=n(60),c=n.n(l)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return p}),n.d(e,"b",function(){return d});var s=n(12),u=n(27),l=n(11),c=function(){},p={BREAK:1,SNAP_TO_END:2,IGNORE:3},h={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new u.a,transitionInterruption:p.BREAK,onTransitionStart:c,onTransitionInterrupt:c,onTransitionEnd:c},f={animation:null,propsInTransition:null,startProps:null,endProps:null},d=function(){function t(e){i(this,t),this.props=e,this.state=f,this._onTransitionFrame=this._onTransitionFrame.bind(this)}return a(t,[{key:"getViewportInTransition",value:function(){return this.state.propsInTransition}},{key:"processViewportChange",value:function(t){var e=!1,n=this.props;if(this.props=t,this._shouldIgnoreViewportChange(n,t))return e;var r=this._isTransitionInProgress();if(this._isTransitionEnabled(t)){var i=Object.assign({},n,this.state.interruption===p.SNAP_TO_END?this.state.endProps:this.state.propsInTransition);r&&n.onTransitionInterrupt(),t.onTransitionStart(),this._triggerTransition(i,t),e=!0}else r&&(n.onTransitionInterrupt(),this._endTransition());return e}},{key:"_isTransitionInProgress",value:function(){return!!this.state.propsInTransition}},{key:"_isTransitionEnabled",value:function(t){return 0<t.transitionDuration&&!!t.transitionInterpolator}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return this._isTransitionInProgress()?this.state.interruption===p.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:"_triggerTransition",value:function(t,e){Object(s.a)(this._isTransitionEnabled(e),"Transition is not enabled"),cancelAnimationFrame(this.state.animation);var n=e.transitionInterpolator.initializeProps(t,e);this.state={duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:Date.now(),startProps:n.start,endProps:n.end,animation:null,propsInTransition:{}},this._onTransitionFrame()}},{key:"_onTransitionFrame",value:function(){this.state.animation=requestAnimationFrame(this._onTransitionFrame),this._updateViewport()}},{key:"_endTransition",value:function(){cancelAnimationFrame(this.state.animation),this.state=f}},{key:"_updateViewport",value:function(){var t=Date.now(),e=this.state,n=e.startTime,r=e.duration,i=e.easing,o=e.interpolator,a=e.startProps,s=e.endProps,u=!1,c=(t-n)/r;1<=c&&(c=1,u=!0),c=i(c);var p=o.interpolateProps(a,s,c),h=new l.b(Object.assign({},this.props,p));this.state.propsInTransition=h.getViewportProps();var f=this.props.onViewportChange||this.props.onChangeViewport;f&&f(this.state.propsInTransition),this.props.onViewStateChange&&this.props.onViewStateChange({viewState:this.state.propsInTransition}),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();d.defaultProps=h},function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c});var r=n(72),i=r.b?[[r.b.Rotate,{enable:!1}],[r.b.Pinch,{enable:!1}],[r.b.Swipe,{enable:!1}],[r.b.Pan,{threshold:0,enable:!1}],[r.b.Press,{enable:!1}],[r.b.Tap,{event:"doubletap",taps:2,enable:!1}],[r.b.Tap,{enable:!1}]]:null,o={rotate:["pinch"]},a={doubletap:["tap"]},s={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},u={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel","DOMMouseScroll"]},l={tap:"tap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},c={click:"tap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseleave:"pointerleave"}},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)o.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var p=0;p<s.length;p++)a.call(n,s[p])&&(u[s[p]]=n[s[p]])}}return u}},function(t,e,n){"use strict";var r=n(92),i=(n(34),n(98));n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";function r(t){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(t);try{throw new Error(t)}catch(t){}}e.a=r},function(t,e,n){"use strict";(function(e){function r(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var i=n(2),o=n(136),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(43):"undefined"!==typeof e&&(t=n(43)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(r(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(r(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){s.headers[t]={}}),i.forEach(["post","put","patch"],function(t){s.headers[t]=i.merge(a)}),t.exports=s}).call(e,n(6))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return d});var p=n(15),h=n(3),f=function(t,e){if(!t)throw new Error(e)},d=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:"distance",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:"distanceSquared",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(h.a)(e)}},{key:"dot",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(h.a)(e)}},{key:"normalize",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]+=i[o];return this.check()}},{key:"subtract",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]-=i[o];return this.check()}},{key:"multiply",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]*=i[o];return this.check()}},{key:"divide",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<this.ELEMENTS;++o)this[o]/=i[o];return this.check()}},{key:"scale",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:"scaleAndAdd",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(t){return this.distance(t)}},{key:"distanceToSquared",value:function(t){return this.distanceSquared(t)}},{key:"getComponent",value:function(t){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),Object(h.a)(this[t])}},{key:"setComponent",value:function(t,e){return f(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}},{key:"addVectors",value:function(t,e){return this.copy(t).add(e)}},{key:"subVectors",value:function(t,e){return this.copy(t).subtract(e)}},{key:"multiplyVectors",value:function(t,e){return this.copy(t).multiply(e)}},{key:"addScaledVector",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}]),e}(p.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t){return h(t)||p(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function h(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function f(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function m(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _(t,e){return t.length===e&&t.every(Number.isFinite)}n.d(e,"a",function(){return ut});var b=n(15),x=n(3),w=n(52),E=n(9),S=n(56),k=n(165),T=n.n(k),C=n(166),P=n.n(C),M=n(167),I=n.n(M),A=n(168),O=n.n(A),z=n(170),R=n.n(z),L=n(57),D=n.n(L),j=n(171),B=n.n(j),F=n(58),N=n.n(F),V=n(59),U=n.n(V),q=n(172),Z=n.n(q),$=n(25),W=n.n($),H=n(26),G=n.n(H),X=n(173),Y=n.n(X),K=n(174),J=n.n(K),Q=n(60),tt=n.n(Q),et=n(61),nt=n.n(et),rt=n(175),it=n.n(rt),ot=n(62),at=n.n(ot),st=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ut=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return f(this,e),t=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return g(e,t),y(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=h,this[4]=e,this[5]=o,this[6]=l,this[7]=f,this[8]=n,this[9]=a,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=p,this[15]=y,this.check()}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=a,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=p,this[12]=h,this[13]=f,this[14]=d,this[15]=y,this.check()}},{key:"copy",value:function(t){return this.setColumnMajor.apply(this,l(t))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[t][e]:this[e][t]}},{key:"setElement",value:function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this[e][t]=Object(x.a)(n),this}},{key:"determinant",value:function(){return T()(this)}},{key:"identity",value:function(){return this.copy(st)}},{key:"fromQuaternion",value:function(t){return P()(this,t),this.check()}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return I()(this,e,n,r,i,o,a),this.check()}},{key:"lookAt",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return O()(this,e,r,o),this.check()}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return R()(this,e,n,r,i,a,u),this.check()}},{key:"orthographic",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.focalDistance,s=void 0===a?1:a,u=t.near,l=void 0===u?.1:u,c=t.far,p=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var h=r/2,f=s*Math.tan(h),d=f*o;return(new e).ortho({left:-d,right:d,bottom:-f,top:f,near:l,far:p})}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,o=void 0===i?1:i,a=t.near,s=void 0===a?.1:a,u=t.far,l=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error("radians");return D()(this,e,o,s,l),this.check()}},{key:"transpose",value:function(){return B()(this,this),this.check()}},{key:"invert",value:function(){return N()(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return U()(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return U()(this,this,t),this.check()}},{key:"rotateX",value:function(t){return nt()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return it()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return at()(this,this,t),this.check()}},{key:"rotateXYZ",value:function(t){var e=o(t,3),n=e[0],r=e[1],i=e[2];return this.rotateX(n).rotateY(r).rotateZ(i)}},{key:"rotateAxis",value:function(t,e){return Z()(this,this,t,e),this.check()}},{key:"scale",value:function(t){return W()(this,this,t),this.check()}},{key:"translate",value:function(t){return G()(this,this,t),this.check()}},{key:"transformVector2",value:function(t,e){return e=e||new w.a,Y()(e,t,this),_(e,2),e}},{key:"transformVector3",value:function(t,e){return e=e||new E.a,J()(e,t,this),_(e,3),e}},{key:"transformVector4",value:function(t,e){return e=e||new S.a,tt()(e,t,this),_(e,4),e.check()}},{key:"transformVector",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(t,e){return this._transformVector(t,e,0)}},{key:"transformPoint",value:function(t,e){return this._transformVector(t,e,1)}},{key:"_transformVector",value:function(t,e,n){switch(t.length){case 2:e=e||new w.a,tt()(e,[t[0],t[1],0,n],this),e.length=2,_(e,2);break;case 3:e=e||new E.a,tt()(e,[t[0],t[1],t[2],n],this),e.length=3,_(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");e=e||new S.a,tt()(e,t,this),_(e,4);break;default:throw new Error("Illegal vector")}return e}},{key:"makeRotationX",value:function(t){return this.identity().rotateX(t)}},{key:"makeTranslation",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:"ELEMENTS",get:function(){return 16}}]),e}(b.a)},function(t,e){function n(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=n},function(t,e){function n(t,e,n){var r,i,o,a,s,u,l,c,p,h,f,d,y=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*v+e[12],t[13]=e[1]*y+e[5]*m+e[9]*v+e[13],t[14]=e[2]*y+e[6]*m+e[10]*v+e[14],t[15]=e[3]*y+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=r*y+s*m+p*v+e[12],t[13]=i*y+u*m+h*v+e[13],t[14]=o*y+l*m+f*v+e[14],t[15]=a*y+c*m+d*v+e[15]),t}t.exports=n},function(t,e,n){"use strict";var r=(n(28),n(214),n(215));n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return l});var s=n(14),u=n(12),l=function(){function t(){i(this,t)}return a(t,[{key:"arePropsEqual",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a,u=(this.propNames||[])[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)if(a=o.value,!Object(s.c)(t[a],e[a]))return!1}catch(t){r=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(){Object(u.a)(!1,"interpolateProps is not implemented")}}]),t}()},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return v=t,g}}function o(t,e){try{return t(e)}catch(t){return v=t,g}}function a(t,e,n){try{t(e,n)}catch(t){return v=t,g}}function s(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&y(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),l(t,new d(e,n,a))})}function l(t,e){for(;3===t._83;)t=t._18;if(s._47&&s._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);c(t,e)}function c(t,e){m(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?p(e.promise,t._18):h(e.promise,t._18));var r=o(n,t._18);r===g?h(e.promise,v):p(e.promise,r)})}function p(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var n=i(e);if(n===g)return h(t,v);if(n===t.then&&e instanceof s)return t._83=3,t._18=e,void f(t);if("function"===typeof n)return void y(n.bind(e),t)}t._83=1,t._18=e,f(t)}function h(t,e){t._83=2,t._18=e,s._71&&s._71(t,e),f(t)}function f(t){if(1===t._75&&(l(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)l(t,t._38[e]);t._38=null}}function d(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function y(t,e){var n=!1,r=a(t,function(t){n||(n=!0,p(e,t))},function(t){n||(n=!0,h(e,t))});n||r!==g||(n=!0,h(e,v))}var m=n(79),v=null,g={};t.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return l(this,new d(t,e,n)),n}},function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,a,s,u],p=0;l=new Error(e.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var i=function(t){};t.exports=r},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n(1),i=n.n(r),o=i.a.shape({trySubscribe:i.a.func.isRequired,tryUnsubscribe:i.a.func.isRequired,notifyNestedSubs:i.a.func.isRequired,isSubscribed:i.a.func.isRequired}),a=i.a.shape({subscribe:i.a.func.isRequired,dispatch:i.a.func.isRequired,getState:i.a.func.isRequired})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function s(){}function u(t,e){var n={run:function(r){try{var i=t(e.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(t){n.shouldComponentUpdate=!0,n.error=t}}};return n}function l(t){var e,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l.getDisplayName,h=void 0===c?function(t){return"ConnectAdvanced("+t+")"}:c,b=l.methodName,x=void 0===b?"connectAdvanced":b,w=l.renderCountProp,E=void 0===w?void 0:w,S=l.shouldHandleStateChanges,k=void 0===S||S,T=l.storeKey,C=void 0===T?"store":T,P=l.withRef,M=void 0!==P&&P,I=a(l,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),A=C+"Subscription",O=g++,z=(e={},e[C]=m.a,e[A]=m.b,e),R=(n={},n[A]=m.b,n);return function(e){f()("function"==typeof e,"You must pass a component to the function returned by "+x+". Instead received "+JSON.stringify(e));var n=e.displayName||e.name||"Component",a=h(n),l=v({},I,{getDisplayName:h,methodName:x,renderCountProp:E,shouldHandleStateChanges:k,storeKey:C,withRef:M,displayName:a,wrappedComponentName:n,WrappedComponent:e}),c=function(n){function c(t,e){r(this,c);var o=i(this,n.call(this,t,e));return o.version=O,o.state={},o.renderCount=0,o.store=t[C]||e[C],o.propsMode=Boolean(t[C]),o.setWrappedInstance=o.setWrappedInstance.bind(o),f()(o.store,'Could not find "'+C+'" in either the context or props of "'+a+'". Either wrap the root component in a <Provider>, or explicitly pass "'+C+'" as a prop to "'+a+'".'),o.initSelector(),o.initSubscription(),o}return o(c,n),c.prototype.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return t={},t[A]=e||this.context[A],t},c.prototype.componentDidMount=function(){k&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.prototype.componentWillReceiveProps=function(t){this.selector.run(t)},c.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=s,this.store=null,this.selector.run=s,this.selector.shouldComponentUpdate=!1},c.prototype.getWrappedInstance=function(){return f()(M,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+x+"() call."),this.wrappedInstance},c.prototype.setWrappedInstance=function(t){this.wrappedInstance=t},c.prototype.initSelector=function(){var e=t(this.store.dispatch,l);this.selector=u(e,this.store),this.selector.run(this.props)},c.prototype.initSubscription=function(){if(k){var t=(this.propsMode?this.props:this.context)[A];this.subscription=new y.a(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(_)):this.notifyNestedSubs()},c.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.prototype.addExtraProps=function(t){if(!M&&!E&&(!this.propsMode||!this.subscription))return t;var e=v({},t);return M&&(e.ref=this.setWrappedInstance),E&&(e[E]=this.renderCount++),this.propsMode&&this.subscription&&(e[A]=this.subscription),e},c.prototype.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(d.createElement)(e,this.addExtraProps(t.props))},c}(d.Component);return c.WrappedComponent=e,c.displayName=a,c.childContextTypes=R,c.contextTypes=z,c.propTypes=z,p()(c,e)}}e.a=l;var c=n(95),p=n.n(c),h=n(96),f=n.n(h),d=n(0),y=(n.n(d),n(97)),m=n(33),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g=0,_={}},function(t,e,n){"use strict";function r(t){return function(e,n){function r(){return i}var i=t(e,n);return r.dependsOnOwnProps=!1,r}}function i(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function o(t,e){return function(e,n){var r=(n.displayName,function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)});return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=i(t);var o=r(e,n);return"function"===typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=i(o),o=r(e,n)),o},r}}e.a=r,e.b=o;n(36)},function(t,e,n){"use strict";n(104),n(21)},function(t,e,n){"use strict";var r=n(106),i=r.a.Symbol;e.a=i},function(t,e,n){function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?o(t):a(t)}var i=n(39),o=n(123),a=n(124),s="[object Null]",u="[object Undefined]",l=i?i.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(121),i=r.Symbol;t.exports=i},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";function r(t){var e=a+"&q="+t+",us",n=o.a.get(e);return{type:s,payload:n}}n.d(e,"a",function(){return s}),e.b=r;var i=n(132),o=n.n(i),a="http://api.openweathermap.org/data/2.5/forecast?appid=6a78596d062df78380eff5944c4e5567",s="FETCH_WEATHER"},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(2),i=n(137),o=n(139),a=n(140),s=n(141),u=n(44),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(142);t.exports=function(t){return new Promise(function(e,c){var p=t.data,h=t.headers;r.isFormData(p)&&delete h["Content-Type"];var f=new XMLHttpRequest,d="onreadystatechange",y=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in f||s(t.url)||(f=new window.XDomainRequest,d="onload",y=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var m=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+l(m+":"+v)}if(f.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[d]=function(){if(f&&(4===f.readyState||y)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?f.response:f.responseText,o={data:r,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};i(e,c,o),f=null}},f.onerror=function(){c(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=n(143),_=(t.withCredentials||s(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;_&&(h[t.xsrfHeaderName]=_)}if("setRequestHeader"in f&&r.forEach(h,function(t,e){"undefined"===typeof p&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"===typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),c(t),f=null)}),void 0===p&&(p=null),f.send(p)})}},function(t,e,n){"use strict";var r=n(138);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){(function(t,r){var i;(function(){function o(t,e){if(t!==e){var n=null===t,r=t===C,i=t===t,o=null===e,a=e===C,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(t<e&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function a(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function s(t,e,n){if(e!==e)return g(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function u(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function c(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function p(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function f(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,u=n.length;++r<s;){var l=o(i[r],a[r]);if(l){if(r>=u)return l;var c=n[r];return l*("asc"===c||!0===c?1:-1)}}return t.index-e.index}function d(t){return qt[t]}function y(t){return Zt[t]}function m(t,e,n){return e?t=Ht[t]:n&&(t=Gt[t]),"\\"+t}function v(t){return"\\"+Gt[t]}function g(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function _(t){return!!t&&"object"==typeof t}function b(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=W,o[++i]=n);return o}function w(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function E(t){for(var e=-1,n=t.length;++e<n&&b(t.charCodeAt(e)););return e}function S(t){for(var e=t.length;e--&&b(t.charCodeAt(e)););return e}function k(t){return $t[t]}function T(t){function e(t){if(_(t)&&!Ms(t)&&!(t instanceof i)){if(t instanceof r)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return fr(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pa,this.__views__=[]}function b(){var t=new i(this.__wrapped__);return t.__actions__=ne(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ne(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ne(this.__views__),t}function qt(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Zt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ms(t),r=e<0,i=n?t.length:0,o=Wn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,p=c.length,h=0,f=Ea(u,this.__takeCount__);if(!n||i<U||i==u&&f==u)return nn(r&&n?t.reverse():t,this.__actions__);var d=[];t:for(;u--&&h<f;){l+=e;for(var y=-1,m=t[l];++y<p;){var v=c[y],g=v.iteratee,_=v.type,b=g(m);if(_==Z)m=b;else if(!b){if(_==q)continue t;break t}}d[h++]=m}return d}function $t(){this.__data__={}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Ht(t){return"__proto__"==t?C:this.__data__[t]}function Gt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function Xt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Yt(t){var e=t?t.length:0;for(this.data={hash:va(null),set:new pa};e--;)this.push(t[e])}function Kt(t,e){var n=t.data;return("string"==typeof e||Ri(e)?n.set.has(e):n.hash[e])?0:-1}function Jt(t){var e=this.data;"string"==typeof t||Ri(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=Vo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function ne(t,e){var n=-1,r=t.length;for(e||(e=Vo(r));++n<r;)e[n]=t[n];return e}function re(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function ie(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],l=+e(u);n(l,a)&&(a=l,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Vo(r);++n<r;)i[n]=e(t[n],n,t);return i}function le(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ce(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function pe(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function fe(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function de(t,e){return t===C?e:t}function ye(t,e,n,r){return t!==C&&ea.call(r,n)?t:e}function me(t,e,n){for(var r=-1,i=Ns(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==C||a in t)||(t[a]=u)}return t}function ve(t,e){return null==e?t:_e(e,Ns(e),t)}function ge(t,e){for(var n=-1,r=null==t,i=!r&&Kn(t),o=i?t.length:0,a=e.length,s=Vo(a);++n<a;){var u=e[n];s[n]=i?Jn(u,o)?t[u]:C:r?C:t[u]}return s}function _e(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===C?t:an(t,e,n):null==t?Po:"object"==r?Fe(t):e===C?Ro(t):Ne(t,e)}function xe(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==C)return s;if(!Ri(t))return t;var u=Ms(t);if(u){if(s=Hn(t),!e)return ne(t,s)}else{var l=ra.call(t),c=l==J;if(l!=tt&&l!=H&&(!c||i))return Ut[l]?Xn(t,l,e):i?t:{};if(s=Gn(c?{}:t),!e)return ve(s,t)}o||(o=[]),a||(a=[]);for(var p=o.length;p--;)if(o[p]==t)return a[p];return o.push(t),a.push(s),(u?re:Ae)(t,function(r,i){s[i]=xe(r,e,n,i,t,o,a)}),s}function we(t,e,n){if("function"!=typeof t)throw new Yo($);return ha(function(){t.apply(C,n)},e)}function Ee(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=qn(),a=o==s,u=a&&e.length>=U?yn(e):null,l=e.length;u&&(o=Kt,a=!1,e=u);t:for(;++i<n;){var c=t[i];if(a&&c===c){for(var p=l;p--;)if(e[p]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}function Se(t,e){var n=!0;return Da(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ke(t,e,n,r){var i=r,o=i;return Da(t,function(t,a,s){var u=+e(t,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Te(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===C||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Ce(t,e){var n=[];return Da(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Pe(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Me(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];_(a)&&Kn(a)&&(n||Ms(a)||ki(a))?e?Me(a,e,n,r):le(r,a):n||(r[r.length]=a)}return r}function Ie(t,e){return Ba(t,e,to)}function Ae(t,e){return Ba(t,e,Ns)}function Oe(t,e){return Fa(t,e,Ns)}function ze(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];zi(t[a])&&(o[++i]=a)}return o}function Re(t,e,n){if(null!=t){n!==C&&n in pr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:C}}function Le(t,e,n,r,i,o){return t===e||(null==t||null==e||!Ri(t)&&!_(e)?t!==t&&e!==e:De(t,e,Le,n,r,i,o))}function De(t,e,n,r,i,o,a){var s=Ms(t),u=Ms(e),l=G,c=G;s||(l=ra.call(t),l==H?l=tt:l!=tt&&(s=qi(t))),u||(c=ra.call(e),c==H?c=tt:c!=tt&&(u=qi(e)));var p=l==tt,h=c==tt,f=l==c;if(f&&!s&&!p)return Fn(t,e,l);if(!i){var d=p&&ea.call(t,"__wrapped__"),y=h&&ea.call(e,"__wrapped__");if(d||y)return n(d?t.value():t,y?e.value():e,r,i,o,a)}if(!f)return!1;o||(o=[]),a||(a=[]);for(var m=o.length;m--;)if(o[m]==t)return a[m]==e;o.push(t),a.push(e);var v=(s?Bn:Nn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),v}function je(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=pr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var s=a[0],u=t[s],l=a[1];if(o&&a[2]){if(u===C&&!(s in t))return!1}else{var c=n?n(u,l,s):C;if(!(c===C?Le(l,u,n,!0):c))return!1}}return!0}function Be(t,e){var n=-1,r=Kn(t)?Vo(t.length):[];return Da(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Fe(t){var e=Zn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==C||n in pr(t)))}}return function(t){return je(t,e)}}function Ne(t,e){var n=Ms(t),r=tr(t)&&rr(e),i=t+"";return t=hr(t),function(o){if(null==o)return!1;var a=i;if(o=pr(o),(n||!r)&&!(a in o)){if(null==(o=1==t.length?o:Re(o,Ge(t,0,-1))))return!1;a=Tr(t),o=pr(o)}return o[a]===e?e!==C||a in o:Le(e,o[a],C,!0)}}function Ve(t,e,n,r,i){if(!Ri(t))return t;var o=Kn(e)&&(Ms(e)||qi(e)),a=o?C:Ns(e);return re(a||e,function(s,u){if(a&&(u=s,s=e[u]),_(s))r||(r=[]),i||(i=[]),Ue(t,e,u,Ve,n,r,i);else{var l=t[u],c=n?n(l,s,u,t,e):C,p=c===C;p&&(c=s),c===C&&(!o||u in t)||!p&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function Ue(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var l=t[n],c=i?i(l,u,n,t,e):C,p=c===C;p&&(c=u,Kn(u)&&(Ms(u)||qi(u))?c=Ms(l)?l:Kn(l)?ne(l):[]:Ni(u)||ki(u)?c=ki(l)?Gi(l):Ni(l)?l:{}:p=!1),o.push(u),a.push(c),p?t[n]=r(c,u,i,o,a):(c===c?c!==l:l===l)&&(t[n]=c)}function qe(t){return function(e){return null==e?C:e[t]}}function Ze(t){var e=t+"";return t=hr(t),function(n){return Re(n,t,e)}}function $e(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Jn(r)){var i=r;fa.call(t,r,1)}}return t}function We(t,e){return t+ga(Ta()*(e-t+1))}function He(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Ge(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===C||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Vo(i);++r<i;)o[r]=t[r+e];return o}function Xe(t,e){var n;return Da(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ye(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ke(t,e,n){var r=Vn(),i=-1;return e=ue(e,function(t){return r(t)}),Ye(Be(t,function(t){return{criteria:ue(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return f(t,e,n)})}function Je(t,e){var n=0;return Da(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Qe(t,e){var n=-1,r=qn(),i=t.length,o=r==s,a=o&&i>=U,u=a?yn():null,l=[];u?(r=Kt,o=!1):(a=!1,u=e?[]:l);t:for(;++n<i;){var c=t[n],p=e?e(c,n,t):c;if(o&&c===c){for(var h=u.length;h--;)if(u[h]===p)continue t;e&&u.push(p),l.push(c)}else r(u,p,0)<0&&((e||a)&&u.push(p),l.push(c))}return l}function tn(t,e){for(var n=-1,r=e.length,i=Vo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ge(t,r?0:o,r?o+1:i):Ge(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof i&&(n=n.value());for(var r=-1,o=e.length;++r<o;){var a=e[r];n=a.func.apply(a.thisArg,le([n],a.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Aa){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return on(t,e,Po,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===C;i<o;){var l=ga((i+o)/2),c=n(t[l]),p=c!==C,h=c===c;if(a)var f=h||r;else f=s?h&&p&&(r||null!=c):u?h&&(r||p):null!=c&&(r?c<=e:c<e);f?i=l+1:o=l}return Ea(o,Ia)}function an(t,e,n){if("function"!=typeof t)return Po;if(e===C)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new aa(t.byteLength);return new da(e).set(new da(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=wa(t.length-r,0),a=-1,s=e.length,u=Vo(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function ln(t,e,n){for(var r=-1,i=n.length,o=-1,a=wa(t.length-i,0),s=-1,u=e.length,l=Vo(a+u);++o<a;)l[o]=t[o];for(var c=o;++s<u;)l[c+s]=e[s];for(;++r<i;)l[c+n[r]]=t[o++];return l}function cn(t,e){return function(n,r,i){var o=e?e():{};if(r=Vn(r,i,3),Ms(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else Da(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function pn(t){return vi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:C,a=i>2?n[2]:C,s=i>1?n[i-1]:C;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:C,i-=o?1:0),a&&Qn(n[0],n[1],a)&&(o=i<3?C:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function hn(t,e){return function(n,r){var i=n?Ua(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=pr(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function fn(t){return function(e,n,r){for(var i=pr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(!1===n(i[u],u,i))break}return e}}function dn(t,e){function n(){return(this&&this!==te&&this instanceof n?r:t).apply(e,arguments)}var r=vn(t);return n}function yn(t){return va&&pa?new Yt(t):null}function mn(t){return function(e){for(var n=-1,r=ko(co(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=La(t.prototype),r=t.apply(n,e);return Ri(r)?r:n}}function gn(t){function e(n,r,i){i&&Qn(n,r,i)&&(r=C);var o=jn(n,t,C,C,C,C,C,r);return o.placeholder=e.placeholder,o}return e}function _n(t,e){return vi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(C,n))})}function bn(t,e){return function(n,r,i){if(i&&Qn(n,r,i)&&(r=C),r=Vn(r,i,3),1==r.length){n=Ms(n)?n:cr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return ke(n,r,t,e)}}function xn(t,e){return function(n,r,i){if(r=Vn(r,i,3),Ms(n)){var o=a(n,r,e);return o>-1?n[o]:C}return Pe(n,r,t)}}function wn(t){return function(e,n,r){return e&&e.length?(n=Vn(n,r,3),a(e,n,t)):-1}}function En(t){return function(e,n,r){return n=Vn(n,r,3),Pe(e,n,t,!0)}}function Sn(t){return function(){for(var e,n=arguments.length,i=t?n:-1,o=0,a=Vo(n);t?i--:++i<n;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Yo($);!e&&r.prototype.thru&&"wrapper"==Un(s)&&(e=new r([],!0))}for(i=e?-1:n;++i<n;){s=a[i];var u=Un(s),l="wrapper"==u?Va(s):C;e=l&&er(l[0])&&l[1]==(D|O|R|j)&&!l[4].length&&1==l[9]?e[Un(l[0])].apply(e,l[3]):1==s.length&&er(s)?e[u]():e.thru(s)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ms(r)&&r.length>=U)return e.plant(r).value();for(var i=0,o=n?a[i].apply(this,t):r;++i<n;)o=a[i].call(this,o);return o}}}function kn(t,e){return function(n,r,i){return"function"==typeof r&&i===C&&Ms(n)?t(n,r):e(n,an(r,i,3))}}function Tn(t){return function(e,n,r){return"function"==typeof n&&r===C||(n=an(n,r,3)),t(e,n,to)}}function Cn(t){return function(e,n,r){return"function"==typeof n&&r===C||(n=an(n,r,3)),t(e,n)}}function Pn(t){return function(e,n,r){var i={};return n=Vn(n,r,3),Ae(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function Mn(t){return function(e,n,r){return e=l(e),(t?e:"")+zn(e,n,r)+(t?"":e)}}function In(t){var e=vi(function(n,r){var i=x(r,e.placeholder);return jn(n,t,C,r,i)});return e}function An(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===C&&Ms(n)?t(n,r,i,a):He(n,Vn(r,o,4),i,a,e)}}function On(t,e,n,r,i,o,a,s,u,l){function c(){for(var g=arguments.length,_=g,b=Vo(g);_--;)b[_]=arguments[_];if(r&&(b=un(b,r,i)),o&&(b=ln(b,o,a)),d||m){var w=c.placeholder,E=x(b,w);if((g-=E.length)<l){var S=s?ne(s):C,k=wa(l-g,0),T=d?E:C,P=d?C:E,A=d?b:C,O=d?C:b;e|=d?R:L,e&=~(d?L:R),y||(e&=~(M|I));var z=[t,e,n,A,T,O,P,S,u,k],D=On.apply(C,z);return er(t)&&qa(D,z),D.placeholder=w,D}}var j=h?n:this,B=f?j[t]:t;return s&&(b=ur(b,s)),p&&u<b.length&&(b.length=u),this&&this!==te&&this instanceof c&&(B=v||vn(t)),B.apply(j,b)}var p=e&D,h=e&M,f=e&I,d=e&O,y=e&A,m=e&z,v=f?C:vn(t);return c}function zn(t,e,n){var r=t.length;if(e=+e,r>=e||!ba(e))return"";var i=e-r;return n=null==n?" ":n+"",vo(n,ma(i/n.length)).slice(0,i)}function Rn(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,l=r.length,c=Vo(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++e];return(this&&this!==te&&this instanceof i?a:t).apply(o?n:this,c)}var o=e&M,a=vn(t);return i}function Ln(t){var e=$o[t];return function(t,n){return n=n===C?0:+n||0,n?(n=la(10,n),e(t*n)/n):e(t)}}function Dn(t){return function(e,n,r,i){var o=Vn(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function jn(t,e,n,r,i,o,a,s){var u=e&I;if(!u&&"function"!=typeof t)throw new Yo($);var l=r?r.length:0;if(l||(e&=~(R|L),r=i=C),l-=i?i.length:0,e&L){var c=r,p=i;r=i=C}var h=u?C:Va(t),f=[t,e,n,r,i,c,p,o,a,s];if(h&&(ir(f,h),e=f[1],s=f[9]),f[9]=null==s?u?0:t.length:wa(s-l,0)||0,e==M)var d=dn(f[0],f[2]);else d=e!=R&&e!=(M|R)||f[4].length?On.apply(C,f):Rn.apply(C,f);return(h?Na:qa)(d,f)}function Bn(t,e,n,r,i,o,a){var s=-1,u=t.length,l=e.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=t[s],p=e[s],h=r?r(i?p:c,i?c:p,s):C;if(h!==C){if(h)continue;return!1}if(i){if(!he(e,function(t){return c===t||n(c,t,r,i,o,a)}))return!1}else if(c!==p&&!n(c,p,r,i,o,a))return!1}return!0}function Fn(t,e,n){switch(n){case X:case Y:return+t==+e;case K:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case et:case nt:return t==e+""}return!1}function Nn(t,e,n,r,i,o,a){var s=Ns(t),u=s.length;if(u!=Ns(e).length&&!i)return!1;for(var l=u;l--;){var c=s[l];if(!(i?c in e:ea.call(e,c)))return!1}for(var p=i;++l<u;){c=s[l];var h=t[c],f=e[c],d=r?r(i?f:h,i?h:f,c):C;if(!(d===C?n(h,f,r,i,o,a):d))return!1;p||(p="constructor"==c)}if(!p){var y=t.constructor,m=e.constructor;if(y!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m))return!1}return!0}function Vn(t,n,r){var i=e.callback||To;return i=i===To?be:i,r?i(t,n,r):i}function Un(t){for(var e=t.name,n=Ra[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function qn(t,n,r){var i=e.indexOf||Sr;return i=i===Sr?s:i,t?i(t,n,r):i}function Zn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function $n(t,e){var n=null==t?C:t[e];return ji(n)?n:C}function Wn(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ea(e,t+a);break;case"takeRight":t=wa(t,e-a)}}return{start:t,end:e}}function Hn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Gn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ho),new e}function Xn(t,e,n){var r=t.constructor;switch(e){case rt:return sn(t);case X:case Y:return new r(+t);case it:case ot:case at:case st:case ut:case lt:case ct:case pt:case ht:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case Q:case nt:return new r(t);case et:var o=new r(t.source,At.exec(t));o.lastIndex=t.lastIndex}return o}function Yn(t,e,n){null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Re(t,Ge(e,0,-1)),e=Tr(e));var r=null==t?t:t[e];return null==r?C:r.apply(t,n)}function Kn(t){return null!=t&&nr(Ua(t))}function Jn(t,e){return t="number"==typeof t||Rt.test(t)?+t:-1,e=null==e?Oa:e,t>-1&&t%1==0&&t<e}function Qn(t,e,n){if(!Ri(n))return!1;var r=typeof e;if("number"==r?Kn(n)&&Jn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;return!!("string"==n&&St.test(t)||"number"==n)||!Ms(t)&&(!Et.test(t)||null!=e&&t in pr(e))}function er(t){var n=Un(t);if(!(n in i.prototype))return!1;var r=e[n];if(t===r)return!0;var o=Va(r);return!!o&&t===o[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Oa}function rr(t){return t===t&&!Ri(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<D,a=r==D&&n==O||r==D&&n==j&&t[7].length<=e[8]||r==(D|j)&&n==O;if(!o&&!a)return t;r&M&&(t[2]=e[2],i|=n&M?0:A);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):ne(s),t[4]=u?x(t[3],W):ne(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?ln(u,s,e[6]):ne(s),t[6]=u?x(t[5],W):ne(e[6])),s=e[7],s&&(t[7]=ne(s)),r&D&&(t[8]=null==t[8]?e[8]:Ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===C?e:Is(t,e,or)}function ar(t,e){t=pr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function sr(t,e){var n={};return Ie(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Ea(e.length,n),i=ne(t);r--;){var o=e[r];t[r]=Jn(o,n)?i[o]:C}return t}function lr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Ms(t)||ki(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Jn(s,r)||ea.call(t,s))&&a.push(s)}return a}function cr(t){return null==t?[]:Kn(t)?Ri(t)?t:Ho(t):oo(t)}function pr(t){return Ri(t)?t:Ho(t)}function hr(t){if(Ms(t))return t;var e=[];return l(t).replace(kt,function(t,n,r,i){e.push(r?i.replace(Mt,"$1"):n||t)}),e}function fr(t){return t instanceof i?t.clone():new r(t.__wrapped__,t.__chain__,ne(t.__actions__))}function dr(t,e,n){e=(n?Qn(t,e,n):null==e)?1:wa(ga(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=Vo(ma(i/e));r<i;)a[++o]=Ge(t,r,r+=e);return a}function yr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function mr(t,e,n){return(t?t.length:0)?((n?Qn(t,e,n):null==e)&&(e=1),Ge(t,e<0?0:e)):[]}function vr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ge(t,0,e<0?0:e)):[]}function gr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0,!0):[]}function _r(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,r=i),Te(t,e,n,r)):[]}function xr(t){return t?t[0]:C}function wr(t,e,n){var r=t?t.length:0;return n&&Qn(t,e,n)&&(e=!1),r?Me(t,e):[]}function Er(t){return(t?t.length:0)?Me(t,!0):[]}function Sr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?wa(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return s(t,e,n||0)}function kr(t){return vr(t,1)}function Tr(t){var e=t?t.length:0;return e?t[e-1]:C}function Cr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?wa(r+n,0):Ea(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return g(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Pr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=qn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)fa.call(e,o,1);return e}function Mr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Vn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return $e(t,o),r}function Ir(t){return mr(t,1)}function Ar(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Qn(t,e,n)&&(e=0,n=r),Ge(t,e,n)):[]}function Or(t,e,n){return(t?t.length:0)?((n?Qn(t,e,n):null==e)&&(e=1),Ge(t,0,e<0?0:e)):[]}function zr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ge(t,e<0?0:e)):[]}function Rr(t,e,n){return t&&t.length?en(t,Vn(e,n,3),!1,!0):[]}function Lr(t,e,n){return t&&t.length?en(t,Vn(e,n,3)):[]}function Dr(t,e,n,r){if(!(t?t.length:0))return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Qn(t,e,r)?C:e,e=!1);var i=Vn();return null==n&&i===be||(n=i(n,r,3)),e&&qn()==s?w(t,n):Qe(t,n)}function jr(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){if(Kn(t))return n=wa(t.length,n),!0});for(var r=Vo(n);++e<n;)r[e]=ue(t,qe(e));return r}function Br(t,e,n){if(!(t?t.length:0))return[];var r=jr(t);return null==e?r:(e=an(e,n,4),ue(r,function(t){return ce(t,e,C,!0)}))}function Fr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Kn(n))var r=r?le(Ee(r,n),Ee(n,r)):n}return r?Qe(r):[]}function Nr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ms(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Vr(t){var n=e(t);return n.__chain__=!0,n}function Ur(t,e,n){return e.call(n,t),t}function qr(t,e,n){return e.call(n,t)}function Zr(){return Vr(this)}function $r(){return new r(this.value(),this.__chain__)}function Wr(t){for(var e,r=this;r instanceof n;){var i=fr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Hr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof i){var n=t;return this.__actions__.length&&(n=new i(this)),n=n.reverse(),n.__actions__.push({func:qr,args:[e],thisArg:C}),new r(n,this.__chain__)}return this.thru(e)}function Gr(){return this.value()+""}function Xr(){return nn(this.__wrapped__,this.__actions__)}function Yr(t,e,n){var r=Ms(t)?oe:Se;return n&&Qn(t,e,n)&&(e=C),"function"==typeof e&&n===C||(e=Vn(e,n,3)),r(t,e)}function Kr(t,e,n){var r=Ms(t)?se:Ce;return e=Vn(e,n,3),r(t,e)}function Jr(t,e){return is(t,Fe(e))}function Qr(t,e,n,r){var i=t?Ua(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Qn(e,n,r)?0:n<0?wa(i+n,0):n||0,"string"==typeof t||!Ms(t)&&Ui(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&qn(t,e,n)>-1}function ti(t,e,n){var r=Ms(t)?ue:Be;return e=Vn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Ro(e))}function ni(t,e,n){var r=Ms(t)?se:Ce;return e=Vn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Qn(t,e,n):null==e){t=cr(t);var r=t.length;return r>0?t[We(0,r-1)]:C}var i=-1,o=Hi(t),r=o.length,a=r-1;for(e=Ea(e<0?0:+e||0,r);++i<e;){var s=We(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Pa)}function oi(t){var e=t?Ua(t):0;return nr(e)?e:Ns(t).length}function ai(t,e,n){var r=Ms(t)?he:Xe;return n&&Qn(t,e,n)&&(e=C),"function"==typeof e&&n===C||(e=Vn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&Qn(t,e,n)&&(e=C);var r=-1;return e=Vn(e,n,3),Ye(Be(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}}),h)}function ui(t,e,n,r){return null==t?[]:(r&&Qn(e,n,r)&&(n=C),Ms(e)||(e=null==e?[]:[e]),Ms(n)||(n=null==n?[]:[n]),Ke(t,e,n))}function li(t,e){return Kr(t,Fe(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Yo($);var n=t;t=e,e=n}return t=ba(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function pi(t,e,n){return n&&Qn(t,e,n)&&(e=C),e=t&&null==e?t.length:wa(+e||0,0),jn(t,D,C,C,C,C,e)}function hi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Yo($);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=C),n}}function fi(t,e,n){function r(){f&&sa(f),l&&sa(l),y=0,l=f=d=C}function i(e,n){n&&sa(n),l=f=d=C,e&&(y=ys(),c=t.apply(h,u),f||l||(u=h=C))}function o(){var t=e-(ys()-p);t<=0||t>e?i(d,l):f=ha(o,t)}function a(){i(v,f)}function s(){if(u=arguments,p=ys(),h=this,d=v&&(f||!g),!1===m)var n=g&&!f;else{l||g||(y=p);var r=m-(p-y),i=r<=0||r>m;i?(l&&(l=sa(l)),y=p,c=t.apply(h,u)):l||(l=ha(a,r))}return i&&f?f=sa(f):f||e===m||(f=ha(o,e)),n&&(i=!0,c=t.apply(h,u)),!i||f||l||(u=h=C),c}var u,l,c,p,h,f,d,y=0,m=!1,v=!0;if("function"!=typeof t)throw new Yo($);if(e=e<0?0:+e||0,!0===n){var g=!0;v=!1}else Ri(n)&&(g=!!n.leading,m="maxWait"in n&&wa(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return s.cancel=r,s}function di(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Yo($);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new di.Cache,n}function yi(t){if("function"!=typeof t)throw new Yo($);return function(){return!t.apply(this,arguments)}}function mi(t){return hi(2,t)}function vi(t,e){if("function"!=typeof t)throw new Yo($);return e=wa(e===C?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=wa(n.length-e,0),o=Vo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=Vo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function gi(t){if("function"!=typeof t)throw new Yo($);return function(e){return t.apply(this,e)}}function _i(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Yo($);return!1===n?r=!1:Ri(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fi(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Po:e,jn(e,R,C,[t],[])}function xi(t,e,n,r){return e&&"boolean"!=typeof e&&Qn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?xe(t,e,an(n,r,1)):xe(t,e)}function wi(t,e,n){return"function"==typeof e?xe(t,!0,an(e,n,1)):xe(t,!0)}function Ei(t,e){return t>e}function Si(t,e){return t>=e}function ki(t){return _(t)&&Kn(t)&&ea.call(t,"callee")&&!ca.call(t,"callee")}function Ti(t){return!0===t||!1===t||_(t)&&ra.call(t)==X}function Ci(t){return _(t)&&ra.call(t)==Y}function Pi(t){return!!t&&1===t.nodeType&&_(t)&&!Ni(t)}function Mi(t){return null==t||(Kn(t)&&(Ms(t)||Ui(t)||ki(t)||_(t)&&zi(t.splice))?!t.length:!Ns(t).length)}function Ii(t,e,n,r){n="function"==typeof n?an(n,r,3):C;var i=n?n(t,e):C;return i===C?Le(t,e,n):!!i}function Ai(t){return _(t)&&"string"==typeof t.message&&ra.call(t)==K}function Oi(t){return"number"==typeof t&&ba(t)}function zi(t){return Ri(t)&&ra.call(t)==J}function Ri(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Li(t,e,n,r){return n="function"==typeof n?an(n,r,3):C,je(t,Zn(e),n)}function Di(t){return Fi(t)&&t!=+t}function ji(t){return null!=t&&(zi(t)?oa.test(ta.call(t)):_(t)&&zt.test(t))}function Bi(t){return null===t}function Fi(t){return"number"==typeof t||_(t)&&ra.call(t)==Q}function Ni(t){var e;if(!_(t)||ra.call(t)!=tt||ki(t)||!ea.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var n;return Ie(t,function(t,e){n=e}),n===C||ea.call(t,n)}function Vi(t){return Ri(t)&&ra.call(t)==et}function Ui(t){return"string"==typeof t||_(t)&&ra.call(t)==nt}function qi(t){return _(t)&&nr(t.length)&&!!Vt[ra.call(t)]}function Zi(t){return t===C}function $i(t,e){return t<e}function Wi(t,e){return t<=e}function Hi(t){var e=t?Ua(t):0;return nr(e)?e?ne(t):[]:oo(t)}function Gi(t){return _e(t,to(t))}function Xi(t,e,n){var r=La(t);return n&&Qn(t,e,n)&&(e=C),e?ve(r,e):r}function Yi(t){return ze(t,to(t))}function Ki(t,e,n){var r=null==t?C:Re(t,hr(e),e+"");return r===C?n:r}function Ji(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=hr(e),null==(t=1==e.length?t:Re(t,Ge(e,0,-1))))return!1;e=Tr(e),n=ea.call(t,e)}return n||nr(t.length)&&Jn(e,t.length)&&(Ms(t)||ki(t))}function Qi(t,e,n){n&&Qn(t,e,n)&&(e=C);for(var r=-1,i=Ns(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?ea.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(t){if(null==t)return[];Ri(t)||(t=Ho(t));var e=t.length;e=e&&nr(e)&&(Ms(t)||ki(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Vo(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Jn(s,e)||"constructor"==s&&(i||!ea.call(t,s))||o.push(s);return o}function eo(t){t=pr(t);for(var e=-1,n=Ns(t),r=n.length,i=Vo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?C:t[e];return r===C&&(null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Re(t,Ge(e,0,-1)),r=null==t?C:t[Tr(e)]),r=r===C?n:r),zi(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:hr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Ri(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Jn(e[i+1])?[]:{})),s=s[u]}return t}function io(t,e,n,r){var i=Ms(t)||qi(t);if(e=Vn(e,r,4),null==n)if(i||Ri(t)){var o=t.constructor;n=i?Ms(t)?new o:[]:La(zi(o)?o.prototype:C)}else n={};return(i?re:Ae)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,Ns(t))}function ao(t){return tn(t,to(t))}function so(t,e,n){return e=+e||0,n===C?(n=e,e=0):n=+n||0,t>=Ea(e,n)&&t<wa(e,n)}function uo(t,e,n){n&&Qn(t,e,n)&&(e=n=C);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Ta();return Ea(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return We(t,e)}function lo(t){return(t=l(t))&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return(t=l(t))&&t.replace(Lt,d).replace(Pt,"")}function po(t,e,n){t=l(t),e+="";var r=t.length;return n=n===C?r:Ea(n<0?0:+n||0,r),(n-=e.length)>=0&&t.indexOf(e,n)==n}function ho(t){return t=l(t),t&&_t.test(t)?t.replace(vt,y):t}function fo(t){return t=l(t),t&&Ct.test(t)?t.replace(Tt,m):t||"(?:)"}function yo(t,e,n){t=l(t),e=+e;var r=t.length;if(r>=e||!ba(e))return t;var i=(e-r)/2,o=ga(i);return n=zn("",ma(i),n),n.slice(0,o)+t+n}function mo(t,e,n){return(n?Qn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),ka(t,e||(Ot.test(t)?16:10))}function vo(t,e){var n="";if(t=l(t),(e=+e)<1||!t||!ba(e))return n;do{e%2&&(n+=t),e=ga(e/2),t+=t}while(e);return n}function go(t,e,n){return t=l(t),n=null==n?0:Ea(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function _o(t,n,r){var i=e.templateSettings;r&&Qn(t,n,r)&&(n=r=C),t=l(t),n=me(ve({},r||n),i,ye);var o,a,s=me(ve({},n.imports),i.imports,ye),u=Ns(s),c=tn(s,u),p=0,h=n.interpolate||Dt,f="__p += '",d=Go((n.escape||Dt).source+"|"+h.source+"|"+(h===wt?It:Dt).source+"|"+(n.evaluate||Dt).source+"|$","g"),y="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Nt+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(p,u).replace(jt,v),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),p=u+e.length,e}),f+="';\n";var m=n.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(ft,""):f).replace(dt,"$1").replace(yt,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ks(function(){return Zo(u,y+"return "+f).apply(C,c)});if(g.source=f,Ai(g))throw g;return g}function bo(t,e,n){var r=t;return(t=l(t))?(n?Qn(r,e,n):null==e)?t.slice(E(t),S(t)+1):(e+="",t.slice(c(t,e),p(t,e)+1)):t}function xo(t,e,n){var r=t;return t=l(t),t?(n?Qn(r,e,n):null==e)?t.slice(E(t)):t.slice(c(t,e+"")):t}function wo(t,e,n){var r=t;return t=l(t),t?(n?Qn(r,e,n):null==e)?t.slice(0,S(t)+1):t.slice(0,p(t,e+"")+1):t}function Eo(t,e,n){n&&Qn(t,e,n)&&(e=C);var r=B,i=F;if(null!=e)if(Ri(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?l(e.omission):i}else r=+e||0;if(t=l(t),r>=t.length)return t;var a=r-i.length;if(a<1)return i;var s=t.slice(0,a);if(null==o)return s+i;if(Vi(o)){if(t.slice(a).search(o)){var u,c,p=t.slice(0,a);for(o.global||(o=Go(o.source,(At.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(p);)c=u.index;s=s.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+i}function So(t){return t=l(t),t&&gt.test(t)?t.replace(mt,k):t}function ko(t,e,n){return n&&Qn(t,e,n)&&(e=C),t=l(t),t.match(e||Bt)||[]}function To(t,e,n){return n&&Qn(t,e,n)&&(e=C),_(t)?Mo(t):be(t,e)}function Co(t){return function(){return t}}function Po(t){return t}function Mo(t){return Fe(xe(t,!0))}function Io(t,e){return Ne(t,xe(e,!0))}function Ao(t,e,n){if(null==n){var r=Ri(e),i=r?Ns(e):C,o=i&&i.length?ze(e,i):C;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=ze(e,Ns(e)));var a=!0,s=-1,u=zi(t),l=o.length;!1===n?a=!1:Ri(n)&&"chain"in n&&(a=n.chain);for(;++s<l;){var c=o[s],p=e[c];t[c]=p,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__);return(r.__actions__=ne(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,le([this.value()],arguments))}}(p))}return t}function Oo(){return te._=ia,this}function zo(){}function Ro(t){return tr(t)?qe(t):Ze(t)}function Lo(t){return function(e){return Re(t,hr(e),e+"")}}function Do(t,e,n){n&&Qn(t,e,n)&&(e=n=C),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=wa(ma((e-t)/(n||1)),0),o=Vo(i);++r<i;)o[r]=t,t+=n;return o}function jo(t,e,n){if((t=ga(t))<1||!ba(t))return[];var r=-1,i=Vo(Ea(t,Ma));for(e=an(e,n,1);++r<t;)r<Ma?i[r]=e(r):e(r);return i}function Bo(t){var e=++na;return l(t)+e}function Fo(t,e){return(+t||0)+(+e||0)}function No(t,e,n){return n&&Qn(t,e,n)&&(e=C),e=Vn(e,n,3),1==e.length?fe(Ms(t)?t:cr(t),e):Je(t,e)}t=t?ee.defaults(te.Object(),t,ee.pick(te,Ft)):te;var Vo=t.Array,Uo=t.Date,qo=t.Error,Zo=t.Function,$o=t.Math,Wo=t.Number,Ho=t.Object,Go=t.RegExp,Xo=t.String,Yo=t.TypeError,Ko=Vo.prototype,Jo=Ho.prototype,Qo=Xo.prototype,ta=Zo.prototype.toString,ea=Jo.hasOwnProperty,na=0,ra=Jo.toString,ia=te._,oa=Go("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,sa=t.clearTimeout,ua=t.parseFloat,la=$o.pow,ca=Jo.propertyIsEnumerable,pa=$n(t,"Set"),ha=t.setTimeout,fa=Ko.splice,da=t.Uint8Array,ya=$n(t,"WeakMap"),ma=$o.ceil,va=$n(Ho,"create"),ga=$o.floor,_a=$n(Vo,"isArray"),ba=t.isFinite,xa=$n(Ho,"keys"),wa=$o.max,Ea=$o.min,Sa=$n(Uo,"now"),ka=t.parseInt,Ta=$o.random,Ca=Wo.NEGATIVE_INFINITY,Pa=Wo.POSITIVE_INFINITY,Ma=4294967295,Ia=Ma-1,Aa=Ma>>>1,Oa=9007199254740991,za=ya&&new ya,Ra={};e.support={};e.templateSettings={escape:bt,evaluate:xt,interpolate:wt,variable:"",imports:{_:e}};var La=function(){function t(){}return function(e){if(Ri(e)){t.prototype=e;var n=new t;t.prototype=C}return n||{}}}(),Da=hn(Ae),ja=hn(Oe,!0),Ba=fn(),Fa=fn(!0),Na=za?function(t,e){return za.set(t,e),t}:Po,Va=za?function(t){return za.get(t)}:zo,Ua=qe("length"),qa=function(){var t=0,e=0;return function(n,r){var i=ys(),o=V-(i-e);if(e=i,o>0){if(++t>=N)return n}else t=0;return Na(n,r)}}(),Za=vi(function(t,e){return _(t)&&Kn(t)?Ee(t,Me(e,!1,!0)):[]}),$a=wn(),Wa=wn(!0),Ha=vi(function(t){for(var e=t.length,n=e,r=Vo(p),i=qn(),o=i==s,a=[];n--;){var u=t[n]=Kn(u=t[n])?u:[];r[n]=o&&u.length>=120?yn(n&&u):null}var l=t[0],c=-1,p=l?l.length:0,h=r[0];t:for(;++c<p;)if(u=l[c],(h?Kt(h,u):i(a,u,0))<0){for(var n=e;--n;){var f=r[n];if((f?Kt(f,u):i(t[n],u,0))<0)continue t}h&&h.push(u),a.push(u)}return a}),Ga=vi(function(t,e){e=Me(e);var n=ge(t,e);return $e(t,e.sort(o)),n}),Xa=Dn(),Ya=Dn(!0),Ka=vi(function(t){return Qe(Me(t,!1,!0))}),Ja=vi(function(t,e){return Kn(t)?Ee(t,e):[]}),Qa=vi(jr),ts=vi(function(t){var e=t.length,n=e>2?t[e-2]:C,r=e>1?t[e-1]:C;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):C,r=C),t.length=e,Br(t,n,r)}),es=vi(function(t){return t=Me(t),this.thru(function(e){return Qt(Ms(e)?e:[pr(e)],t)})}),ns=vi(function(t,e){return ge(t,Me(e))}),rs=cn(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),is=xn(Da),os=xn(ja,!0),as=kn(re,Da),ss=kn(ie,ja),us=cn(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),ls=cn(function(t,e,n){t[n]=e}),cs=vi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Kn(t)?Vo(t.length):[];return Da(t,function(t){var s=i?e:o&&null!=t?t[e]:C;a[++r]=s?s.apply(t,n):Yn(t,e,n)}),a}),ps=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),hs=An(ce,Da),fs=An(pe,ja),ds=vi(function(t,e){if(null==t)return[];var n=e[2];return n&&Qn(e[0],e[1],n)&&(e.length=1),Ke(t,Me(e),[])}),ys=Sa||function(){return(new Uo).getTime()},ms=vi(function(t,e,n){var r=M;if(n.length){var i=x(n,ms.placeholder);r|=R}return jn(t,r,e,n,i)}),vs=vi(function(t,e){e=e.length?Me(e):Yi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=jn(t[i],M,t)}return t}),gs=vi(function(t,e,n){var r=M|I;if(n.length){var i=x(n,gs.placeholder);r|=R}return jn(e,r,t,n,i)}),_s=gn(O),bs=gn(z),xs=vi(function(t,e){return we(t,1,e)}),ws=vi(function(t,e,n){return we(t,e,n)}),Es=Sn(),Ss=Sn(!0),ks=vi(function(t,e){if(e=Me(e),"function"!=typeof t||!oe(e,u))throw new Yo($);var n=e.length;return vi(function(r){for(var i=Ea(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Ts=In(R),Cs=In(L),Ps=vi(function(t,e){return jn(t,j,C,C,C,Me(e))}),Ms=_a||function(t){return _(t)&&nr(t.length)&&ra.call(t)==G},Is=pn(Ve),As=pn(function(t,e,n){return n?me(t,e,n):ve(t,e)}),Os=_n(As,de),zs=_n(Is,or),Rs=En(Ae),Ls=En(Oe),Ds=Tn(Ba),js=Tn(Fa),Bs=Cn(Ae),Fs=Cn(Oe),Ns=xa?function(t){var e=null==t?C:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Kn(t)?lr(t):Ri(t)?xa(t):[]}:lr,Vs=Pn(!0),Us=Pn(),qs=vi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Me(e),Xo);return ar(t,Ee(to(t),e))}var n=an(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Zs=vi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,an(e[0],e[1],3)):ar(t,Me(e))}),$s=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ws=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hs=Mn(),Gs=Mn(!0),Xs=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ys=mn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ks=vi(function(t,e){try{return t.apply(C,e)}catch(t){return Ai(t)?t:new qo(t)}}),Js=vi(function(t,e){return function(n){return Yn(n,t,e)}}),Qs=vi(function(t,e){return function(n){return Yn(t,n,e)}}),tu=Ln("ceil"),eu=Ln("floor"),nu=bn(Ei,Ca),ru=bn($i,Pa),iu=Ln("round");return e.prototype=n.prototype,r.prototype=La(n.prototype),r.prototype.constructor=r,i.prototype=La(n.prototype),i.prototype.constructor=i,$t.prototype.delete=Wt,$t.prototype.get=Ht,$t.prototype.has=Gt,$t.prototype.set=Xt,Yt.prototype.push=Jt,di.Cache=$t,e.after=ci,e.ary=pi,e.assign=As,e.at=ns,e.before=hi,e.bind=ms,e.bindAll=vs,e.bindKey=gs,e.callback=To,e.chain=Vr,e.chunk=dr,e.compact=yr,e.constant=Co,e.countBy=rs,e.create=Xi,e.curry=_s,e.curryRight=bs,e.debounce=fi,e.defaults=Os,e.defaultsDeep=zs,e.defer=xs,e.delay=ws,e.difference=Za,e.drop=mr,e.dropRight=vr,e.dropRightWhile=gr,e.dropWhile=_r,e.fill=br,e.filter=Kr,e.flatten=wr,e.flattenDeep=Er,e.flow=Es,e.flowRight=Ss,e.forEach=as,e.forEachRight=ss,e.forIn=Ds,e.forInRight=js,e.forOwn=Bs,e.forOwnRight=Fs,e.functions=Yi,e.groupBy=us,e.indexBy=ls,e.initial=kr,e.intersection=Ha,e.invert=Qi,e.invoke=cs,e.keys=Ns,e.keysIn=to,e.map=ti,e.mapKeys=Vs,e.mapValues=Us,e.matches=Mo,e.matchesProperty=Io,e.memoize=di,e.merge=Is,e.method=Js,e.methodOf=Qs,e.mixin=Ao,e.modArgs=ks,e.negate=yi,e.omit=qs,e.once=mi,e.pairs=eo,e.partial=Ts,e.partialRight=Cs,e.partition=ps,e.pick=Zs,e.pluck=ei,e.property=Ro,e.propertyOf=Lo,e.pull=Pr,e.pullAt=Ga,e.range=Do,e.rearg=Ps,e.reject=ni,e.remove=Mr,e.rest=Ir,e.restParam=vi,e.set=ro,e.shuffle=ii,e.slice=Ar,e.sortBy=si,e.sortByAll=ds,e.sortByOrder=ui,e.spread=gi,e.take=Or,e.takeRight=zr,e.takeRightWhile=Rr,e.takeWhile=Lr,e.tap=Ur,e.throttle=_i,e.thru=qr,e.times=jo,e.toArray=Hi,e.toPlainObject=Gi,e.transform=io,e.union=Ka,e.uniq=Dr,e.unzip=jr,e.unzipWith=Br,e.values=oo,e.valuesIn=ao,e.where=li,e.without=Ja,e.wrap=bi,e.xor=Fr,e.zip=Qa,e.zipObject=Nr,e.zipWith=ts,e.backflow=Ss,e.collect=ti,e.compose=Ss,e.each=as,e.eachRight=ss,e.extend=As,e.iteratee=To,e.methods=Yi,e.object=Nr,e.select=Kr,e.tail=Ir,e.unique=Dr,Ao(e,e),e.add=Fo,e.attempt=Ks,e.camelCase=$s,e.capitalize=lo,e.ceil=tu,e.clone=xi,e.cloneDeep=wi,e.deburr=co,e.endsWith=po,e.escape=ho,e.escapeRegExp=fo,e.every=Yr,e.find=is,e.findIndex=$a,e.findKey=Rs,e.findLast=os,e.findLastIndex=Wa,e.findLastKey=Ls,e.findWhere=Jr,e.first=xr,e.floor=eu,e.get=Ki,e.gt=Ei,e.gte=Si,e.has=Ji,e.identity=Po,e.includes=Qr,e.indexOf=Sr,e.inRange=so,e.isArguments=ki,e.isArray=Ms,e.isBoolean=Ti,e.isDate=Ci,e.isElement=Pi,e.isEmpty=Mi,e.isEqual=Ii,e.isError=Ai,e.isFinite=Oi,e.isFunction=zi,e.isMatch=Li,e.isNaN=Di,e.isNative=ji,e.isNull=Bi,e.isNumber=Fi,e.isObject=Ri,e.isPlainObject=Ni,e.isRegExp=Vi,e.isString=Ui,e.isTypedArray=qi,e.isUndefined=Zi,e.kebabCase=Ws,e.last=Tr,e.lastIndexOf=Cr,e.lt=$i,e.lte=Wi,e.max=nu,e.min=ru,e.noConflict=Oo,e.noop=zo,e.now=ys,e.pad=yo,e.padLeft=Hs,e.padRight=Gs,e.parseInt=mo,e.random=uo,e.reduce=hs,e.reduceRight=fs,e.repeat=vo,e.result=no,e.round=iu,e.runInContext=T,e.size=oi,e.snakeCase=Xs,e.some=ai,e.sortedIndex=Xa,e.sortedLastIndex=Ya,e.startCase=Ys,e.startsWith=go,e.sum=No,e.template=_o,e.trim=bo,e.trimLeft=xo,e.trimRight=wo,e.trunc=Eo,e.unescape=So,e.uniqueId=Bo,e.words=ko,e.all=Yr,e.any=ai,e.contains=Qr,e.eq=Ii,e.detect=is,e.foldl=hs,e.foldr=fs,e.head=xr,e.include=Qr,e.inject=hs,Ao(e,function(){var t={};return Ae(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=P,re(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),re(["drop","take"],function(t,e){i.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new i(this);n=null==n?1:wa(ga(n)||0,0);var o=this.clone();return r?o.__takeCount__=Ea(o.__takeCount__,n):o.__views__.push({size:n,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),re(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=Z;i.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Vn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),re(["first","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),re(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[n](1)}}),re(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Fe:Ro;i.prototype[t]=function(t){return this[n](r(t))}}),i.prototype.compact=function(){return this.filter(Po)},i.prototype.reject=function(t,e){return t=Vn(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new i(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==C&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},i.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},i.prototype.toArray=function(){return this.take(Pa)},Ae(i.prototype,function(t,n){var o=/^(?:filter|map|reject)|While$/.test(n),a=/^(?:first|last)$/.test(n),s=e[a?"take"+("last"==n?"Right":""):n];s&&(e.prototype[n]=function(){var e=a?[1]:arguments,n=this.__chain__,u=this.__wrapped__,l=!!this.__actions__.length,c=u instanceof i,p=e[0],h=c||Ms(u);h&&o&&"function"==typeof p&&1!=p.length&&(c=h=!1);var f=function(t){return a&&n?s(t,1)[0]:s.apply(C,le([t],e))},d={func:qr,args:[f],thisArg:C},y=c&&!l;if(a&&!n)return y?(u=u.clone(),u.__actions__.push(d),t.call(u)):s.call(C,this.value())[0];if(!a&&h){u=y?u:new i(this);var m=t.apply(u,e);return m.__actions__.push(d),new r(m,n)}return this.thru(f)})}),re(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Qo:Ko)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ae(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name;(Ra[i]||(Ra[i]=[])).push({name:n,func:r})}}),Ra[On(C,I).name]=[{name:"wrapper",func:C}],i.prototype.clone=b,i.prototype.reverse=qt,i.prototype.value=Zt,e.prototype.chain=Zr,e.prototype.commit=$r,e.prototype.concat=es,e.prototype.plant=Wr,e.prototype.reverse=Hr,e.prototype.toString=Gr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Xr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var C,P="3.10.1",M=1,I=2,A=4,O=8,z=16,R=32,L=64,D=128,j=256,B=30,F="...",N=150,V=16,U=200,q=1,Z=2,$="Expected a function",W="__lodash_placeholder__",H="[object Arguments]",G="[object Array]",X="[object Boolean]",Y="[object Date]",K="[object Error]",J="[object Function]",Q="[object Number]",tt="[object Object]",et="[object RegExp]",nt="[object String]",rt="[object ArrayBuffer]",it="[object Float32Array]",ot="[object Float64Array]",at="[object Int8Array]",st="[object Int16Array]",ut="[object Int32Array]",lt="[object Uint8Array]",ct="[object Uint8ClampedArray]",pt="[object Uint16Array]",ht="[object Uint32Array]",ft=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,vt=/[&<>"'`]/g,gt=RegExp(mt.source),_t=RegExp(vt.source),bt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,St=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Tt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ct=RegExp(Tt.source),Pt=/[\u0300-\u036f\ufe20-\ufe23]/g,Mt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Ot=/^0[xX]/,zt=/^\[object .+?Constructor\]$/,Rt=/^\d+$/,Lt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,jt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ft=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Nt=-1,Vt={};Vt[it]=Vt[ot]=Vt[at]=Vt[st]=Vt[ut]=Vt[lt]=Vt[ct]=Vt[pt]=Vt[ht]=!0,Vt[H]=Vt[G]=Vt[rt]=Vt[X]=Vt[Y]=Vt[K]=Vt[J]=Vt["[object Map]"]=Vt[Q]=Vt[tt]=Vt[et]=Vt["[object Set]"]=Vt[nt]=Vt["[object WeakMap]"]=!1;var Ut={};Ut[H]=Ut[G]=Ut[rt]=Ut[X]=Ut[Y]=Ut[it]=Ut[ot]=Ut[at]=Ut[st]=Ut[ut]=Ut[Q]=Ut[tt]=Ut[et]=Ut[nt]=Ut[lt]=Ut[ct]=Ut[pt]=Ut[ht]=!0,Ut[K]=Ut[J]=Ut["[object Map]"]=Ut["[object Set]"]=Ut["[object WeakMap]"]=!1;var qt={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Zt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},$t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={function:!0,object:!0},Ht={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xt=Wt[typeof e]&&e&&!e.nodeType&&e,Yt=Wt[typeof t]&&t&&!t.nodeType&&t,Kt=Xt&&Yt&&"object"==typeof r&&r&&r.Object&&r,Jt=Wt[typeof self]&&self&&self.Object&&self,Qt=Wt[typeof window]&&window&&window.Object&&window,te=(Yt&&Yt.exports,Kt||Qt!==(this&&this.window)&&Qt||Jt||this),ee=T();te._=ee,(i=function(){return ee}.call(e,n,e,t))!==C&&(t.exports=i)}).call(this)}).call(e,n(153)(t),n(4))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return P});var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(49),m=n(11),v=n(7),g=n(17),_=n(50),b=n(216),x=n(74),w=n(227),E=n(75),S=Object.assign({},y.a.propTypes,{maxZoom:d.a.number,minZoom:d.a.number,maxPitch:d.a.number,minPitch:d.a.number,onViewStateChange:d.a.func,onViewportChange:d.a.func,transitionDuration:d.a.number,transitionInterpolator:d.a.object,transitionInterruption:d.a.number,transitionEasing:d.a.func,onTransitionStart:d.a.func,onTransitionInterrupt:d.a.func,onTransitionEnd:d.a.func,scrollZoom:d.a.bool,dragPan:d.a.bool,dragRotate:d.a.bool,doubleClickZoom:d.a.bool,touchZoom:d.a.bool,touchRotate:d.a.bool,keyboard:d.a.bool,onHover:d.a.func,onClick:d.a.func,onContextMenu:d.a.func,touchAction:d.a.string,clickRadius:d.a.number,getCursor:d.a.func,mapControls:d.a.shape({events:d.a.arrayOf(d.a.string),handleEvent:d.a.func})}),k=function(t){var e=t.isDragging,n=t.isHovering;return e?w.a.CURSOR.GRABBING:n?w.a.CURSOR.POINTER:w.a.CURSOR.GRAB},T=Object.assign({},y.a.defaultProps,m.a,g.b.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchAction:"none",clickRadius:0,getCursor:k}),C={viewport:d.a.instanceOf(v.a),isDragging:d.a.bool,eventManager:d.a.object},P=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),Object(E.a)(t),n.state={isDragging:!1,isHovering:!1},n._mapControls=t.mapControls||new x.a,n._eventManager=new b.a(null,{legacyBlockScroll:!1,touchAction:t.touchAction}),n._updateQueryParams(t.mapStyle),n.getMap=n.getMap.bind(p(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(p(n)),n._getFeatures=n._getFeatures.bind(p(n)),n._updateQueryParams=n._updateQueryParams.bind(p(n)),n._onInteractiveStateChange=n._onInteractiveStateChange.bind(p(n)),n._getPos=n._getPos.bind(p(n)),n._eventCanvasLoaded=n._eventCanvasLoaded.bind(p(n)),n._staticMapLoaded=n._staticMapLoaded.bind(p(n)),n}return l(e,t),u(e,null,[{key:"supported",value:function(){return y.a.supported()}}]),u(e,[{key:"getChildContext",value:function(){return{viewport:new v.a(this.props),isDragging:this.state.isDragging,eventManager:this._eventManager}}},{key:"componentDidMount",value:function(){var t=this._eventManager;t.on({mousemove:this._onMouseMove.bind(this),click:this._onMouseClick.bind(this),contextmenu:this._onContextMenu.bind(this)}),this._mapControls.setOptions(Object.assign({},this.props,this.props.viewState,{onStateChange:this._onInteractiveStateChange,eventManager:t})),this._transitionManager=new g.b(this.props)}},{key:"componentWillUpdate",value:function(t){this.props.mapStyle!==t.mapStyle&&this._updateQueryParams(t.mapStyle);var e=Object.assign({},t,t.viewState);this._mapControls.setOptions(e),this._transitionManager.processViewportChange(e)}},{key:"getMap",value:function(){return this._map?this._map.getMap():null}},{key:"queryRenderedFeatures",value:function(t,e){return this._map.queryRenderedFeatures(t,e)}},{key:"_getFeatures",value:function(t){var e,n=t.pos,r=t.radius;if(r){var i=r,o=[[n[0]-i,n[1]+i],[n[0]+i,n[1]-i]];e=this._map.queryRenderedFeatures(o,this._queryParams)}else e=this._map.queryRenderedFeatures(n,this._queryParams);return e}},{key:"_updateQueryParams",value:function(t){var e=Object(_.a)(t);this._queryParams={layers:e}}},{key:"_onInteractiveStateChange",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.state.isDragging&&this.setState({isDragging:n})}},{key:"_getPos",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"_onMouseMove",value:function(t){if(!this.state.isDragging){var e=this._getPos(t),n=this._getFeatures({pos:e,radius:this.props.clickRadius}),r=n&&0<n.length;if(r!==this.state.isHovering&&this.setState({isHovering:r}),this.props.onHover){var i=new v.a(this.props);t.lngLat=i.unproject(e),t.features=n,this.props.onHover(t)}}}},{key:"_onMouseClick",value:function(t){if(this.props.onClick){var e=this._getPos(t),n=new v.a(this.props);t.lngLat=n.unproject(e),t.features=this._getFeatures({pos:e,radius:this.props.clickRadius}),this.props.onClick(t)}}},{key:"_onContextMenu",value:function(t){this.props.onContextMenu&&this.props.onContextMenu(t)}},{key:"_eventCanvasLoaded",value:function(t){this._eventManager.setElement(t)}},{key:"_staticMapLoaded",value:function(t){this._map=t}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.getCursor,i={width:e,height:n,position:"relative",cursor:r(this.state)};return Object(h.createElement)("div",{key:"map-controls",ref:this._eventCanvasLoaded,style:i},Object(h.createElement)(y.a,Object.assign({},this.props,this._transitionManager&&this._transitionManager.getViewportInTransition(),{ref:this._staticMapLoaded,children:this.props.children})))}}]),e}(h.PureComponent);P.displayName="InteractiveMap",P.propTypes=S,P.defaultProps=T,P.childContextTypes=C},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function s(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){}n.d(e,"a",function(){return C});var f=n(0),d=(n.n(f),n(1)),y=n.n(d),m=n(50),v=n(51),g=n(7),_=n(209),b=n(210),x=n(212),w=b.a?n(213):null,E="A valid API access token is required to use Mapbox data",S=Object.assign({},_.a.propTypes,{mapStyle:y.a.oneOfType([y.a.string,y.a.object]),preventStyleDiffing:y.a.bool,disableTokenWarning:y.a.bool,visible:y.a.bool,visibilityConstraints:y.a.object}),k=Object.assign({},_.a.defaultProps,{mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0}),T={viewport:y.a.instanceOf(g.a)},C=function(t){function e(t){var n;return o(this,e),n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._queryParams={},e.supported()||(n.componentDidMount=h,n.componentWillReceiveProps=h,n.componentDidUpdate=h,n.componentWillUnmount=h),n.state={accessTokenInvalid:!1},n.getMap=n.getMap.bind(p(n)),n.queryRenderedFeatures=n.queryRenderedFeatures.bind(p(n)),n._updateMapSize=n._updateMapSize.bind(p(n)),n._updateMapStyle=n._updateMapStyle.bind(p(n)),n._mapboxMapLoaded=n._mapboxMapLoaded.bind(p(n)),n._mapboxMapError=n._mapboxMapError.bind(p(n)),n._renderNoTokenWarning=n._renderNoTokenWarning.bind(p(n)),n}return l(e,t),u(e,null,[{key:"supported",value:function(){return w&&w.supported()}}]),u(e,[{key:"getChildContext",value:function(){return{viewport:new g.a(this.props)}}},{key:"componentDidMount",value:function(){var t=this.props.mapStyle;this._mapbox=new _.a(Object.assign({},this.props,{mapboxgl:w,container:this._mapboxMap,onError:this._mapboxMapError,mapStyle:Object(v.a)(t)?t.toJS():t})),this._map=this._mapbox.getMap()}},{key:"componentWillReceiveProps",value:function(t){this._mapbox.setProps(t),this._updateMapStyle(this.props,t),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._mapbox.finalize(),this._mapbox=null,this._map=null}},{key:"getMap",value:function(){return this._map}},{key:"queryRenderedFeatures",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this._map.queryRenderedFeatures(t,e)}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapStyle",value:function(t,e){var n=e.mapStyle,r=t.mapStyle;n!==r&&(Object(v.a)(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):Object(m.b)(r,n,this._map):this._map.setStyle(n))}},{key:"_mapboxMapLoaded",value:function(t){this._mapboxMap=t}},{key:"_mapboxMapError",value:function(t){401!==(t.error&&t.error.status||t.status)||this.state.accessTokenInvalid||(console.error(E),this.setState({accessTokenInvalid:!0}))}},{key:"_renderNoTokenWarning",value:function(){return this.state.accessTokenInvalid&&!this.props.disableTokenWarning?Object(f.createElement)("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},[Object(f.createElement)("h3",{key:"header"},E),Object(f.createElement)("div",{key:"text"},"For information on setting up your basemap, read"),Object(f.createElement)("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens")]):null}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.width,r=t.height,i=t.style,o=t.visibilityConstraints,a=Object.assign({},i,{width:n,height:r,position:"relative"}),s=this.props.visible&&Object(x.a)(this.props.viewState||this.props,o),u=Object.assign({},i,{width:n,height:r,visibility:s?"visible":"hidden"});return Object(f.createElement)("div",{key:"map-container",style:a,children:[Object(f.createElement)("div",{key:"map-mapbox",ref:this._mapboxMapLoaded,style:u,className:e}),Object(f.createElement)("div",{key:"map-overlays",className:"overlays",style:{position:"absolute",left:0,top:0,width:n,height:r,overflow:"hidden"},children:this.props.children}),this._renderNoTokenWarning()]})}}]),e}(f.PureComponent);C.displayName="StaticMap",C.propTypes=S,C.defaultProps=k,C.childContextTypes=T},function(t,e,n){"use strict";function r(t){var e=null;return Object(u.a)(t)&&t.has("layers")?e=t.get("layers").filter(function(t){return t.get("interactive")}).map(function(t){return t.get("id")}).toJS():Array.isArray(t.layers)&&(e=t.layers.filter(function(t){return t.interactive}).map(function(t){return t.id})),e}function i(t,e,n){function r(t){return t.map(function(){return!0}).delete("layers").delete("sources").toJS()}var i=t&&r(t)||{},o=r(e);if(!t||function(){var n=Object.keys(i),r=Object.keys(o);return n.length!==r.length||!!r.some(function(n){return t.get(n)!==e.get(n)})}())return void n.setStyle(e.toJS());var u=Object(l.a)(t,e),c=u.sourcesDiff,p=u.layersDiff;s(c.exit,e.get("layers")),a(n,e,c,p)}function o(t,e){var n=e.source.toJS();if("geojson"===n.type){var r=t.getSource(e.id);if("geojson"===r.type){var i=r.workerOptions,o=i.geojsonVtOptions.extent/512;if((void 0===n.maxzoom||n.maxzoom===i.geojsonVtOptions.maxZoom)&&(void 0===n.buffer||n.buffer===i.geojsonVtOptions.buffer/o)&&(void 0===n.tolerance||n.tolerance===i.geojsonVtOptions.tolerance/o)&&(void 0===n.cluster||n.cluster===i.cluster)&&(void 0===n.clusterRadius||n.clusterRadius===i.superclusterOptions.radius/o)&&(void 0===n.clusterMaxZoom||n.clusterMaxZoom===i.superclusterOptions.maxZoom))return void r.setData(n.data)}}t.removeSource(e.id),t.addSource(e.id,n)}function a(t,e,n,r){if(r.updates.some(function(t){return t.layer.get("ref")}))return void t.setStyle(e.toJS());var i=!0,a=!1,s=void 0;try{for(var u,l,c=n.enter[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)l=u.value,t.addSource(l.id,l.source.toJS())}catch(t){a=!0,s=t}finally{try{i||null==c.return||c.return()}finally{if(a)throw s}}var p=!0,h=!1,f=void 0;try{for(var d,y,m=n.update[Symbol.iterator]();!(p=(d=m.next()).done);p=!0)y=d.value,o(t,y)}catch(t){h=!0,f=t}finally{try{p||null==m.return||m.return()}finally{if(h)throw f}}var v=!0,g=!1,_=void 0;try{for(var b,x,w=r.exiting[Symbol.iterator]();!(v=(b=w.next()).done);v=!0)x=b.value,t.style.getLayer(x.id)&&t.removeLayer(x.id)}catch(t){g=!0,_=t}finally{try{v||null==w.return||w.return()}finally{if(g)throw _}}var E=!0,S=!1,k=void 0;try{for(var T,C,P=r.updates[Symbol.iterator]();!(E=(T=P.next()).done);E=!0)C=T.value,C.enter||t.removeLayer(C.id),t.addLayer(C.layer.toJS(),C.before)}catch(t){S=!0,k=t}finally{try{E||null==P.return||P.return()}finally{if(S)throw k}}var M=!0,I=!1,A=void 0;try{for(var O,z,R=n.exit[Symbol.iterator]();!(M=(O=R.next()).done);M=!0)z=O.value,t.removeSource(z.id)}catch(t){I=!0,A=t}finally{try{M||null==R.return||R.return()}finally{if(I)throw A}}}function s(t,e){var n=t.map(function(t){return t.id}),r=e.filter(function(t){return n.includes(t.get("source"))});if(r.size)throw new Error("You must remove any layers associated with sources you are removing: ".concat(r.map(function(t){return t.get("id")}).toJS().join("")))}e.a=r,e.b=i;var u=n(51),l=n(157)},function(t,e,n){"use strict";function r(t){return!(!t||!t[i])}e.a=r;var i="@@__IMMUTABLE_MAP__@@"},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return y});var p=n(23),h=n(3),f=n(159),d=n.n(f),y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r),t}return c(e,t),s(e,[{key:"cross",value:function(t){return d()(this,this,t),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(h.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(h.a)(t)}}]),e}(p.a)},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}t.exports=n},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return f});var p=n(23),h=n(3),f=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"applyMatrix4",value:function(t){return t.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(h.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(h.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(h.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(h.a)(t)}}]),e}(p.a)},function(t,e){function n(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],y=e[13],m=e[14],v=e[15],g=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*y-p*d,k=c*m-h*d,T=c*v-f*d,C=p*m-h*y,P=p*v-f*y,M=h*v-f*m,I=g*M-_*P+b*C+x*T-w*k+E*S;return I?(I=1/I,t[0]=(s*M-u*P+l*C)*I,t[1]=(i*P-r*M-o*C)*I,t[2]=(y*E-m*w+v*x)*I,t[3]=(h*w-p*E-f*x)*I,t[4]=(u*T-a*M-l*k)*I,t[5]=(n*M-i*T+o*k)*I,t[6]=(m*b-d*E-v*_)*I,t[7]=(c*E-h*b+f*_)*I,t[8]=(a*P-s*T+l*S)*I,t[9]=(r*T-n*P-o*S)*I,t[10]=(d*w-y*b+v*g)*I,t[11]=(p*b-c*w-f*g)*I,t[12]=(s*k-a*C-u*S)*I,t[13]=(n*C-r*k+i*S)*I,t[14]=(y*_-d*x-m*g)*I,t[15]=(c*x-p*_+h*g)*I,t):null}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],y=e[12],m=e[13],v=e[14],g=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*p+w*y,t[1]=_*i+b*u+x*h+w*m,t[2]=_*o+b*l+x*f+w*v,t[3]=_*a+b*c+x*d+w*g,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*p+w*y,t[5]=_*i+b*u+x*h+w*m,t[6]=_*o+b*l+x*f+w*v,t[7]=_*a+b*c+x*d+w*g,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*p+w*y,t[9]=_*i+b*u+x*h+w*m,t[10]=_*o+b*l+x*f+w*v,t[11]=_*a+b*c+x*d+w*g,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*p+w*y,t[13]=_*i+b*u+x*h+w*m,t[14]=_*o+b*l+x*f+w*v,t[15]=_*a+b*c+x*d+w*g,t}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+p*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=p*i-s*r,t[11]=h*i-u*r,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+p*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=p*i-s*r,t[7]=h*i-u*r,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}n.d(e,"a",function(){return tt});var p=n(15),h=n(3),f=n(176),d=n.n(f),y=n(177),m=n.n(y),v=n(178),g=n.n(v),_=n(180),b=n.n(_),x=n(182),w=n.n(x),E=n(184),S=n.n(E),k=n(186),T=n.n(k),C=n(188),P=n.n(C),M=n(189),I=n.n(M),A=n(190),O=n.n(A),z=n(191),R=n.n(z),L=n(193),D=n.n(L),j=n(65),B=n.n(j),F=n(194),N=n.n(F),V=n(195),U=n.n(V),q=n(196),Z=n.n(q),$=n(197),W=n.n($),H=n(198),G=n.n(H),X=n(66),Y=n.n(X),K=n(200),J=n.n(K),Q=[0,0,0,1],tt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,i,a),t}return c(e,t),s(e,[{key:"fromMatrix3",value:function(t){return d()(this,t),this.check()}},{key:"fromValues",value:function(t,e,n,r){return this.set(t,e,n,r)}},{key:"identity",value:function(){return m()(this),this.check()}},{key:"length",value:function(){return g()(this)}},{key:"squaredLength",value:function(t){return b()(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return w()(this,t)}},{key:"rotationTo",value:function(t,e){return S()(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return T()(this,t),this.check()}},{key:"calculateW",value:function(){return P()(this,this),this.check()}},{key:"conjugate",value:function(){return I()(this,this),this.check()}},{key:"invert",value:function(){return O()(this,this),this.check()}},{key:"lerp",value:function(t,e,n){return R()(this,t,e,n),this.check()}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return D()(this,this,e),this.check()}},{key:"normalize",value:function(){return B()(this,this),this.check()}},{key:"rotateX",value:function(t){return N()(this,this,t),this.check()}},{key:"rotateY",value:function(t){return U()(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return Z()(this,this,t),this.check()}},{key:"scale",value:function(t){return W()(this,this,t),this.check()}},{key:"set",value:function(t,e,n,r){return G()(this,t,e,n,r),this.check()}},{key:"setAxisAngle",value:function(t,e){return Y()(this,t,e),this.check()}},{key:"slerp",value:function(t){var e=t.start,n=void 0===e?Q:e,r=t.target,i=t.ratio;return J()(this,n,r,i),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(h.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(h.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(h.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=Object(h.a)(t)}}]),e}(p.a)},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}t.exports=n},function(t,e,n){t.exports=n(185)},function(t,e){function n(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function p(t){return t>=0&&t<6}function h(t){if(t<0&&t>=6)throw new Error(g);return t}n.d(e,"a",function(){return _});var f=n(15),d=n(3),y=n(24),m=n(63),v=n(9),g="Unknown Euler angle order",_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;if(o(this,e),t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),arguments.length>0&&Array.isArray(arguments[0])){var u;(u=t).fromVector3.apply(u,arguments)}else t.set(n,r,i,s);return t}return c(e,t),l(e,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return e.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return e.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),l(e,[{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check()}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check()}},{key:"validate",value:function(){return p(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new v.a(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}},{key:"fromRollPitchYaw",value:function(t,n,r){return this.set(t,n,r,e.ZYX)}},{key:"fromQuaternion",value:function(t,e){return this._fromRotationMatrix(y.a.fromQuaternion(t),e),this.check()}},{key:"fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder;return this._fromRotationMatrix(t,n),this.check()}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.a;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new m.a;switch(this[4]){case e.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case e.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case e.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case e.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case e.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case e.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(g)}}},{key:"_fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],p=r[6],h=r[10];switch(n=n||this[3]){case e.XYZ:this[1]=Math.asin(Object(d.b)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-l,h),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(p,u),this[2]=0);break;case e.YXZ:this[0]=Math.asin(-Object(d.b)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(a,h),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case e.ZXY:this[0]=Math.asin(Object(d.b)(p,-1,1)),Math.abs(p)<.99999?(this[1]=Math.atan2(-c,h),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case e.ZYX:this[1]=Math.asin(-Object(d.b)(c,-1,1)),Math.abs(c)<.99999?(this[0]=Math.atan2(p,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case e.YZX:this[2]=Math.asin(Object(d.b)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-l,u),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(a,h));break;case e.XZY:this[2]=Math.asin(-Object(d.b)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(p,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-l,h),this[1]=0);break;default:throw new Error(g)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var t=new y.a,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),l=Math.sin(r),c=Math.sin(i);switch(this[3]){case e.XYZ:var p=o*s,h=o*c,f=u*s,d=u*c;t[0]=a*s,t[4]=-a*c,t[8]=l,t[1]=h+f*l,t[5]=p-d*l,t[9]=-u*a,t[2]=d-p*l,t[6]=f+h*l,t[10]=o*a;break;case e.YXZ:var m=a*s,v=a*c,_=l*s,b=l*c;t[0]=m+b*u,t[4]=_*u-v,t[8]=o*l,t[1]=o*c,t[5]=o*s,t[9]=-u,t[2]=v*u-_,t[6]=b+m*u,t[10]=o*a;break;case e.ZXY:var x=a*s,w=a*c,E=l*s,S=l*c;t[0]=x-S*u,t[4]=-o*c,t[8]=E+w*u,t[1]=w+E*u,t[5]=o*s,t[9]=S-x*u,t[2]=-o*l,t[6]=u,t[10]=o*a;break;case e.ZYX:var k=o*s,T=o*c,C=u*s,P=u*c;t[0]=a*s,t[4]=C*l-T,t[8]=k*l+P,t[1]=a*c,t[5]=P*l+k,t[9]=T*l-C,t[2]=-l,t[6]=u*a,t[10]=o*a;break;case e.YZX:var M=o*a,I=o*l,A=u*a,O=u*l;t[0]=a*s,t[4]=O-M*c,t[8]=A*c+I,t[1]=c,t[5]=o*s,t[9]=-u*s,t[2]=-l*s,t[6]=I*c+A,t[10]=M-O*c;break;case e.XZY:var z=o*a,R=o*l,L=u*a,D=u*l;t[0]=a*s,t[4]=-c,t[8]=l*s,t[1]=z*c+D,t[5]=o*s,t[9]=R*c-L,t[2]=L*c-R,t[6]=u*s,t[10]=D*c+z;break;default:throw new Error(g)}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"roll",get:function(){return this[0]},set:function(t){return this[0]=Object(d.a)(t)}},{key:"pitch",get:function(){return this[1]},set:function(t){return this[1]=Object(d.a)(t)}},{key:"yaw",get:function(){return this[2]},set:function(t){return this[2]=Object(d.a)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=h(t)}}]),e}(f.a)},function(t,e,n){"use strict";function r(t){if(!t)throw new Error("viewport-mercator-project: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t){var e=Math.abs,n=Number.isFinite,i=t.width,o=t.height,a=t.bounds,s=t.padding,c=void 0===s?0:s,p=t.offset,h=void 0===p?[0,0]:p,f=r(a,2),d=r(f[0],2),y=d[0],m=d[1],v=r(f[1],2),g=v[0],_=v[1];if(n(c)){var b=c;c={top:b,bottom:b,left:b,right:b}}else Object(l.a)(n(c.top)&&n(c.bottom)&&n(c.left)&&n(c.right));var x=new u.a({width:i,height:o,longitude:0,latitude:0,zoom:0}),w=x.project([y,_]),E=x.project([g,m]),S=[e(E[0]-w[0]),e(E[1]-w[1])],k=[i-c.left-c.right-2*e(h[0]),o-c.top-c.bottom-2*e(h[1])];Object(l.a)(0<k[0]&&0<k[1]);var T=k[0]/S[0],C=k[1]/S[1],P=(c.right-c.left)/2/T,M=(c.bottom-c.top)/2/C,I=[(E[0]+w[0])/2+P,(E[1]+w[1])/2+M],A=x.unproject(I),O=x.zoom+Math.log2(e(Math.min(T,C)));return{longitude:A[0],latitude:A[1],zoom:O}}e.a=s;var u=n(8),l=n(69)},function(t,e,n){"use strict";function r(t,e,n){return Array.isArray(t)?t.map(function(t,i){return r(t,e[i],n)}):n*e+(1-n)*t}function i(t){return Number.isFinite(t)||Array.isArray(t)}function o(t){return s[t]}function a(t,e,n){return o(t)&&180<Math.abs(n-e)&&(n=0>n?n+360:n-360),n}e.c=r,e.b=i,e.a=a;var s={longitude:1,bearing:1}},function(t,e,n){"use strict";function r(t){var e={},n=function(){return e};return e.get=function(){return null},e.set=n,e.on=n,e.off=n,e.destroy=n,e.emit=n,e}n.d(e,"a",function(){return s});var i=n(73),o=(n.n(i),n(220)),a=void 0;i.isBrowser&&(a=n(221)),a&&(Object(o.b)(a.PointerEventInput),Object(o.a)(a.MouseInput));var s=a?a.Manager:r;e.b=a},function(t,e,n){(function(e){var r=n(218).default,i="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"";t.exports={window:"undefined"!==typeof window?window:e,global:"undefined"!==typeof e?e:window,document:"undefined"!==typeof document?document:{},isBrowser:r,userAgent:i}}).call(e,n(4))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){return s(t)||a(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"a",function(){return v});var p=n(11),h=n(27),f=n(17),d={transitionDuration:0},y={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new h.a,transitionInterruption:f.a.BREAK},m={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},v=function(){function t(){u(this,t),this._state={isDragging:!1},this.events=[],this.handleEvent=this.handleEvent.bind(this)}var e=Math.abs;return c(t,[{key:"handleEvent",value:function(t){switch(this.mapState=this.getMapState(),t.type){case"panstart":return this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"setState",value:function(t){Object.assign(this._state,t),this.onStateChange&&this.onStateChange(this._state)}},{key:"updateViewport",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},t.getViewportProps(),e),o=Object.keys(i).some(function(t){return r[t]!==i[t]});o&&this.onViewStateChange&&this.onViewStateChange({viewState:i}),o&&this.onViewportChange&&this.onViewportChange(i),this.setState(Object.assign({},t.getInteractiveState(),n))}},{key:"getMapState",value:function(t){return new p.b(Object.assign({},this.mapStateProps,this._state,t))}},{key:"setOptions",value:function(t){var e=t.onChangeViewport,n=t.touchZoomRotate,r=void 0===n||n,i=t.onViewStateChange,o=t.onViewportChange,a=t.onStateChange,s=void 0===a?this.onStateChange:a,u=t.eventManager,l=void 0===u?this.eventManager:u,c=t.scrollZoom,h=void 0===c||c,f=t.dragPan,d=void 0===f||f,y=t.dragRotate,v=void 0===y||y,g=t.doubleClickZoom,_=void 0===g||g,b=t.touchZoom,x=t.touchRotate,w=t.keyboard,E=void 0===w||w;this.onViewStateChange=i,this.onViewportChange=o||e,this.onStateChange=s,this.mapStateProps&&this.mapStateProps.height!==t.height&&this.updateViewport(new p.b(t)),this.mapStateProps=t,this.eventManager!==l&&(this.eventManager=l,this._events={},this.toggleEvents(this.events,!0));var S=!(!this.onViewStateChange&&!this.onViewportChange);this.toggleEvents(m.WHEEL,S&&h),this.toggleEvents(m.PAN,S&&(d||v)),this.toggleEvents(m.PINCH,S&&r),this.toggleEvents(m.DOUBLE_TAP,S&&_),this.toggleEvents(m.KEYBOARD,S&&E),this.scrollZoom=h,this.dragPan=d,this.dragRotate=v,this.doubleClickZoom=_,this.touchZoom=r&&(void 0===b||b),this.touchRotate=r&&void 0!==x&&x,this.keyboard=E}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPan",value:function(t){return this.isFunctionKeyPressed(t)||t.rightButton?this._onPanRotate(t):this._onPanMove(t)}},{key:"_onPanEnd",value:function(){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1})}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var n=t.deltaX,r=t.deltaY,o=this.getCenter(t),a=i(o,2),s=a[1],u=s-r,l=this.mapState.getViewportProps(),c=l.width,p=l.height,h=0;0<r?e(p-u)>5&&(h=r/(u-p)*1.2):0>r&&u>5&&(h=1-s/u),h=Math.min(1,Math.max(-1,h));var f=this.mapState.rotate({deltaScaleX:n/c,deltaScaleY:h});return this.updateViewport(f,d,{isDragging:!0})}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();var n=this.getCenter(t),r=t.delta,i=2/(1+Math.exp(-e(.01*r)));0>r&&0!==i&&(i=1/i);var o=this.mapState.zoom({pos:n,scale:i});return this.updateViewport(o,d)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,d,{isDragging:!0})}},{key:"_onPinch",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,o=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-o)/180})}return this.updateViewport(e,d,{isDragging:!0})}},{key:"_onPinchEnd",value:function(){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1})}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,y)}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:r.zoom-2}):this.getMapState({zoom:r.zoom-1});break;case 187:e=n?this.getMapState({zoom:r.zoom+2}):this.getMapState({zoom:r.zoom+1});break;case 37:e=n?this.getMapState({bearing:r.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:r.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:r.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:r.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,y)}}]),t}()},function(t,e,n){"use strict";function r(t){return"react-map-gl: `".concat(t,"` is deprecated and will be removed in a later version.")}function i(t){return"Use `".concat(t,"` instead.")}function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a.forEach(function(e){if(t.hasOwnProperty(e.old)){var n=r(e.old);e.new&&(n="".concat(n," ").concat(i(e.new))),console.warn(n)}})}e.a=o;var a=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"}]},function(t,e,n){n(77),t.exports=n(82)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(78).enable(),window.Promise=n(80)),n(81),Object.assign=n(19)},function(t,e,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function i(t){function e(e){(t.allRejections||a(p[e].error,t.whitelist||u))&&(p[e].displayId=c++,t.onUnhandled?(p[e].logged=!0,t.onUnhandled(p[e].displayId,p[e].error)):(p[e].logged=!0,o(p[e].displayId,p[e].error)))}function n(e){p[e].logged&&(t.onHandled?t.onHandled(p[e].displayId,p[e].error):p[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+p[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+p[e].displayId+".")))}t=t||{},l&&r(),l=!0;var i=0,c=0,p={};s._47=function(t){2===t._83&&p[t._56]&&(p[t._56].logged?n(t._56):clearTimeout(p[t._56].timeout),delete p[t._56])},s._71=function(t,n){0===t._75&&(t._56=i++,p[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(29),u=[ReferenceError,TypeError,RangeError],l=!1;e.disable=r,e.enable=i},function(t,e,n){"use strict";(function(e){function n(t){a.length||(o(),s=!0),a[a.length]=t}function r(){for(;u<a.length;){var t=u;if(u+=1,a[t].call(),u>l){for(var e=0,n=a.length-u;e<n;e++)a[e]=a[e+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var o,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof e?e:self,p=c.MutationObserver||c.WebKitMutationObserver;o="function"===typeof p?function(t){var e=1,n=new p(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(e,n(4))},function(t,e,n){"use strict";function r(t){var e=new i(i._44);return e._83=1,e._18=t,e}var i=n(29);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return a;if(0===t)return l;if(""===t)return c;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(t){r(a,t)},n)}}e[a]=s,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function l(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(v.arrayBuffer&&v.blob&&_(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(t instanceof f){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(v.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},p.call(f.prototype),p.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];m.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=f,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){var i=new f(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&v.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(84),a=n.n(o),s=n(20),u=n(13),l=n(117),c=n.n(l),p=n(129),h=n(238),f=Object(u.a)(c.a)(u.d);a.a.render(i.a.createElement(s.a,{store:f(h.a)},i.a.createElement(p.a,null)),document.querySelector(".container"))},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);g(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||A}function o(){}function a(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||A}function s(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)R.call(e,r)&&!L.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:w,type:t,key:o,ref:a,props:i,_owner:z.current}}function u(t){return"object"===typeof t&&null!==t&&t.$$typeof===w}function l(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function c(t,e,n,r){if(j.length){var i=j.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function p(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>j.length&&j.push(t)}function h(t,e,n,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case w:case E:a=!0}}if(a)return n(i,t,""===e?"."+f(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var s=0;s<t.length;s++){o=t[s];var u=e+f(o,s);a+=h(o,u,n,i)}else if(null===t||"undefined"===typeof t?u=null:(u=I&&t[I]||t["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=e+f(o,s++),a+=h(o,u,n,i);else"object"===o&&(n=""+t,r("31","[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return a}function f(t,e){return"object"===typeof t&&null!==t&&null!=t.key?l(t.key):e.toString(36)}function d(t,e){t.func.call(t.context,e,t.count++)}function y(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?m(t,r,n,b.thatReturnsArgument):null!=t&&(u(t)&&(e=i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(D,"$&/")+"/")+n,t={$$typeof:w,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),r.push(t))}function m(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(D,"$&/")+"/"),e=c(e,o,r,i),null==t||h(t,"",y,e),p(e)}var v=n(19),g=n(30),_=n(31),b=n(32),x="function"===typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,E=x?Symbol.for("react.portal"):60106,S=x?Symbol.for("react.fragment"):60107,k=x?Symbol.for("react.strict_mode"):60108,T=x?Symbol.for("react.provider"):60109,C=x?Symbol.for("react.context"):60110,P=x?Symbol.for("react.async_mode"):60111,M=x?Symbol.for("react.forward_ref"):60112,I="function"===typeof Symbol&&Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&r("85"),this.updater.enqueueSetState(this,t,e,"setState")},i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},o.prototype=i.prototype;var O=a.prototype=new o;O.constructor=a,v(O,i.prototype),O.isPureReactComponent=!0;var z={current:null},R=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0},D=/\/+/g,j=[],B={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return m(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;e=c(null,null,e,n),null==t||h(t,"",d,e),p(e)},count:function(t){return null==t?0:h(t,"",b.thatReturnsNull,null)},toArray:function(t){var e=[];return m(t,e,null,b.thatReturnsArgument),e},only:function(t){return u(t)||r("143"),t}},createRef:function(){return{current:null}},Component:i,PureComponent:a,createContext:function(t,e){return void 0===e&&(e=null),t={$$typeof:C,_calculateChangedBits:e,_defaultValue:t,_currentValue:t,_changedBits:0,Provider:null,Consumer:null},t.Provider={$$typeof:T,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:M,render:t}},Fragment:S,StrictMode:k,unstable_AsyncMode:P,createElement:s,cloneElement:function(t,e,n){(null===t||void 0===t)&&r("267",t);var i=void 0,o=v({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(s=e.ref,u=z.current),void 0!==e.key&&(a=""+e.key);var l=void 0;t.type&&t.type.defaultProps&&(l=t.type.defaultProps);for(i in e)R.call(e,i)&&!L.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==l?l[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var c=0;c<i;c++)l[c]=arguments[c+2];o.children=l}return{$$typeof:w,type:t.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(t){var e=s.bind(null,t);return e.type=t,e},isValidElement:u,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:z,assign:v}},F=Object.freeze({default:B}),N=F&&B||F;t.exports=N.default?N.default:N},function(t,e,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}r(),t.exports=n(85)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);ln(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function i(t,e,n,r,i,o,a,s,u){this._hasCaughtError=!1,this._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this._caughtError=t,this._hasCaughtError=!0}}function o(){if(gn._hasRethrowError){var t=gn._rethrowError;throw gn._rethrowError=null,gn._hasRethrowError=!1,t}}function a(){if(_n)for(var t in bn){var e=bn[t],n=_n.indexOf(t);if(-1<n||r("96",t),!xn[n]){e.extractEvents||r("97",t),xn[n]=e,n=e.eventTypes;for(var i in n){var o=void 0,a=n[i],u=e,l=i;wn.hasOwnProperty(l)&&r("99",l),wn[l]=a;var c=a.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&s(c[o],u,l);o=!0}else a.registrationName?(s(a.registrationName,u,l),o=!0):o=!1;o||r("98",i,t)}}}}function s(t,e,n){En[t]&&r("100",t),En[t]=e,Sn[t]=e.eventTypes[n].dependencies}function u(t){_n&&r("101"),_n=Array.prototype.slice.call(t),a()}function l(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var i=t[e];bn.hasOwnProperty(e)&&bn[e]===i||(bn[e]&&r("102",e),bn[e]=i,n=!0)}n&&a()}function c(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=Pn(r),gn.invokeGuardedCallbackAndCatchFirstError(e,n,void 0,t),t.currentTarget=null}function p(t,e){return null==e&&r("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function h(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}function f(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)c(t,e,n[i],r[i]);else n&&c(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function d(t){return f(t,!0)}function y(t){return f(t,!1)}function m(t,e){var n=t.stateNode;if(!n)return null;var i=Tn(n);if(!i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(t=t.type,i=!("button"===t||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&r("231",e,typeof n),n)}function v(t,e){null!==t&&(Mn=p(Mn,t)),t=Mn,Mn=null,t&&(e?h(t,d):h(t,y),Mn&&r("95"),gn.rethrowCaughtError())}function g(t,e,n,r){for(var i=null,o=0;o<xn.length;o++){var a=xn[o];a&&(a=a.extractEvents(t,e,n,r))&&(i=p(i,a))}v(i,!1)}function _(t){if(t[zn])return t[zn];for(;!t[zn];){if(!t.parentNode)return null;t=t.parentNode}return t=t[zn],5===t.tag||6===t.tag?t:null}function b(t){if(5===t.tag||6===t.tag)return t.stateNode;r("33")}function x(t){return t[Rn]||null}function w(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function E(t,e,n){for(var r=[];t;)r.push(t),t=w(t);for(t=r.length;0<t--;)e(r[t],"captured",n);for(t=0;t<r.length;t++)e(r[t],"bubbled",n)}function S(t,e,n){(e=m(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=p(n._dispatchListeners,e),n._dispatchInstances=p(n._dispatchInstances,t))}function k(t){t&&t.dispatchConfig.phasedRegistrationNames&&E(t._targetInst,S,t)}function T(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst;e=e?w(e):null,E(e,S,t)}}function C(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=m(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=p(n._dispatchListeners,e),n._dispatchInstances=p(n._dispatchInstances,t))}function P(t){t&&t.dispatchConfig.registrationName&&C(t._targetInst,null,t)}function M(t){h(t,k)}function I(t,e,n,r){if(n&&r)t:{for(var i=n,o=r,a=0,s=i;s;s=w(s))a++;s=0;for(var u=o;u;u=w(u))s++;for(;0<a-s;)i=w(i),a--;for(;0<s-a;)o=w(o),s--;for(;a--;){if(i===o||i===o.alternate)break t;i=w(i),o=w(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=w(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=w(r);for(r=0;r<i.length;r++)C(i[r],"bubbled",t);for(t=n.length;0<t--;)C(n[t],"captured",e)}function A(){return!jn&&pn.canUseDOM&&(jn="textContent"in document.documentElement?"textContent":"innerText"),jn}function O(){if(Bn._fallbackText)return Bn._fallbackText;var t,e,n=Bn._startText,r=n.length,i=z(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Bn._fallbackText=i.slice(t,1<e?1-e:void 0),Bn._fallbackText}function z(){return"value"in Bn._root?Bn._root.value:Bn._root[A()]}function R(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface;for(var i in t)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?fn.thatReturnsTrue:fn.thatReturnsFalse,this.isPropagationStopped=fn.thatReturnsFalse,this}function L(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function D(t){t instanceof this||r("223"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function j(t){t.eventPool=[],t.getPooled=L,t.release=D}function B(t,e){switch(t){case"topKeyUp":return-1!==qn.indexOf(e.keyCode);case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function F(t){return t=t.detail,"object"===typeof t&&"data"in t?t.data:null}function N(t,e){switch(t){case"topCompositionEnd":return F(e);case"topKeyPress":return 32!==e.which?null:(Yn=!0,Gn);case"topTextInput":return t=e.data,t===Gn&&Yn?null:t;default:return null}}function V(t,e){if(Kn)return"topCompositionEnd"===t||!Zn&&B(t,e)?(t=O(),Bn._root=null,Bn._startText=null,Bn._fallbackText=null,Kn=!1,t):null;switch(t){case"topPaste":return null;case"topKeyPress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"topCompositionEnd":return Hn?null:e.data;default:return null}}function U(t){if(t=Cn(t)){Qn&&"function"===typeof Qn.restoreControlledState||r("194");var e=Tn(t.stateNode);Qn.restoreControlledState(t.stateNode,t.type,e)}}function q(t){er?nr?nr.push(t):nr=[t]:er=t}function Z(){return null!==er||null!==nr}function $(){if(er){var t=er,e=nr;if(nr=er=null,U(t),e)for(t=0;t<e.length;t++)U(e[t])}}function W(t,e){return t(e)}function H(t,e,n){return t(e,n)}function G(){}function X(t,e){if(ir)return t(e);ir=!0;try{return W(t,e)}finally{ir=!1,Z()&&(G(),$())}}function Y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!or[t.type]:"textarea"===e}function K(t){return t=t.target||window,t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function J(t,e){return!(!pn.canUseDOM||e&&!("addEventListener"in document))&&(t="on"+t,e=t in document,e||(e=document.createElement("div"),e.setAttribute(t,"return;"),e="function"===typeof e[t]),e)}function Q(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function tt(t){var e=Q(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.get.call(this)},set:function(t){r=""+t,n.set.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}function et(t){t._valueTracker||(t._valueTracker=tt(t))}function nt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Q(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function rt(t){return null===t||"undefined"===typeof t?null:(t=gr&&t[gr]||t["@@iterator"],"function"===typeof t?t:null)}function it(t){if("function"===typeof(t=t.type))return t.displayName||t.name;if("string"===typeof t)return t;switch(t){case hr:return"ReactFragment";case pr:return"ReactPortal";case lr:return"ReactCall";case cr:return"ReactReturn"}if("object"===typeof t&&null!==t)switch(t.$$typeof){case vr:return t=t.render.displayName||t.render.name||"",""!==t?"ForwardRef("+t+")":"ForwardRef"}return null}function ot(t){var e="";do{t:switch(t.tag){case 0:case 1:case 2:case 5:var n=t._debugOwner,r=t._debugSource,i=it(t),o=null;n&&(o=it(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break t;default:i=""}e+=i,t=t.return}while(t);return e}function at(t){return!!xr.hasOwnProperty(t)||!br.hasOwnProperty(t)&&(_r.test(t)?xr[t]=!0:(br[t]=!0,!1))}function st(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}function ut(t,e,n,r){if(null===e||"undefined"===typeof e||st(t,e,n,r))return!0;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}function ct(t){return t[1].toUpperCase()}function pt(t,e,n,r){var i=wr.hasOwnProperty(e)?wr[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(ut(e,n,i,r)&&(n=null),r||null===i?at(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ht(t,e){var n=e.checked;return hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function ft(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=gt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function dt(t,e){null!=(e=e.checked)&&pt(t,"checked",e,!1)}function yt(t,e){dt(t,e);var n=gt(e.value);null!=n&&("number"===e.type?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n)),e.hasOwnProperty("value")?vt(t,e.type,n):e.hasOwnProperty("defaultValue")&&vt(t,e.type,gt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function mt(t,e){(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue"))&&(""===t.value&&(t.value=""+t._wrapperState.initialValue),t.defaultValue=""+t._wrapperState.initialValue),e=t.name,""!==e&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!t.defaultChecked,""!==e&&(t.name=e)}function vt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function gt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function _t(t,e,n){return t=R.getPooled(Sr.change,t,e,n),t.type="change",q(n),M(t),t}function bt(t){v(t,!1)}function xt(t){if(nt(b(t)))return t}function wt(t,e){if("topChange"===t)return e}function Et(){kr&&(kr.detachEvent("onpropertychange",St),Tr=kr=null)}function St(t){"value"===t.propertyName&&xt(Tr)&&(t=_t(Tr,t,K(t)),X(bt,t))}function kt(t,e,n){"topFocus"===t?(Et(),kr=e,Tr=n,kr.attachEvent("onpropertychange",St)):"topBlur"===t&&Et()}function Tt(t){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return xt(Tr)}function Ct(t,e){if("topClick"===t)return xt(e)}function Pt(t,e){if("topInput"===t||"topChange"===t)return xt(e)}function Mt(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ir[t])&&!!e[t]}function It(){return Mt}function At(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(e=e.return,0!==(2&e.effectTag))return 1}return 3===e.tag?2:3}function Ot(t){return!!(t=t._reactInternalFiber)&&2===At(t)}function zt(t){2!==At(t)&&r("188")}function Rt(t){var e=t.alternate;if(!e)return e=At(t),3===e&&r("188"),1===e?null:t;for(var n=t,i=e;;){var o=n.return,a=o?o.alternate:null;if(!o||!a)break;if(o.child===a.child){for(var s=o.child;s;){if(s===n)return zt(o),t;if(s===i)return zt(o),e;s=s.sibling}r("188")}if(n.return!==i.return)n=o,i=a;else{s=!1;for(var u=o.child;u;){if(u===n){s=!0,n=o,i=a;break}if(u===i){s=!0,i=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=o;break}if(u===i){s=!0,i=a,n=o;break}u=u.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?t:e}function Lt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Dt(t){if(!(t=Rt(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function jt(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function Bt(t,e){var n=t[0].toUpperCase()+t.slice(1),r="on"+n;n="top"+n,e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},Zr[t]=e,$r[n]=e}function Ft(t){var e=t.targetInst;do{if(!e){t.ancestors.push(e);break}var n;for(n=e;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(e),e=_(n)}while(e);for(n=0;n<t.ancestors.length;n++)e=t.ancestors[n],g(t.topLevelType,e,t.nativeEvent,K(t.nativeEvent))}function Nt(t){Xr=!!t}function Vt(t,e,n){if(!n)return null;t=(Hr(t)?qt:Zt).bind(null,t),n.addEventListener(e,t,!1)}function Ut(t,e,n){if(!n)return null;t=(Hr(t)?qt:Zt).bind(null,t),n.addEventListener(e,t,!0)}function qt(t,e){H(Zt,t,e)}function Zt(t,e){if(Xr){var n=K(e);if(n=_(n),null!==n&&"number"===typeof n.tag&&2!==At(n)&&(n=null),Gr.length){var r=Gr.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{X(Ft,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>Gr.length&&Gr.push(t)}}}function $t(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function Wt(t){if(Jr[t])return Jr[t];if(!Kr[t])return t;var e,n=Kr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Qr)return Jr[t]=n[e];return t}function Ht(t){return Object.prototype.hasOwnProperty.call(t,ii)||(t[ii]=ri++,ni[t[ii]]={}),ni[t[ii]]}function Gt(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xt(t,e){var n=Gt(t);t=0;for(var r;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Gt(n)}}function Yt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)}function Kt(t,e){if(ci||null==si||si!==dn())return null;var n=si;return"selectionStart"in n&&Yt(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,li&&yn(li,n)?null:(li=n,t=R.getPooled(ai.select,ui,t,e),t.type="select",t.target=si,M(t),t)}function Jt(t,e,n,r){this.tag=t,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=e,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function Qt(t,e,n){var r=t.alternate;return null===r?(r=new Jt(t.tag,e,t.key,t.mode),r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function te(t,e,n){var i=t.type,o=t.key;t=t.props;var a=void 0;if("function"===typeof i)a=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)a=5;else switch(i){case hr:return ee(t.children,e,n,o);case mr:a=11,e|=3;break;case fr:a=11,e|=2;break;case lr:a=7;break;case cr:a=9;break;default:if("object"===typeof i&&null!==i)switch(i.$$typeof){case dr:a=13;break;case yr:a=12;break;case vr:a=14;break;default:if("number"===typeof i.tag)return e=i,e.pendingProps=t,e.expirationTime=n,e;r("130",null==i?i:typeof i,"")}else r("130",null==i?i:typeof i,"")}return e=new Jt(a,t,o,e),e.type=i,e.expirationTime=n,e}function ee(t,e,n,r){return t=new Jt(10,t,r,e),t.expirationTime=n,t}function ne(t,e,n){return t=new Jt(6,t,null,e),t.expirationTime=n,t}function re(t,e,n){return e=new Jt(4,null!==t.children?t.children:[],t.key,e),e.expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ie(t){return function(e){try{return t(e)}catch(t){}}}function oe(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);hi=ie(function(t){return e.onCommitFiberRoot(n,t)}),fi=ie(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}return!0}function ae(t){"function"===typeof hi&&hi(t)}function se(t){"function"===typeof fi&&fi(t)}function ue(t){return{baseState:t,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function le(t,e){null===t.last?t.first=t.last=e:(t.last.next=e,t.last=e),(0===t.expirationTime||t.expirationTime>e.expirationTime)&&(t.expirationTime=e.expirationTime)}function ce(t){di=yi=null;var e=t.alternate,n=t.updateQueue;null===n&&(n=t.updateQueue=ue(null)),null!==e?null===(t=e.updateQueue)&&(t=e.updateQueue=ue(null)):t=null,di=n,yi=t!==n?t:null}function pe(t,e){ce(t),t=di;var n=yi;null===n?le(t,e):null===t.last||null===n.last?(le(t,e),le(n,e)):(le(t,e),n.last=e)}function he(t,e,n,r){return t=t.partialState,"function"===typeof t?t.call(e,n,r):t}function fe(t,e,n,r,i,o){null!==t&&t.updateQueue===n&&(n=e.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?t=n.baseState:(t=n.baseState=e.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,u=!1;null!==s;){var l=s.expirationTime;if(l>o){var c=n.expirationTime;(0===c||c>l)&&(n.expirationTime=l),u||(u=!0,n.baseState=t)}else u||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(t=he(s,r,t,i),a=!0):(l=he(s,r,t,i))&&(t=a?hn({},t,l):hn(t,l),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(s)),null!==s.capturedValue&&(l=n.capturedValues,null===l?n.capturedValues=[s.capturedValue]:l.push(s.capturedValue));s=s.next}return null!==n.callbackList?e.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(e.updateQueue=null),u||(n.baseState=t),t}function de(t,e){var n=t.callbackList;if(null!==n)for(t.callbackList=null,t=0;t<n.length;t++){var i=n[t],o=i.callback;i.callback=null,"function"!==typeof o&&r("191",o),o.call(e)}}function ye(t,e,n,r,i){function o(t,e,n,r,i,o){if(null===e||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)return!0;var a=t.stateNode;return t=t.type,"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!yn(e,n)||!yn(r,i))}function a(t,e){e.updater=d,t.stateNode=e,e._reactInternalFiber=t}function s(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&d.enqueueReplaceState(e,e.state,null)}function u(t,e,n,r){if(t=t.type,"function"===typeof t.getDerivedStateFromProps)return t.getDerivedStateFromProps.call(null,n,r)}var l=t.cacheContext,c=t.getMaskedContext,p=t.getUnmaskedContext,h=t.isContextConsumer,f=t.hasContextChanged,d={isMounted:Ot,enqueueSetState:function(t,r,i){t=t._reactInternalFiber,i=void 0===i?null:i;var o=n(t);pe(t,{expirationTime:o,partialState:r,callback:i,isReplace:!1,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueReplaceState:function(t,r,i){t=t._reactInternalFiber,i=void 0===i?null:i;var o=n(t);pe(t,{expirationTime:o,partialState:r,callback:i,isReplace:!0,isForced:!1,capturedValue:null,next:null}),e(t,o)},enqueueForceUpdate:function(t,r){t=t._reactInternalFiber,r=void 0===r?null:r;var i=n(t);pe(t,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),e(t,i)}};return{adoptClassInstance:a,callGetDerivedStateFromProps:u,constructClassInstance:function(t,e){var n=t.type,r=p(t),i=h(t),o=i?c(t,r):vn;n=new n(e,o);var s=null!==n.state&&void 0!==n.state?n.state:null;return a(t,n),t.memoizedState=s,e=u(t,n,e,s),null!==e&&void 0!==e&&(t.memoizedState=hn({},t.memoizedState,e)),i&&l(t,r,o),n},mountClassInstance:function(t,e){var n=t.type,r=t.alternate,i=t.stateNode,o=t.pendingProps,a=p(t);i.props=o,i.state=t.memoizedState,i.refs=vn,i.context=c(t,a),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(n=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&d.enqueueReplaceState(i,i.state,null),null!==(n=t.updateQueue)&&(i.state=fe(r,t,n,i,o,e))),"function"===typeof i.componentDidMount&&(t.effectTag|=4)},resumeMountClassInstance:function(t,e){var n=t.type,a=t.stateNode;a.props=t.memoizedProps,a.state=t.memoizedState;var l=t.memoizedProps,h=t.pendingProps,d=a.context,y=p(t);y=c(t,y),(n="function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(l!==h||d!==y)&&s(t,a,h,y),d=t.memoizedState,e=null!==t.updateQueue?fe(null,t,t.updateQueue,a,h,e):d;var m=void 0;if(l!==h&&(m=u(t,a,h,e)),null!==m&&void 0!==m){e=null===e||void 0===e?m:hn({},e,m);var v=t.updateQueue;null!==v&&(v.baseState=hn({},v.baseState,m))}return l!==h||d!==e||f()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((l=o(t,l,h,d,e,y))?(n||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r(t,h),i(t,e)),a.props=h,a.state=e,a.context=y,l):("function"===typeof a.componentDidMount&&(t.effectTag|=4),!1)},updateClassInstance:function(t,e,n){var a=e.type,l=e.stateNode;l.props=e.memoizedProps,l.state=e.memoizedState;var h=e.memoizedProps,d=e.pendingProps,y=l.context,m=p(e);m=c(e,m),(a="function"===typeof a.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(h!==d||y!==m)&&s(e,l,d,m),y=e.memoizedState,n=null!==e.updateQueue?fe(t,e,e.updateQueue,l,d,n):y;var v=void 0;if(h!==d&&(v=u(e,l,d,n)),null!==v&&void 0!==v){n=null===n||void 0===n?v:hn({},n,v);var g=e.updateQueue;null!==g&&(g.baseState=hn({},g.baseState,v))}return h!==d||y!==n||f()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((v=o(e,h,d,y,n,m))?(a||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(d,n,m),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(d,n,m)),"function"===typeof l.componentDidUpdate&&(e.effectTag|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(e.effectTag|=2048)):("function"!==typeof l.componentDidUpdate||h===t.memoizedProps&&y===t.memoizedState||(e.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||h===t.memoizedProps&&y===t.memoizedState||(e.effectTag|=2048),r(e,d),i(e,n)),l.props=d,l.state=n,l.context=m,v):("function"!==typeof l.componentDidUpdate||h===t.memoizedProps&&y===t.memoizedState||(e.effectTag|=4),"function"!==typeof l.getSnapshotBeforeUpdate||h===t.memoizedProps&&y===t.memoizedState||(e.effectTag|=2048),!1)}}}function me(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",t);var o=""+t;return null!==e&&null!==e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs===vn?i.refs={}:i.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}"string"!==typeof t&&r("148"),n._owner||r("254",t)}return t}function ve(t,e){"textarea"!==t.type&&r("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function ge(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(t,e,n){return t=Qt(t,e,n),t.index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index,r<n?(e.effectTag=2,n):r):(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?(e=ne(n,t.mode,r),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function l(t,e,n,r){return null!==e&&e.type===n.type?(r=o(e,n.props,r),r.ref=me(t,e,n),r.return=t,r):(r=te(n,t.mode,r),r.ref=me(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=re(n,t.mode,r),e.return=t,e):(e=o(e,n.children||[],r),e.return=t,e)}function p(t,e,n,r,i){return null===e||10!==e.tag?(e=ee(n,t.mode,r,i),e.return=t,e):(e=o(e,n,r),e.return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return e=ne(""+e,t.mode,n),e.return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case ur:return n=te(e,t.mode,n),n.ref=me(t,null,e),n.return=t,n;case pr:return e=re(e,t.mode,n),e.return=t,e}if(mi(e)||rt(e))return e=ee(e,t.mode,n,null),e.return=t,e;ve(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ur:return n.key===i?n.type===hr?p(t,e,n.props.children,r,i):l(t,e,n,r):null;case pr:return n.key===i?c(t,e,n,r):null}if(mi(n)||rt(n))return null!==i?null:p(t,e,n,r,null);ve(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return t=t.get(n)||null,u(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ur:return t=t.get(null===r.key?n:r.key)||null,r.type===hr?p(e,t,r.props.children,i,r.key):l(e,t,r,i);case pr:return t=t.get(null===r.key?n:r.key)||null,c(e,t,r,i)}if(mi(r)||rt(r))return t=t.get(n)||null,p(e,t,r,i,null);ve(e,r)}return null}function y(r,o,s,u){for(var l=null,c=null,p=o,y=o=0,m=null;null!==p&&y<s.length;y++){p.index>y?(m=p,p=null):m=p.sibling;var v=f(r,p,s[y],u);if(null===v){null===p&&(p=m);break}t&&p&&null===v.alternate&&e(r,p),o=a(v,o,y),null===c?l=v:c.sibling=v,c=v,p=m}if(y===s.length)return n(r,p),l;if(null===p){for(;y<s.length;y++)(p=h(r,s[y],u))&&(o=a(p,o,y),null===c?l=p:c.sibling=p,c=p);return l}for(p=i(r,p);y<s.length;y++)(m=d(p,r,y,s[y],u))&&(t&&null!==m.alternate&&p.delete(null===m.key?y:m.key),o=a(m,o,y),null===c?l=m:c.sibling=m,c=m);return t&&p.forEach(function(t){return e(r,t)}),l}function m(o,s,u,l){var c=rt(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var p=c=null,y=s,m=s=0,v=null,g=u.next();null!==y&&!g.done;m++,g=u.next()){y.index>m?(v=y,y=null):v=y.sibling;var _=f(o,y,g.value,l);if(null===_){y||(y=v);break}t&&y&&null===_.alternate&&e(o,y),s=a(_,s,m),null===p?c=_:p.sibling=_,p=_,y=v}if(g.done)return n(o,y),c;if(null===y){for(;!g.done;m++,g=u.next())null!==(g=h(o,g.value,l))&&(s=a(g,s,m),null===p?c=g:p.sibling=g,p=g);return c}for(y=i(o,y);!g.done;m++,g=u.next())null!==(g=d(y,o,m,g.value,l))&&(t&&null!==g.alternate&&y.delete(null===g.key?m:g.key),s=a(g,s,m),null===p?c=g:p.sibling=g,p=g);return t&&y.forEach(function(t){return e(o,t)}),c}return function(t,i,a,u){"object"===typeof a&&null!==a&&a.type===hr&&null===a.key&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ur:t:{var c=a.key;for(l=i;null!==l;){if(l.key===c){if(10===l.tag?a.type===hr:l.type===a.type){n(t,l.sibling),i=o(l,a.type===hr?a.props.children:a.props,u),i.ref=me(t,l,a),i.return=t,t=i;break t}n(t,l);break}e(t,l),l=l.sibling}a.type===hr?(i=ee(a.props.children,t.mode,u,a.key),i.return=t,t=i):(u=te(a,t.mode,u),u.ref=me(t,i,a),u.return=t,t=u)}return s(t);case pr:t:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(t,i.sibling),i=o(i,a.children||[],u),i.return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}i=re(a,t.mode,u),i.return=t,t=i}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(t,i.sibling),i=o(i,a,u),i.return=t,t=i):(n(t,i),i=ne(a,t.mode,u),i.return=t,t=i),s(t);if(mi(a))return y(t,i,a,u);if(rt(a))return m(t,i,a,u);if(l&&ve(t,a),"undefined"===typeof a)switch(t.tag){case 2:case 1:u=t.type,r("152",u.displayName||u.name||"Component")}return n(t,i)}}function _e(t,e,n,i,o,a,s){function u(t,e,n){l(t,e,n,e.expirationTime)}function l(t,e,n,r){e.child=null===t?gi(e,null,n,r):vi(e,t.child,n,r)}function c(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function p(t,e,n,r,i,o){if(c(t,e),!n&&!i)return r&&T(e,!1),y(t,e);n=e.stateNode,ar.current=e;var a=i?null:n.render();return e.effectTag|=1,i&&(l(t,e,null,o),e.child=null),l(t,e,a,o),e.memoizedState=n.state,e.memoizedProps=n.props,r&&T(e,!0),e.child}function h(t){var e=t.stateNode;e.pendingContext?k(t,e.pendingContext,e.pendingContext!==e.context):e.context&&k(t,e.context,!1),_(t,e.containerInfo)}function f(t,e,n,r){var i=t.child;for(null!==i&&(i.return=t);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===e&&0!==(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===t.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){o=i;break}o=o.return}i=o}}function d(t,e,n){var r=e.type._context,i=e.pendingProps,o=e.memoizedProps;if(!E()&&o===i)return e.stateNode=0,b(e),y(t,e);var a=i.value;if(e.memoizedProps=i,null===o)a=1073741823;else if(o.value===i.value){if(o.children===i.children)return e.stateNode=0,b(e),y(t,e);a=0}else{var s=o.value;if(s===a&&(0!==s||1/s===1/a)||s!==s&&a!==a){if(o.children===i.children)return e.stateNode=0,b(e),y(t,e);a=0}else if(a="function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823,0===(a|=0)){if(o.children===i.children)return e.stateNode=0,b(e),y(t,e)}else f(e,r,a,n)}return e.stateNode=a,b(e),u(t,e,i.children),e.child}function y(t,e){if(null!==t&&e.child!==t.child&&r("153"),null!==e.child){t=e.child;var n=Qt(t,t.pendingProps,t.expirationTime);for(e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,n=n.sibling=Qt(t,t.pendingProps,t.expirationTime),n.return=e;n.sibling=null}return e.child}var m=t.shouldSetTextContent,v=t.shouldDeprioritizeSubtree,g=e.pushHostContext,_=e.pushHostContainer,b=i.pushProvider,x=n.getMaskedContext,w=n.getUnmaskedContext,E=n.hasContextChanged,S=n.pushContextProvider,k=n.pushTopLevelContextObject,T=n.invalidateContextProvider,C=o.enterHydrationState,P=o.resetHydrationState,M=o.tryToClaimNextHydratableInstance;t=ye(n,a,s,function(t,e){t.memoizedProps=e},function(t,e){t.memoizedState=e});var I=t.adoptClassInstance,A=t.callGetDerivedStateFromProps,O=t.constructClassInstance,z=t.mountClassInstance,R=t.resumeMountClassInstance,L=t.updateClassInstance;return{beginWork:function(t,e,n){if(0===e.expirationTime||e.expirationTime>n){switch(e.tag){case 3:h(e);break;case 2:S(e);break;case 4:_(e,e.stateNode.containerInfo);break;case 13:b(e)}return null}switch(e.tag){case 0:null!==t&&r("155");var i=e.type,o=e.pendingProps,a=w(e);return a=x(e,a),i=i(o,a),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(a=e.type,e.tag=2,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,"function"===typeof a.getDerivedStateFromProps&&null!==(o=A(e,i,o,e.memoizedState))&&void 0!==o&&(e.memoizedState=hn({},e.memoizedState,o)),o=S(e),I(e,i),z(e,n),t=p(t,e,!0,o,!1,n)):(e.tag=1,u(t,e,i),e.memoizedProps=o,t=e.child),t;case 1:return o=e.type,n=e.pendingProps,E()||e.memoizedProps!==n?(i=w(e),i=x(e,i),o=o(n,i),e.effectTag|=1,u(t,e,o),e.memoizedProps=n,t=e.child):t=y(t,e),t;case 2:o=S(e),null===t?null===e.stateNode?(O(e,e.pendingProps),z(e,n),i=!0):i=R(e,n):i=L(t,e,n),a=!1;var s=e.updateQueue;return null!==s&&null!==s.capturedValues&&(a=i=!0),p(t,e,i,o,a,n);case 3:t:if(h(e),null!==(i=e.updateQueue)){if(a=e.memoizedState,o=fe(t,e,i,null,null,n),e.memoizedState=o,null!==(i=e.updateQueue)&&null!==i.capturedValues)i=null;else{if(a===o){P(),t=y(t,e);break t}i=o.element}a=e.stateNode,(null===t||null===t.child)&&a.hydrate&&C(e)?(e.effectTag|=2,e.child=gi(e,null,i,n)):(P(),u(t,e,i)),e.memoizedState=o,t=e.child}else P(),t=y(t,e);return t;case 5:return g(e),null===t&&M(e),o=e.type,s=e.memoizedProps,i=e.pendingProps,a=null!==t?t.memoizedProps:null,E()||s!==i||((s=1&e.mode&&v(o,i))&&(e.expirationTime=1073741823),s&&1073741823===n)?(s=i.children,m(o,i)?s=null:a&&m(o,a)&&(e.effectTag|=16),c(t,e),1073741823!==n&&1&e.mode&&v(o,i)?(e.expirationTime=1073741823,e.memoizedProps=i,t=null):(u(t,e,s),e.memoizedProps=i,t=e.child)):t=y(t,e),t;case 6:return null===t&&M(e),e.memoizedProps=e.pendingProps,null;case 8:e.tag=7;case 7:return o=e.pendingProps,E()||e.memoizedProps!==o||(o=e.memoizedProps),i=o.children,e.stateNode=null===t?gi(e,e.stateNode,i,n):vi(e,t.stateNode,i,n),e.memoizedProps=o,e.stateNode;case 9:return null;case 4:return _(e,e.stateNode.containerInfo),o=e.pendingProps,E()||e.memoizedProps!==o?(null===t?e.child=vi(e,null,o,n):u(t,e,o),e.memoizedProps=o,t=e.child):t=y(t,e),t;case 14:return n=e.type.render,n=n(e.pendingProps,e.ref),u(t,e,n),e.memoizedProps=n,e.child;case 10:return n=e.pendingProps,E()||e.memoizedProps!==n?(u(t,e,n),e.memoizedProps=n,t=e.child):t=y(t,e),t;case 11:return n=e.pendingProps.children,E()||null!==n&&e.memoizedProps!==n?(u(t,e,n),e.memoizedProps=n,t=e.child):t=y(t,e),t;case 13:return d(t,e,n);case 12:t:{i=e.type,a=e.pendingProps,s=e.memoizedProps,o=i._currentValue;var l=i._changedBits;if(E()||0!==l||s!==a){e.memoizedProps=a;var k=a.unstable_observedBits;if(void 0!==k&&null!==k||(k=1073741823),e.stateNode=k,0!==(l&k))f(e,i,l,n);else if(s===a){t=y(t,e);break t}n=a.children,n=n(o),u(t,e,n),t=e.child}else t=y(t,e)}return t;default:r("156")}}}}function be(t,e,n,i,o){function a(t){t.effectTag|=4}var s=t.createInstance,u=t.createTextInstance,l=t.appendInitialChild,c=t.finalizeInitialChildren,p=t.prepareUpdate,h=t.persistence,f=e.getRootHostContainer,d=e.popHostContext,y=e.getHostContext,m=e.popHostContainer,v=n.popContextProvider,g=n.popTopLevelContextObject,_=i.popProvider,b=o.prepareToHydrateHostInstance,x=o.prepareToHydrateHostTextInstance,w=o.popHydrationState,E=void 0,S=void 0,k=void 0;return t.mutation?(E=function(){},S=function(t,e,n){(e.updateQueue=n)&&a(e)},k=function(t,e,n,r){n!==r&&a(e)}):r(h?"235":"236"),{completeWork:function(t,e,n){var i=e.pendingProps;switch(e.tag){case 1:return null;case 2:return v(e),t=e.stateNode,i=e.updateQueue,null!==i&&null!==i.capturedValues&&(e.effectTag&=-65,"function"===typeof t.componentDidCatch?e.effectTag|=256:i.capturedValues=null),null;case 3:return m(e),g(e),i=e.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(w(e),e.effectTag&=-3),E(e),t=e.updateQueue,null!==t&&null!==t.capturedValues&&(e.effectTag|=256),null;case 5:d(e),n=f();var o=e.type;if(null!==t&&null!=e.stateNode){var h=t.memoizedProps,T=e.stateNode,C=y();T=p(T,o,h,i,n,C),S(t,e,T,o,h,i,n,C),t.ref!==e.ref&&(e.effectTag|=128)}else{if(!i)return null===e.stateNode&&r("166"),null;if(t=y(),w(e))b(e,n,t)&&a(e);else{h=s(o,i,n,t,e);t:for(C=e.child;null!==C;){if(5===C.tag||6===C.tag)l(h,C.stateNode);else if(4!==C.tag&&null!==C.child){C.child.return=C,C=C.child;continue}if(C===e)break;for(;null===C.sibling;){if(null===C.return||C.return===e)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}c(h,o,i,n,t)&&a(e),e.stateNode=h}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)k(t,e,t.memoizedProps,i);else{if("string"!==typeof i)return null===e.stateNode&&r("166"),null;t=f(),n=y(),w(e)?x(e)&&a(e):e.stateNode=u(i,t,n,e)}return null;case 7:(i=e.memoizedProps)||r("165"),e.tag=8,o=[];t:for((h=e.stateNode)&&(h.return=e);null!==h;){if(5===h.tag||6===h.tag||4===h.tag)r("247");else if(9===h.tag)o.push(h.pendingProps.value);else if(null!==h.child){h.child.return=h,h=h.child;continue}for(;null===h.sibling;){if(null===h.return||h.return===e)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}return h=i.handler,i=h(i.props,o),e.child=vi(e,null!==t?t.child:null,i,n),e.child;case 8:return e.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return m(e),E(e),null;case 13:return _(e),null;case 12:return null;case 0:r("167");default:r("156")}}}}function xe(t,e,n,r,i){var o=t.popHostContainer,a=t.popHostContext,s=e.popContextProvider,u=e.popTopLevelContextObject,l=n.popProvider;return{throwException:function(t,e,n){e.effectTag|=512,e.firstEffect=e.lastEffect=null,e={value:n,source:e,stack:ot(e)};do{switch(t.tag){case 3:return ce(t),t.updateQueue.capturedValues=[e],void(t.effectTag|=1024);case 2:if(n=t.stateNode,0===(64&t.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&!i(n)){ce(t),n=t.updateQueue;var r=n.capturedValues;return null===r?n.capturedValues=[e]:r.push(e),void(t.effectTag|=1024)}}t=t.return}while(null!==t)},unwindWork:function(t){switch(t.tag){case 2:s(t);var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return o(t),u(t),e=t.effectTag,1024&e?(t.effectTag=-1025&e|64,t):null;case 5:return a(t),null;case 4:return o(t),null;case 13:return l(t),null;default:return null}},unwindInterruptedWork:function(t){switch(t.tag){case 2:s(t);break;case 3:o(t),u(t);break;case 5:a(t);break;case 4:o(t);break;case 13:l(t)}}}}function we(t,e){var n=e.source;null===e.stack&&ot(n),null!==n&&it(n),e=e.value,null!==t&&2===t.tag&&it(t);try{e&&e.suppressReactErrorLogging||console.error(e)}catch(t){t&&t.suppressReactErrorLogging||console.error(t)}}function Ee(t,e,n,i,o){function a(t){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(n){e(t,n)}else n.current=null}function s(t){switch("function"===typeof se&&se(t),t.tag){case 2:a(t);var n=t.stateNode;if("function"===typeof n.componentWillUnmount)try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(n){e(t,n)}break;case 5:a(t);break;case 7:u(t.stateNode);break;case 4:h&&c(t)}}function u(t){for(var e=t;;)if(s(e),null===e.child||h&&4===e.tag){if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}else e.child.return=e,e=e.child}function l(t){return 5===t.tag||3===t.tag||4===t.tag}function c(t){for(var e=t,n=!1,i=void 0,o=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,o=!1;break t;case 3:case 4:i=n.stateNode.containerInfo,o=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag)u(e),o?w(i,e.stateNode):x(i,e.stateNode);else if(4===e.tag?i=e.stateNode.containerInfo:s(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;e=e.return,4===e.tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}var p=t.getPublicInstance,h=t.mutation;t=t.persistence,h||r(t?"235":"236");var f=h.commitMount,d=h.commitUpdate,y=h.resetTextContent,m=h.commitTextUpdate,v=h.appendChild,g=h.appendChildToContainer,_=h.insertBefore,b=h.insertInContainerBefore,x=h.removeChild,w=h.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(t,e){switch(e.tag){case 2:if(2048&e.effectTag&&null!==t){var n=t.memoizedProps,i=t.memoizedState;t=e.stateNode,t.props=e.memoizedProps,t.state=e.memoizedState,e=t.getSnapshotBeforeUpdate(n,i),t.__reactInternalSnapshotBeforeUpdate=e}break;case 3:case 5:case 6:case 4:break;default:r("163")}},commitResetTextContent:function(t){y(t.stateNode)},commitPlacement:function(t){t:{for(var e=t.return;null!==e;){if(l(e)){var n=e;break t}e=e.return}r("160"),n=void 0}var i=e=void 0;switch(n.tag){case 5:e=n.stateNode,i=!1;break;case 3:case 4:e=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(y(e),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||l(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var o=t;;){if(5===o.tag||6===o.tag)n?i?b(e,o.stateNode,n):_(e,o.stateNode,n):i?g(e,o.stateNode):v(e,o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},commitDeletion:function(t){c(t),t.return=null,t.child=null,t.alternate&&(t.alternate.child=null,t.alternate.return=null)},commitWork:function(t,e){switch(e.tag){case 2:break;case 5:var n=e.stateNode;if(null!=n){var i=e.memoizedProps;t=null!==t?t.memoizedProps:i;var o=e.type,a=e.updateQueue;e.updateQueue=null,null!==a&&d(n,a,o,t,i,e)}break;case 6:null===e.stateNode&&r("162"),n=e.memoizedProps,m(e.stateNode,null!==t?t.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(t,e,n){switch(n.tag){case 2:if(t=n.stateNode,4&n.effectTag)if(null===e)t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidMount();else{var i=e.memoizedProps;e=e.memoizedState,t.props=n.memoizedProps,t.state=n.memoizedState,t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}n=n.updateQueue,null!==n&&de(n,t);break;case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=p(n.child.stateNode);break;case 2:t=n.child.stateNode}de(e,t)}break;case 5:t=n.stateNode,null===e&&4&n.effectTag&&f(t,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:r("163")}},commitErrorLogging:function(t,e){switch(t.tag){case 2:var n=t.type;e=t.stateNode;var i=t.updateQueue;(null===i||null===i.capturedValues)&&r("264");var a=i.capturedValues;for(i.capturedValues=null,"function"!==typeof n.getDerivedStateFromCatch&&o(e),e.props=t.memoizedProps,e.state=t.memoizedState,n=0;n<a.length;n++){i=a[n];var s=i.value,u=i.stack;we(t,i),e.componentDidCatch(s,{componentStack:null!==u?u:""})}break;case 3:for(n=t.updateQueue,(null===n||null===n.capturedValues)&&r("264"),a=n.capturedValues,n.capturedValues=null,n=0;n<a.length;n++)i=a[n],we(t,i),e(i.value);break;default:r("265")}},commitAttachRef:function(t){var e=t.ref;if(null!==e){var n=t.stateNode;switch(t.tag){case 5:t=p(n);break;default:t=n}"function"===typeof e?e(t):e.current=t}},commitDetachRef:function(t){null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null)}}}function Se(t,e){function n(t){return t===_i&&r("174"),t}var i=t.getChildHostContext,o=t.getRootHostContext;t=e.createCursor;var a=e.push,s=e.pop,u=t(_i),l=t(_i),c=t(_i);return{getHostContext:function(){return n(u.current)},getRootHostContainer:function(){return n(c.current)},popHostContainer:function(t){s(u,t),s(l,t),s(c,t)},popHostContext:function(t){l.current===t&&(s(u,t),s(l,t))},pushHostContainer:function(t,e){a(c,e,t),a(l,t,t),a(u,_i,t),e=o(e),s(u,t),a(u,e,t)},pushHostContext:function(t){var e=n(c.current),r=n(u.current);e=i(r,t.type,e),r!==e&&(a(l,t,t),a(u,e,t))}}}function ke(t){function e(t,e){var n=new Jt(5,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function n(t,e){switch(t.tag){case 5:return null!==(e=a(e,t.type,t.pendingProps))&&(t.stateNode=e,!0);case 6:return null!==(e=s(e,t.pendingProps))&&(t.stateNode=e,!0);default:return!1}}function i(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;h=t}var o=t.shouldSetTextContent;if(!(t=t.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var a=t.canHydrateInstance,s=t.canHydrateTextInstance,u=t.getNextHydratableSibling,l=t.getFirstHydratableChild,c=t.hydrateInstance,p=t.hydrateTextInstance,h=null,f=null,d=!1;return{enterHydrationState:function(t){return f=l(t.stateNode.containerInfo),h=t,d=!0},resetHydrationState:function(){f=h=null,d=!1},tryToClaimNextHydratableInstance:function(t){if(d){var r=f;if(r){if(!n(t,r)){if(!(r=u(r))||!n(t,r))return t.effectTag|=2,d=!1,void(h=t);e(h,f)}h=t,f=l(r)}else t.effectTag|=2,d=!1,h=t}},prepareToHydrateHostInstance:function(t,e,n){return e=c(t.stateNode,t.type,t.memoizedProps,e,n,t),t.updateQueue=e,null!==e},prepareToHydrateHostTextInstance:function(t){return p(t.stateNode,t.memoizedProps,t)},popHydrationState:function(t){if(t!==h)return!1;if(!d)return i(t),d=!0,!1;var n=t.type;if(5!==t.tag||"head"!==n&&"body"!==n&&!o(n,t.memoizedProps))for(n=f;n;)e(t,n),n=u(n);return i(t),f=h?u(t.stateNode):null,!0}}}function Te(t){function e(t,e,n){t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n}function n(t){return 2===t.tag&&null!=t.type.childContextTypes}function i(t,e){var n=t.stateNode,i=t.type.childContextTypes;if("function"!==typeof n.getChildContext)return e;n=n.getChildContext();for(var o in n)o in i||r("108",it(t)||"Unknown",o);return hn({},e,n)}var o=t.createCursor,a=t.push,s=t.pop,u=o(vn),l=o(!1),c=vn;return{getUnmaskedContext:function(t){return n(t)?c:u.current},cacheContext:e,getMaskedContext:function(t,n){var r=t.type.contextTypes;if(!r)return vn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o,a={};for(o in r)a[o]=n[o];return i&&e(t,n,a),a},hasContextChanged:function(){return l.current},isContextConsumer:function(t){return 2===t.tag&&null!=t.type.contextTypes},isContextProvider:n,popContextProvider:function(t){n(t)&&(s(l,t),s(u,t))},popTopLevelContextObject:function(t){s(l,t),s(u,t)},pushTopLevelContextObject:function(t,e,n){null!=u.cursor&&r("168"),a(u,e,t),a(l,n,t)},processChildContext:i,pushContextProvider:function(t){if(!n(t))return!1;var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||vn,c=u.current,a(u,e,t),a(l,l.current,t),!0},invalidateContextProvider:function(t,e){var n=t.stateNode;if(n||r("169"),e){var o=i(t,c);n.__reactInternalMemoizedMergedChildContext=o,s(l,t),s(u,t),a(u,o,t)}else s(l,t);a(l,e,t)},findCurrentUnmaskedContext:function(t){for(2!==At(t)||2!==t.tag?r("170"):void 0;3!==t.tag;){if(n(t))return t.stateNode.__reactInternalMemoizedMergedChildContext;(t=t.return)||r("171")}return t.stateNode.context}}}function Ce(t){var e=t.createCursor,n=t.push,r=t.pop,i=e(null),o=e(null),a=e(0);return{pushProvider:function(t){var e=t.type._context;n(a,e._changedBits,t),n(o,e._currentValue,t),n(i,t,t),e._currentValue=t.pendingProps.value,e._changedBits=t.stateNode},popProvider:function(t){var e=a.current,n=o.current;r(i,t),r(o,t),r(a,t),t=t.type._context,t._currentValue=n,t._changedBits=e}}}function Pe(){var t=[],e=-1;return{createCursor:function(t){return{current:t}},isEmpty:function(){return-1===e},pop:function(n){0>e||(n.current=t[e],t[e]=null,e--)},push:function(n,r){e++,t[e]=n.current,n.current=r},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function Me(t){function e(){if(null!==Q)for(var t=Q.return;null!==t;)O(t),t=t.return;tt=null,et=0,Q=null,it=!1}function n(t){return null!==at&&at.has(t)}function i(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){e=M(e,t,et);var i=t;if(1073741823===et||1073741823!==i.expirationTime){t:switch(i.tag){case 3:case 2:var o=i.updateQueue;o=null===o?0:o.expirationTime;break t;default:o=0}for(var a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==e)return e;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t)),null!==r)return r;if(null===n){it=!0;break}t=n}else{if(null!==(t=A(t)))return t.effectTag&=2559,t;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;t=n}}return null}function o(t){var e=P(t.alternate,t,et);return null===e&&(e=i(t)),ar.current=null,e}function a(t,n,a){J&&r("243"),J=!0,n===et&&t===tt&&null!==Q||(e(),tt=t,et=n,Q=Qt(tt.current,null,et),t.pendingCommitExpirationTime=0);for(var s=!1;;){try{if(a)for(;null!==Q&&!w();)Q=o(Q);else for(;null!==Q;)Q=o(Q)}catch(t){if(null===Q){s=!0,E(t);break}a=Q;var u=a.return;if(null===u){s=!0,E(t);break}I(u,a,t),Q=i(a)}break}return J=!1,s||null!==Q?null:it?(t.pendingCommitExpirationTime=n,t.current.alternate):void r("262")}function s(t,e,n,r){t={value:n,source:t,stack:ot(t)},pe(e,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:t,next:null}),c(e,r)}function u(t,e){t:{J&&!rt&&r("263");for(var i=t.return;null!==i;){switch(i.tag){case 2:var o=i.stateNode;if("function"===typeof i.type.getDerivedStateFromCatch||"function"===typeof o.componentDidCatch&&!n(o)){s(t,i,e,1),t=void 0;break t}break;case 3:s(t,i,e,1),t=void 0;break t}i=i.return}3===t.tag&&s(t,t,e,1),t=void 0}return t}function l(t){return t=0!==K?K:J?rt?1:et:1&t.mode?xt?10*(1+((p()+15)/10|0)):25*(1+((p()+500)/25|0)):1,xt&&(0===dt||t>dt)&&(dt=t),t}function c(t,n){t:{for(;null!==t;){if((0===t.expirationTime||t.expirationTime>n)&&(t.expirationTime=n),null!==t.alternate&&(0===t.alternate.expirationTime||t.alternate.expirationTime>n)&&(t.alternate.expirationTime=n),null===t.return){if(3!==t.tag){n=void 0;break t}var i=t.stateNode;!J&&0!==et&&n<et&&e(),J&&!rt&&tt===i||d(i,n),St>Et&&r("185")}t=t.return}n=void 0}return n}function p(){return X=U()-H,G=2+(X/10|0)}function h(t,e,n,r,i){var o=K;K=1;try{return t(e,n,r,i)}finally{K=o}}function f(t){if(0!==lt){if(t>lt)return;Z(ct)}var e=U()-H;lt=t,ct=q(m,{timeout:10*(t-2)-e})}function d(t,e){if(null===t.nextScheduledRoot)t.remainingExpirationTime=e,null===ut?(st=ut=t,t.nextScheduledRoot=t):(ut=ut.nextScheduledRoot=t,ut.nextScheduledRoot=st);else{var n=t.remainingExpirationTime;(0===n||e<n)&&(t.remainingExpirationTime=e)}pt||(_t?bt&&(ht=t,ft=1,b(t,1,!1)):1===e?v():f(e))}function y(){var t=0,e=null;if(null!==ut)for(var n=ut,i=st;null!==i;){var o=i.remainingExpirationTime;if(0===o){if((null===n||null===ut)&&r("244"),i===i.nextScheduledRoot){st=ut=i.nextScheduledRoot=null;break}if(i===st)st=o=i.nextScheduledRoot,ut.nextScheduledRoot=o,i.nextScheduledRoot=null;else{if(i===ut){ut=n,ut.nextScheduledRoot=st,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===t||o<t)&&(t=o,e=i),i===ut)break;n=i,i=i.nextScheduledRoot}}n=ht,null!==n&&n===e&&1===t?St++:St=0,ht=e,ft=t}function m(t){g(0,!0,t)}function v(){g(1,!1,null)}function g(t,e,n){if(gt=n,y(),e)for(;null!==ht&&0!==ft&&(0===t||t>=ft)&&(!yt||p()>=ft);)b(ht,ft,!yt),y();else for(;null!==ht&&0!==ft&&(0===t||t>=ft);)b(ht,ft,!1),y();null!==gt&&(lt=0,ct=-1),0!==ft&&f(ft),gt=null,yt=!1,_()}function _(){if(St=0,null!==wt){var t=wt;wt=null;for(var e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){mt||(mt=!0,vt=t)}}}if(mt)throw t=vt,vt=null,mt=!1,t}function b(t,e,n){pt&&r("245"),pt=!0,n?(n=t.finishedWork,null!==n?x(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!0))&&(w()?t.finishedWork=n:x(t,n,e)))):(n=t.finishedWork,null!==n?x(t,n,e):(t.finishedWork=null,null!==(n=a(t,e,!1))&&x(t,n,e))),pt=!1}function x(t,e,n){var i=t.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===wt?wt=[i]:wt.push(i),i._defer))return t.finishedWork=e,void(t.remainingExpirationTime=0);t.finishedWork=null,rt=J=!0,n=e.stateNode,n.current===e&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0;var o=p();if(ar.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var a=e.firstEffect}else a=e;else a=e.firstEffect;for($(n.containerInfo),nt=a;null!==nt;){var s=!1,l=void 0;try{for(;null!==nt;)2048&nt.effectTag&&z(nt.alternate,nt),nt=nt.nextEffect}catch(t){s=!0,l=t}s&&(null===nt&&r("178"),u(nt,l),null!==nt&&(nt=nt.nextEffect))}for(nt=a;null!==nt;){s=!1,l=void 0;try{for(;null!==nt;){var c=nt.effectTag;if(16&c&&R(nt),128&c){var h=nt.alternate;null!==h&&V(h)}switch(14&c){case 2:L(nt),nt.effectTag&=-3;break;case 6:L(nt),nt.effectTag&=-3,j(nt.alternate,nt);break;case 4:j(nt.alternate,nt);break;case 8:D(nt)}nt=nt.nextEffect}}catch(t){s=!0,l=t}s&&(null===nt&&r("178"),u(nt,l),null!==nt&&(nt=nt.nextEffect))}for(W(n.containerInfo),n.current=e,nt=a;null!==nt;){c=!1,h=void 0;try{for(a=n,s=o,l=i;null!==nt;){var f=nt.effectTag;36&f&&B(a,nt.alternate,nt,s,l),256&f&&F(nt,E),128&f&&N(nt);var d=nt.nextEffect;nt.nextEffect=null,nt=d}}catch(t){c=!0,h=t}c&&(null===nt&&r("178"),u(nt,h),null!==nt&&(nt=nt.nextEffect))}J=rt=!1,"function"===typeof ae&&ae(e.stateNode),e=n.current.expirationTime,0===e&&(at=null),t.remainingExpirationTime=e}function w(){return!(null===gt||gt.timeRemaining()>kt)&&(yt=!0)}function E(t){null===ht&&r("246"),ht.remainingExpirationTime=0,mt||(mt=!0,vt=t)}var S=Pe(),k=Se(t,S),T=Te(S);S=Ce(S);var C=ke(t),P=_e(t,k,T,S,C,c,l).beginWork,M=be(t,k,T,S,C).completeWork;k=xe(k,T,S,c,n);var I=k.throwException,A=k.unwindWork,O=k.unwindInterruptedWork;k=Ee(t,u,c,l,function(t){null===at?at=new Set([t]):at.add(t)},p);var z=k.commitBeforeMutationLifeCycles,R=k.commitResetTextContent,L=k.commitPlacement,D=k.commitDeletion,j=k.commitWork,B=k.commitLifeCycles,F=k.commitErrorLogging,N=k.commitAttachRef,V=k.commitDetachRef,U=t.now,q=t.scheduleDeferredCallback,Z=t.cancelDeferredCallback,$=t.prepareForCommit,W=t.resetAfterCommit,H=U(),G=2,X=H,Y=0,K=0,J=!1,Q=null,tt=null,et=0,nt=null,rt=!1,it=!1,at=null,st=null,ut=null,lt=0,ct=-1,pt=!1,ht=null,ft=0,dt=0,yt=!1,mt=!1,vt=null,gt=null,_t=!1,bt=!1,xt=!1,wt=null,Et=1e3,St=0,kt=1;return{recalculateCurrentTime:p,computeExpirationForFiber:l,scheduleWork:c,requestWork:d,flushRoot:function(t,e){pt&&r("253"),ht=t,ft=e,b(t,e,!1),v(),_()},batchedUpdates:function(t,e){var n=_t;_t=!0;try{return t(e)}finally{(_t=n)||pt||v()}},unbatchedUpdates:function(t,e){if(_t&&!bt){bt=!0;try{return t(e)}finally{bt=!1}}return t(e)},flushSync:function(t,e){pt&&r("187");var n=_t;_t=!0;try{return h(t,e)}finally{_t=n,v()}},flushControlled:function(t){var e=_t;_t=!0;try{h(t)}finally{(_t=e)||pt||g(1,!1,null)}},deferredUpdates:function(t){var e=K;K=25*(1+((p()+500)/25|0));try{return t()}finally{K=e}},syncUpdates:h,interactiveUpdates:function(t,e,n){if(xt)return t(e,n);_t||pt||0===dt||(g(dt,!1,null),dt=0);var r=xt,i=_t;_t=xt=!0;try{return t(e,n)}finally{xt=r,(_t=i)||pt||v()}},flushInteractiveUpdates:function(){pt||0===dt||(g(dt,!1,null),dt=0)},computeUniqueAsyncExpiration:function(){var t=25*(1+((p()+500)/25|0));return t<=Y&&(t=Y+1),Y=t},legacyContext:T}}function Ie(t){function e(t,e,n,r,i,o){if(r=e.current,n){n=n._reactInternalFiber;var s=u(n);n=l(n)?c(n,s):s}else n=vn;return null===e.context?e.context=n:e.pendingContext=n,e=o,pe(r,{expirationTime:i,partialState:{element:t},callback:void 0===e?null:e,isReplace:!1,isForced:!1,capturedValue:null,next:null}),a(r,i),i}var n=t.getPublicInstance;t=Me(t);var i=t.recalculateCurrentTime,o=t.computeExpirationForFiber,a=t.scheduleWork,s=t.legacyContext,u=s.findCurrentUnmaskedContext,l=s.isContextProvider,c=s.processChildContext;return{createContainer:function(t,e,n){return e=new Jt(3,null,null,e?3:0),t={current:e,containerInfo:t,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},e.stateNode=t},updateContainer:function(t,n,r,a){var s=n.current,u=i();return s=o(s),e(t,n,r,u,s,a)},updateContainerAtExpirationTime:function(t,n,r,o,a){return e(t,n,r,i(),o,a)},flushRoot:t.flushRoot,requestWork:t.requestWork,computeUniqueAsyncExpiration:t.computeUniqueAsyncExpiration,batchedUpdates:t.batchedUpdates,unbatchedUpdates:t.unbatchedUpdates,deferredUpdates:t.deferredUpdates,syncUpdates:t.syncUpdates,interactiveUpdates:t.interactiveUpdates,flushInteractiveUpdates:t.flushInteractiveUpdates,flushControlled:t.flushControlled,flushSync:t.flushSync,getPublicRootInstance:function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return n(t.child.stateNode);default:return t.child.stateNode}},findHostInstance:function(t){var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?r("188"):r("268",Object.keys(t))),t=Lt(e),null===t?null:t.stateNode},findHostInstanceWithNoPortals:function(t){return t=Dt(t),null===t?null:t.stateNode},injectIntoDevTools:function(t){var e=t.findFiberByHostInstance;return oe(hn({},t,{findHostInstanceByFiber:function(t){return t=Lt(t),null===t?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}}}function Ae(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:pr,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Oe(t){var e="";return cn.Children.forEach(t,function(t){null==t||"string"!==typeof t&&"number"!==typeof t||(e+=t)}),e}function ze(t,e){return t=hn({children:void 0},e),(e=Oe(e.children))&&(t.children=e),t}function Re(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+n,e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Le(t,e){var n=e.value;t._wrapperState={initialValue:null!=n?n:e.defaultValue,wasMultiple:!!e.multiple}}function De(t,e){return null!=e.dangerouslySetInnerHTML&&r("91"),hn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function je(t,e){var n=e.value;null==n&&(n=e.defaultValue,e=e.children,null!=e&&(null!=n&&r("92"),Array.isArray(e)&&(1>=e.length||r("93"),e=e[0]),n=""+e),null==n&&(n="")),t._wrapperState={initialValue:""+n}}function Be(t,e){var n=e.value;null!=n&&(n=""+n,n!==t.value&&(t.value=n),null==e.defaultValue&&(t.defaultValue=n)),null!=e.defaultValue&&(t.defaultValue=e.defaultValue)}function Fe(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}function Ne(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Ne(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}function Ue(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function qe(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=e[n];i=null==o||"boolean"===typeof o||""===o?"":r||"number"!==typeof o||0===o||Ni.hasOwnProperty(i)&&Ni[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}function Ze(t,e,n){e&&(Ui[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&r("137",t,n()),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&r("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||r("61")),null!=e.style&&"object"!==typeof e.style&&r("62",n()))}function $e(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function We(t,e){t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument;var n=Ht(t);e=Sn[e];for(var r=0;r<e.length;r++){var i=e[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?Ut("topScroll","scroll",t):"topFocus"===i||"topBlur"===i?(Ut("topFocus","focus",t),Ut("topBlur","blur",t),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(J("cancel",!0)&&Ut("topCancel","cancel",t),n.topCancel=!0):"topClose"===i?(J("close",!0)&&Ut("topClose","close",t),n.topClose=!0):ti.hasOwnProperty(i)&&Vt(i,ti[i],t),n[i]=!0)}}function He(t,e,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ji.html&&(r=Ne(t)),r===ji.html?"script"===t?(t=n.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):t="string"===typeof e.is?n.createElement(t,{is:e.is}):n.createElement(t):t=n.createElementNS(r,t),t}function Ge(t,e){return(9===e.nodeType?e:e.ownerDocument).createTextNode(t)}function Xe(t,e,n,r){var i=$e(e,n);switch(e){case"iframe":case"object":Vt("topLoad","load",t);var o=n;break;case"video":case"audio":for(o in ei)ei.hasOwnProperty(o)&&Vt(o,ei[o],t);o=n;break;case"source":Vt("topError","error",t),o=n;break;case"img":case"image":case"link":Vt("topError","error",t),Vt("topLoad","load",t),o=n;break;case"form":Vt("topReset","reset",t),Vt("topSubmit","submit",t),o=n;break;case"details":Vt("topToggle","toggle",t),o=n;break;case"input":ft(t,n),o=ht(t,n),Vt("topInvalid","invalid",t),We(r,"onChange");break;case"option":o=ze(t,n);break;case"select":Le(t,n),o=hn({},n,{value:void 0}),Vt("topInvalid","invalid",t),We(r,"onChange");break;case"textarea":je(t,n),o=De(t,n),Vt("topInvalid","invalid",t),We(r,"onChange");break;default:o=n}Ze(e,o,qi);var a,s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?qe(t,u,qi):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Fi(t,u):"children"===a?"string"===typeof u?("textarea"!==e||""!==u)&&Ue(t,u):"number"===typeof u&&Ue(t,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(En.hasOwnProperty(a)?null!=u&&We(r,a):null!=u&&pt(t,a,u,i))}switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),Fe(t,n);break;case"option":null!=n.value&&t.setAttribute("value",n.value);break;case"select":t.multiple=!!n.multiple,e=n.value,null!=e?Re(t,!!n.multiple,e,!1):null!=n.defaultValue&&Re(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=fn)}}function Ye(t,e,n,r,i){var o=null;switch(e){case"input":n=ht(t,n),r=ht(t,r),o=[];break;case"option":n=ze(t,n),r=ze(t,r),o=[];break;case"select":n=hn({},n,{value:void 0}),r=hn({},r,{value:void 0}),o=[];break;case"textarea":n=De(t,n),r=De(t,r),o=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(t.onclick=fn)}Ze(e,r,qi),e=t=void 0;var a=null;for(t in n)if(!r.hasOwnProperty(t)&&n.hasOwnProperty(t)&&null!=n[t])if("style"===t){var s=n[t];for(e in s)s.hasOwnProperty(e)&&(a||(a={}),a[e]="")}else"dangerouslySetInnerHTML"!==t&&"children"!==t&&"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&"autoFocus"!==t&&(En.hasOwnProperty(t)?o||(o=[]):(o=o||[]).push(t,null));for(t in r){var u=r[t];if(s=null!=n?n[t]:void 0,r.hasOwnProperty(t)&&u!==s&&(null!=u||null!=s))if("style"===t)if(s){for(e in s)!s.hasOwnProperty(e)||u&&u.hasOwnProperty(e)||(a||(a={}),a[e]="");for(e in u)u.hasOwnProperty(e)&&s[e]!==u[e]&&(a||(a={}),a[e]=u[e])}else a||(o||(o=[]),o.push(t,a)),a=u;else"dangerouslySetInnerHTML"===t?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(o=o||[]).push(t,""+u)):"children"===t?s===u||"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(t,""+u):"suppressContentEditableWarning"!==t&&"suppressHydrationWarning"!==t&&(En.hasOwnProperty(t)?(null!=u&&We(i,t),o||s===u||(o=[])):(o=o||[]).push(t,u))}return a&&(o=o||[]).push("style",a),o}function Ke(t,e,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&dt(t,i),$e(n,r),r=$e(n,i);for(var o=0;o<e.length;o+=2){var a=e[o],s=e[o+1];"style"===a?qe(t,s,qi):"dangerouslySetInnerHTML"===a?Fi(t,s):"children"===a?Ue(t,s):pt(t,a,s,r)}switch(n){case"input":yt(t,i);break;case"textarea":Be(t,i);break;case"select":t._wrapperState.initialValue=void 0,e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?Re(t,!!i.multiple,n,!1):e!==!!i.multiple&&(null!=i.defaultValue?Re(t,!!i.multiple,i.defaultValue,!0):Re(t,!!i.multiple,i.multiple?[]:"",!1))}}function Je(t,e,n,r,i){switch(e){case"iframe":case"object":Vt("topLoad","load",t);break;case"video":case"audio":for(var o in ei)ei.hasOwnProperty(o)&&Vt(o,ei[o],t);break;case"source":Vt("topError","error",t);break;case"img":case"image":case"link":Vt("topError","error",t),Vt("topLoad","load",t);break;case"form":Vt("topReset","reset",t),Vt("topSubmit","submit",t);break;case"details":Vt("topToggle","toggle",t);break;case"input":ft(t,n),Vt("topInvalid","invalid",t),We(i,"onChange");break;case"select":Le(t,n),Vt("topInvalid","invalid",t),We(i,"onChange");break;case"textarea":je(t,n),Vt("topInvalid","invalid",t),We(i,"onChange")}Ze(e,n,qi),r=null;for(var a in n)n.hasOwnProperty(a)&&(o=n[a],"children"===a?"string"===typeof o?t.textContent!==o&&(r=["children",o]):"number"===typeof o&&t.textContent!==""+o&&(r=["children",""+o]):En.hasOwnProperty(a)&&null!=o&&We(i,a));switch(e){case"input":et(t),mt(t,n);break;case"textarea":et(t),Fe(t,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(t.onclick=fn)}return r}function Qe(t,e){return t.nodeValue!==e}function tn(t){this._expirationTime=Hi.computeUniqueAsyncExpiration(),this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function en(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function nn(t,e,n){this._internalRoot=Hi.createContainer(t,e,n)}function rn(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function on(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function an(t,e){if(e||(e=t?9===t.nodeType?t.documentElement:t.firstChild:null,e=!(!e||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new nn(t,!1,e)}function sn(t,e,n,i,o){rn(n)||r("200");var a=n._reactRootContainer;if(a){if("function"===typeof o){var s=o;o=function(){var t=Hi.getPublicRootInstance(a._internalRoot);s.call(t)}}null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)}else{if(a=n._reactRootContainer=an(n,i),"function"===typeof o){var u=o;o=function(){var t=Hi.getPublicRootInstance(a._internalRoot);u.call(t)}}Hi.unbatchedUpdates(function(){null!=t?a.legacy_renderSubtreeIntoContainer(t,e,o):a.render(e,o)})}return Hi.getPublicRootInstance(a._internalRoot)}function un(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return rn(e)||r("200"),Ae(t,e,null,n)}var ln=n(30),cn=n(0),pn=n(86),hn=n(19),fn=n(32),dn=n(87),yn=n(88),mn=n(89),vn=n(31);cn||r("227");var gn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(t,e,n,r,o,a,s,u,l){i.apply(gn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(t,e,n,r,i,o,a,s,u){if(gn.invokeGuardedCallback.apply(this,arguments),gn.hasCaughtError()){var l=gn.clearCaughtError();gn._hasRethrowError||(gn._hasRethrowError=!0,gn._rethrowError=l)}},rethrowCaughtError:function(){return o.apply(gn,arguments)},hasCaughtError:function(){return gn._hasCaughtError},clearCaughtError:function(){if(gn._hasCaughtError){var t=gn._caughtError;return gn._caughtError=null,gn._hasCaughtError=!1,t}r("198")}},_n=null,bn={},xn=[],wn={},En={},Sn={},kn=Object.freeze({plugins:xn,eventNameDispatchConfigs:wn,registrationNameModules:En,registrationNameDependencies:Sn,possibleRegistrationNames:null,injectEventPluginOrder:u,injectEventPluginsByName:l}),Tn=null,Cn=null,Pn=null,Mn=null,In={injectEventPluginOrder:u,injectEventPluginsByName:l},An=Object.freeze({injection:In,getListener:m,runEventsInBatch:v,runExtractedEventsInBatch:g}),On=Math.random().toString(36).slice(2),zn="__reactInternalInstance$"+On,Rn="__reactEventHandlers$"+On,Ln=Object.freeze({precacheFiberNode:function(t,e){e[zn]=t},getClosestInstanceFromNode:_,getInstanceFromNode:function(t){return t=t[zn],!t||5!==t.tag&&6!==t.tag?null:t},getNodeFromInstance:b,getFiberCurrentPropsFromNode:x,updateFiberProps:function(t,e){t[Rn]=e}}),Dn=Object.freeze({accumulateTwoPhaseDispatches:M,accumulateTwoPhaseDispatchesSkipTarget:function(t){h(t,T)},accumulateEnterLeaveDispatches:I,accumulateDirectDispatches:function(t){h(t,P)}}),jn=null,Bn={_root:null,_startText:null,_fallbackText:null},Fn="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),Nn={type:null,target:null,currentTarget:fn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};hn(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=fn.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=fn.thatReturnsTrue)},persist:function(){this.isPersistent=fn.thatReturnsTrue},isPersistent:fn.thatReturnsFalse,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;for(e=0;e<Fn.length;e++)this[Fn[e]]=null}}),R.Interface=Nn,R.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return hn(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=hn({},r.Interface,t),n.extend=r.extend,j(n),n},j(R);var Vn=R.extend({data:null}),Un=R.extend({data:null}),qn=[9,13,27,32],Zn=pn.canUseDOM&&"CompositionEvent"in window,$n=null;pn.canUseDOM&&"documentMode"in document&&($n=document.documentMode);var Wn=pn.canUseDOM&&"TextEvent"in window&&!$n,Hn=pn.canUseDOM&&(!Zn||$n&&8<$n&&11>=$n),Gn=String.fromCharCode(32),Xn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Yn=!1,Kn=!1,Jn={eventTypes:Xn,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(Zn)t:{switch(t){case"topCompositionStart":i=Xn.compositionStart;break t;case"topCompositionEnd":i=Xn.compositionEnd;break t;case"topCompositionUpdate":i=Xn.compositionUpdate;break t}i=void 0}else Kn?B(t,n)&&(i=Xn.compositionEnd):"topKeyDown"===t&&229===n.keyCode&&(i=Xn.compositionStart);return i?(Hn&&(Kn||i!==Xn.compositionStart?i===Xn.compositionEnd&&Kn&&(o=O()):(Bn._root=r,Bn._startText=z(),Kn=!0)),i=Vn.getPooled(i,e,n,r),o?i.data=o:null!==(o=F(n))&&(i.data=o),M(i),o=i):o=null,(t=Wn?N(t,n):V(t,n))?(e=Un.getPooled(Xn.beforeInput,e,n,r),e.data=t,M(e)):e=null,null===o?e:null===e?o:[o,e]}},Qn=null,tr={injectFiberControlledHostComponent:function(t){Qn=t}},er=null,nr=null,rr=Object.freeze({injection:tr,enqueueStateRestore:q,needsStateRestore:Z,restoreStateIfNeeded:$}),ir=!1,or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ar=cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sr="function"===typeof Symbol&&Symbol.for,ur=sr?Symbol.for("react.element"):60103,lr=sr?Symbol.for("react.call"):60104,cr=sr?Symbol.for("react.return"):60105,pr=sr?Symbol.for("react.portal"):60106,hr=sr?Symbol.for("react.fragment"):60107,fr=sr?Symbol.for("react.strict_mode"):60108,dr=sr?Symbol.for("react.provider"):60109,yr=sr?Symbol.for("react.context"):60110,mr=sr?Symbol.for("react.async_mode"):60111,vr=sr?Symbol.for("react.forward_ref"):60112,gr="function"===typeof Symbol&&Symbol.iterator,_r=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,br={},xr={},wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){wr[t]=new lt(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];wr[e]=new lt(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){wr[t]=new lt(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(t){wr[t]=new lt(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){wr[t]=new lt(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){wr[t]=new lt(t,3,!0,t.toLowerCase(),null)}),["capture","download"].forEach(function(t){wr[t]=new lt(t,4,!1,t.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(t){wr[t]=new lt(t,6,!1,t.toLowerCase(),null)}),["rowSpan","start"].forEach(function(t){wr[t]=new lt(t,5,!1,t.toLowerCase(),null)});var Er=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Er,ct);wr[e]=new lt(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Er,ct);wr[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Er,ct);wr[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),wr.tabIndex=new lt("tabIndex",1,!1,"tabindex",null);var Sr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},kr=null,Tr=null,Cr=!1;pn.canUseDOM&&(Cr=J("input")&&(!document.documentMode||9<document.documentMode));var Pr={eventTypes:Sr,_isInputEventSupported:Cr,extractEvents:function(t,e,n,r){var i=e?b(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=wt:Y(i)?Cr?o=Pt:(o=Tt,a=kt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ct),o&&(o=o(t,e)))return _t(o,n,r);a&&a(t,i,e),"topBlur"===t&&null!=e&&(t=e._wrapperState||i._wrapperState)&&t.controlled&&"number"===i.type&&vt(i,"number",i.value)}},Mr=R.extend({view:null,detail:null}),Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Ar=Mr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:It,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)}}),Or={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},zr={eventTypes:Or,extractEvents:function(t,e,n,r){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==t&&"topMouseOver"!==t)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===t?(t=e,e=(e=n.relatedTarget||n.toElement)?_(e):null):t=null,t===e)return null;var o=null==t?i:b(t);i=null==e?i:b(e);var a=Ar.getPooled(Or.mouseLeave,t,n,r);return a.type="mouseleave",a.target=o,a.relatedTarget=i,n=Ar.getPooled(Or.mouseEnter,e,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=o,I(a,n,t,e),[a,n]}},Rr=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Lr=R.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dr=Mr.extend({relatedTarget:null}),jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Br={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fr=Mr.extend({key:function(t){if(t.key){var e=jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?(t=jt(t),13===t?"Enter":String.fromCharCode(t)):"keydown"===t.type||"keyup"===t.type?Br[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:It,charCode:function(t){return"keypress"===t.type?jt(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?jt(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Nr=Ar.extend({dataTransfer:null}),Vr=Mr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:It}),Ur=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),qr=Ar.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),Zr={},$r={};"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(t){Bt(t,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(t){Bt(t,!1)});var Wr={eventTypes:Zr,isInteractiveTopLevelEventType:function(t){return void 0!==(t=$r[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=$r[t];if(!i)return null;switch(t){case"topKeyPress":if(0===jt(n))return null;case"topKeyDown":case"topKeyUp":t=Fr;break;case"topBlur":case"topFocus":t=Dr;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":t=Ar;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":t=Nr;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":t=Vr;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":t=Rr;break;case"topTransitionEnd":t=Ur;break;case"topScroll":t=Mr;break;case"topWheel":t=qr;break;case"topCopy":case"topCut":case"topPaste":t=Lr;break;default:t=R}return e=t.getPooled(i,e,n,r),M(e),e}},Hr=Wr.isInteractiveTopLevelEventType,Gr=[],Xr=!0,Yr=Object.freeze({get _enabled(){return Xr},setEnabled:Nt,isEnabled:function(){return Xr},trapBubbledEvent:Vt,trapCapturedEvent:Ut,dispatchEvent:Zt}),Kr={animationend:$t("Animation","AnimationEnd"),animationiteration:$t("Animation","AnimationIteration"),animationstart:$t("Animation","AnimationStart"),transitionend:$t("Transition","TransitionEnd")},Jr={},Qr={};pn.canUseDOM&&(Qr=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);var ti={topAnimationEnd:Wt("animationend"),topAnimationIteration:Wt("animationiteration"),topAnimationStart:Wt("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Wt("transitionend"),topWheel:"wheel"},ei={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ni={},ri=0,ii="_reactListenersID"+(""+Math.random()).slice(2),oi=pn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ai={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},si=null,ui=null,li=null,ci=!1,pi={eventTypes:ai,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=Ht(o),i=Sn.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?b(e):window,t){case"topFocus":(Y(o)||"true"===o.contentEditable)&&(si=o,ui=e,li=null);break;case"topBlur":li=ui=si=null;break;case"topMouseDown":ci=!0;break;case"topContextMenu":case"topMouseUp":return ci=!1,Kt(n,r);case"topSelectionChange":if(oi)break;case"topKeyDown":case"topKeyUp":return Kt(n,r)}return null}};In.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Tn=Ln.getFiberCurrentPropsFromNode,Cn=Ln.getInstanceFromNode,Pn=Ln.getNodeFromInstance,In.injectEventPluginsByName({SimpleEventPlugin:Wr,EnterLeaveEventPlugin:zr,ChangeEventPlugin:Pr,SelectEventPlugin:pi,BeforeInputEventPlugin:Jn});var hi=null,fi=null;new Set;var di=void 0,yi=void 0,mi=Array.isArray,vi=ge(!0),gi=ge(!1),_i={},bi=Object.freeze({default:Ie}),xi=bi&&Ie||bi,wi=xi.default?xi.default:xi,Ei="object"===typeof performance&&"function"===typeof performance.now,Si=void 0;Si=Ei?function(){return performance.now()}:function(){return Date.now()};var ki=void 0,Ti=void 0;if(pn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Ci=null,Pi=!1,Mi=-1,Ii=!1,Ai=0,Oi=33,zi=33,Ri=void 0;Ri=Ei?{didTimeout:!1,timeRemaining:function(){var t=Ai-performance.now();return 0<t?t:0}}:{didTimeout:!1,timeRemaining:function(){var t=Ai-Date.now();return 0<t?t:0}};var Li="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===Li){if(Pi=!1,t=Si(),0>=Ai-t){if(!(-1!==Mi&&Mi<=t))return void(Ii||(Ii=!0,requestAnimationFrame(Di)));Ri.didTimeout=!0}else Ri.didTimeout=!1;Mi=-1,t=Ci,Ci=null,null!==t&&t(Ri)}},!1);var Di=function(t){Ii=!1;var e=t-Ai+zi;e<zi&&Oi<zi?(8>e&&(e=8),zi=e<Oi?Oi:e):Oi=e,Ai=t+zi,Pi||(Pi=!0,window.postMessage(Li,"*"))};ki=function(t,e){return Ci=t,null!=e&&"number"===typeof e.timeout&&(Mi=Si()+e.timeout),Ii||(Ii=!0,requestAnimationFrame(Di)),0},Ti=function(){Ci=null,Pi=!1,Mi=-1}}else ki=window.requestIdleCallback,Ti=window.cancelIdleCallback;else ki=function(t){return setTimeout(function(){t({timeRemaining:function(){return 1/0},didTimeout:!1})})},Ti=function(t){clearTimeout(t)};var ji={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Bi=void 0,Fi=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n)})}:t}(function(t,e){if(t.namespaceURI!==ji.svg||"innerHTML"in t)t.innerHTML=e;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+e+"</svg>",e=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}),Ni={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];Object.keys(Ni).forEach(function(t){Vi.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ni[e]=Ni[t]})});var Ui=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),qi=fn.thatReturns(""),Zi=Object.freeze({createElement:He,createTextNode:Ge,setInitialProperties:Xe,diffProperties:Ye,updateProperties:Ke,diffHydratedProperties:Je,diffHydratedText:Qe,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(t,e,n){switch(e){case"input":if(yt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=x(i);o||r("90"),nt(i),yt(i,o)}}}break;case"textarea":Be(t,n);break;case"select":null!=(e=n.value)&&Re(t,!!n.multiple,e,!1)}}});tr.injectFiberControlledHostComponent(Zi);var $i=null,Wi=null;tn.prototype.render=function(t){this._defer||r("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,i=new en;return Hi.updateContainerAtExpirationTime(t,e,null,n,i._onCommit),i},tn.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},tn.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||r("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var i=null,o=e;o!==this;)i=o,o=o._next;null===i&&r("251"),i._next=o._next,this._next=e,t.firstBatch=this}this._defer=!1,Hi.flushRoot(t,n),e=this._next,this._next=null,e=t.firstBatch=e,null!==e&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},tn.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},en.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},en.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&r("191",n),n()}}},nn.prototype.render=function(t,e){var n=this._internalRoot,r=new en;return e=void 0===e?null:e,null!==e&&r.then(e),Hi.updateContainer(t,n,null,r._onCommit),r},nn.prototype.unmount=function(t){var e=this._internalRoot,n=new en;return t=void 0===t?null:t,null!==t&&n.then(t),Hi.updateContainer(null,e,null,n._onCommit),n},nn.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new en;return n=void 0===n?null:n,null!==n&&i.then(n),Hi.updateContainer(e,r,t,i._onCommit),i},nn.prototype.createBatch=function(){var t=new tn(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t};var Hi=wi({getRootHostContext:function(t){var e=t.nodeType;switch(e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ve(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ve(t,e)}return t},getChildHostContext:function(t,e){return Ve(t,e)},getPublicInstance:function(t){return t},prepareForCommit:function(){$i=Xr;var t=dn();if(Yt(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){e=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{e.nodeType,i.nodeType}catch(t){e=null;break t}var o=0,a=-1,s=-1,u=0,l=0,c=t,p=null;e:for(;;){for(var h;c!==e||0!==r&&3!==c.nodeType||(a=o+r),c!==i||0!==n&&3!==c.nodeType||(s=o+n),3===c.nodeType&&(o+=c.nodeValue.length),null!==(h=c.firstChild);)p=c,c=h;for(;;){if(c===t)break e;if(p===e&&++u===r&&(a=o),p===i&&++l===n&&(s=o),null!==(h=c.nextSibling))break;c=p,p=c.parentNode}c=h}e=-1===a||-1===s?null:{start:a,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;Wi={focusedElem:t,selectionRange:e},Nt(!1)},resetAfterCommit:function(){var t=Wi,e=dn(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&mn(document.documentElement,n)){if(Yt(n))if(e=r.start,t=r.end,void 0===t&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(window.getSelection){e=window.getSelection();var i=n[A()].length;t=Math.min(r.start,i),r=void 0===r.end?t:Math.min(r.end,i),!e.extend&&t>r&&(i=r,r=t,t=i),i=Xt(n,t);var o=Xt(n,r);if(i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)){var a=document.createRange();a.setStart(i.node,i.offset),e.removeAllRanges(),t>r?(e.addRange(a),e.extend(o.node,o.offset)):(a.setEnd(o.node,o.offset),e.addRange(a))}}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}Wi=null,Nt($i),$i=null},createInstance:function(t,e,n,r,i){return t=He(t,e,n,r),t[zn]=i,t[Rn]=e,t},appendInitialChild:function(t,e){t.appendChild(e)},finalizeInitialChildren:function(t,e,n,r){return Xe(t,e,n,r),on(e,n)},prepareUpdate:function(t,e,n,r,i){return Ye(t,e,n,r,i)},shouldSetTextContent:function(t,e){return"textarea"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&"string"===typeof e.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(t,e){return!!e.hidden},createTextInstance:function(t,e,n,r){return t=Ge(t,e),t[zn]=r,t},now:Si,mutation:{commitMount:function(t,e,n){on(e,n)&&t.focus()},commitUpdate:function(t,e,n,r,i){t[Rn]=i,Ke(t,e,n,r,i)},resetTextContent:function(t){Ue(t,"")},commitTextUpdate:function(t,e,n){t.nodeValue=n},appendChild:function(t,e){t.appendChild(e)},appendChildToContainer:function(t,e){8===t.nodeType?t.parentNode.insertBefore(e,t):t.appendChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},insertInContainerBefore:function(t,e,n){8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},removeChildFromContainer:function(t,e){8===t.nodeType?t.parentNode.removeChild(e):t.removeChild(e)}},hydration:{canHydrateInstance:function(t,e){return 1!==t.nodeType||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t},canHydrateTextInstance:function(t,e){return""===e||3!==t.nodeType?null:t},getNextHydratableSibling:function(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},getFirstHydratableChild:function(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t},hydrateInstance:function(t,e,n,r,i,o){return t[zn]=o,t[Rn]=n,Je(t,e,n,i,r)},hydrateTextInstance:function(t,e,n){return t[zn]=n,Qe(t,e)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:ki,cancelDeferredCallback:Ti}),Gi=Hi;W=Gi.batchedUpdates,H=Gi.interactiveUpdates,G=Gi.flushInteractiveUpdates;var Xi={createPortal:un,findDOMNode:function(t){return null==t?null:1===t.nodeType?t:Hi.findHostInstance(t)},hydrate:function(t,e,n){return sn(null,t,e,!0,n)},render:function(t,e,n){return sn(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,i){return(null==t||void 0===t._reactInternalFiber)&&r("38"),sn(t,e,n,!1,i)},unmountComponentAtNode:function(t){return rn(t)||r("40"),!!t._reactRootContainer&&(Hi.unbatchedUpdates(function(){sn(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return un.apply(void 0,arguments)},unstable_batchedUpdates:Hi.batchedUpdates,unstable_deferredUpdates:Hi.deferredUpdates,flushSync:Hi.flushSync,unstable_flushControlled:Hi.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:An,EventPluginRegistry:kn,EventPropagators:Dn,ReactControlledComponent:rr,ReactDOMComponentTree:Ln,ReactDOMEventListener:Yr},unstable_createRoot:function(t,e){return new nn(t,!0,null!=e&&!0===e.hydrate)}};Hi.injectIntoDevTools({findFiberByHostInstance:_,bundleType:0,version:"16.3.2",rendererPackageName:"react-dom"});var Yi=Object.freeze({default:Xi}),Ki=Yi&&Xi||Yi;t.exports=Ki.default?Ki.default:Ki},function(t,e,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";function r(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(90);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(91);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===typeof t&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=(n.n(a),n(1)),u=n.n(s),l=n(33);n(21);e.a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1],s=n||e+"Subscription",c=function(t){function n(o,a){r(this,n);var s=i(this,t.call(this,o,a));return s[e]=o.store,s}return o(n,t),n.prototype.getChildContext=function(){var t;return t={},t[e]=this[e],t[s]=null,t},n.prototype.render=function(){return a.Children.only(this.props.children)},n}(a.Component);return c.propTypes={store:l.a.isRequired,children:u.a.element.isRequired},c.childContextTypes=(t={},t[e]=l.a.isRequired,t[s]=l.b,t),c}()},function(t,e,n){"use strict";function r(){}var i=n(94);t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t,e,n){if("string"!==typeof e){if(p){var h=c(e);h&&h!==p&&r(t,h,n)}var f=s(e);u&&(f=f.concat(u(e)));for(var d=0;d<f.length;++d){var y=f[d];if(!i[y]&&!o[y]&&(!n||!n[y])){var m=l(e,y);try{a(t,y,m)}catch(t){}}}return t}return t}var i={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,s=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,p=c&&c(Object);t.exports=r},function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){var t=[],e=[];return{clear:function(){e=o,t=o},notify:function(){for(var n=t=e,r=0;r<n.length;r++)n[r]()},get:function(){return e},subscribe:function(n){var r=!0;return e===t&&(e=t.slice()),e.push(n),function(){r&&t!==o&&(r=!1,e===t&&(e=t.slice()),e.splice(e.indexOf(n),1))}}}}n.d(e,"a",function(){return s});var o=null,a={notify:function(){}},s=function(){function t(e,n,i){r(this,t),this.store=e,this.parentSub=n,this.onStateChange=i,this.unsubscribe=null,this.listeners=a}return t.prototype.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},t.prototype.notifyNestedSubs=function(){this.listeners.notify()},t.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},t.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=i())},t.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},t}()},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function o(t,e){return t===e}var a=n(34),s=n(99),u=n(100),l=n(113),c=n(114),p=n(115),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.connectHOC,n=void 0===e?a.a:e,f=t.mapStateToPropsFactories,d=void 0===f?l.a:f,y=t.mapDispatchToPropsFactories,m=void 0===y?u.a:y,v=t.mergePropsFactories,g=void 0===v?c.a:v,_=t.selectorFactory,b=void 0===_?p.a:_;return function(t,e,a){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=u.pure,c=void 0===l||l,p=u.areStatesEqual,f=void 0===p?o:p,y=u.areOwnPropsEqual,v=void 0===y?s.a:y,_=u.areStatePropsEqual,x=void 0===_?s.a:_,w=u.areMergedPropsEqual,E=void 0===w?s.a:w,S=r(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),k=i(t,d,"mapStateToProps"),T=i(e,m,"mapDispatchToProps"),C=i(a,g,"mergeProps");return n(b,h({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:k,initMapDispatchToProps:T,initMergeProps:C,pure:c,areStatesEqual:f,areOwnPropsEqual:v,areStatePropsEqual:x,areMergedPropsEqual:E},S))}}()},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}e.a=i;var o=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(s.b)(t,"mapDispatchToProps"):void 0}function i(t){return t?void 0:Object(s.a)(function(t){return{dispatch:t}})}function o(t){return t&&"object"===typeof t?Object(s.a)(function(e){return Object(a.b)(t,e)}):void 0}var a=n(13),s=n(35);e.a=[r,i,o]},function(t,e,n){"use strict";(function(t,r){var i,o=n(103);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:r;var a=Object(o.a)(i);e.a=a}).call(e,n(4),n(102)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"===typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}e.a=r},function(t,e,n){"use strict";function r(t){if(!Object(a.a)(t)||Object(i.a)(t)!=s)return!1;var e=Object(o.a)(t);if(null===e)return!0;var n=p.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var i=n(105),o=n(110),a=n(112),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,h=c.call(Object);e.a=r},function(t,e,n){"use strict";function r(t){return null==t?void 0===t?u:s:l&&l in Object(t)?Object(o.a)(t):Object(a.a)(t)}var i=n(37),o=n(108),a=n(109),s="[object Null]",u="[object Undefined]",l=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";var r=n(107),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();e.a=o},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(e,n(4))},function(t,e,n){"use strict";function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(37),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.a?i.a.toStringTag:void 0;e.a=r},function(t,e,n){"use strict";function r(t){return o.call(t)}var i=Object.prototype,o=i.toString;e.a=r},function(t,e,n){"use strict";var r=n(111),i=Object(r.a)(Object.getPrototypeOf,Object);e.a=i},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}e.a=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}e.a=r},function(t,e,n){"use strict";function r(t){return"function"===typeof t?Object(o.b)(t,"mapStateToProps"):void 0}function i(t){return t?void 0:Object(o.a)(function(){return{}})}var o=n(35);e.a=[r,i]},function(t,e,n){"use strict";function r(t,e,n){return s({},n,t,e)}function i(t){return function(e,n){var r=(n.displayName,n.pure),i=n.areMergedPropsEqual,o=!1,a=void 0;return function(e,n,s){var u=t(e,n,s);return o?r&&i(u,a)||(a=u):(o=!0,a=u),a}}}function o(t){return"function"===typeof t?i(t):void 0}function a(t){return t?void 0:function(){return r}}var s=(n(36),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t});e.a=[o,a]},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function o(t,e,n,r,i){function o(i,o){return d=i,y=o,m=t(d,y),v=e(r,y),g=n(m,v,y),f=!0,g}function a(){return m=t(d,y),e.dependsOnOwnProps&&(v=e(r,y)),g=n(m,v,y)}function s(){return t.dependsOnOwnProps&&(m=t(d,y)),e.dependsOnOwnProps&&(v=e(r,y)),g=n(m,v,y)}function u(){var e=t(d,y),r=!h(e,m);return m=e,r&&(g=n(m,v,y)),g}function l(t,e){var n=!p(e,y),r=!c(t,d);return d=t,y=e,n&&r?a():n?s():r?u():g}var c=i.areStatesEqual,p=i.areOwnPropsEqual,h=i.areStatePropsEqual,f=!1,d=void 0,y=void 0,m=void 0,v=void 0,g=void 0;return function(t,e){return f?l(t,e):o(t,e)}}function a(t,e){var n=e.initMapStateToProps,a=e.initMapDispatchToProps,s=e.initMergeProps,u=r(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),l=n(t,u),c=a(t,u),p=s(t,u);return(u.pure?o:i)(l,c,p,t,u)}e.a=a;n(116)},function(t,e,n){"use strict";n(21)},function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){var e=t.dispatch;return function(t){return function(n){return(0,s.isFSA)(n)?(0,a.default)(n.payload)?n.payload.then(function(t){return e(r({},n,{payload:t}))}).catch(function(t){return e(r({},n,{payload:t,error:!0})),Promise.reject(t)}):t(n):(0,a.default)(n)?n.then(e):t(n)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var a=function(t){return t&&t.__esModule?t:{default:t}}(n(118)),s=n(119)},function(t,e){function n(t){return!!t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof t.then}t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(0,c.default)(t)&&(0,u.default)(t.type)&&Object.keys(t).every(a)}function o(t){return i(t)&&!0===t.error}function a(t){return["type","payload","error","meta"].indexOf(t)>-1}Object.defineProperty(e,"__esModule",{value:!0});var s=n(120),u=r(s),l=n(126),c=r(l);e.isFSA=i,e.isError=o},function(t,e,n){function r(t){return"string"==typeof t||!o(t)&&a(t)&&i(t)==s}var i=n(38),o=n(125),a=n(40),s="[object String]";t.exports=r},function(t,e,n){var r=n(122),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(4))},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(39),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=p.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}var i=n(38),o=n(127),a=n(40),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,p=l.hasOwnProperty,h=c.call(Object);t.exports=r},function(t,e,n){var r=n(128),i=r(Object.getPrototypeOf,Object);t.exports=i},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(130),l=n(131),c=n(151),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),p(e,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(u.a,null),s.a.createElement(l.a,null),s.a.createElement(c.a,null))}}]),e}(a.Component);e.a=h},function(t,e,n){"use strict";var r=n(0),i=n.n(r);e.a=function(t){return i.a.createElement("div",null,i.a.createElement("div",{class:"jumbotron"},i.a.createElement("h1",null,"What's the Weather?")))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return Object(c.b)({fetchWeather:p.b},t)}var s=n(0),u=n.n(s),l=n(20),c=n(13),p=n(41),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={term:""},n.onInputChange=n.onInputChange.bind(n),n.onFormSubmit=n.onFormSubmit.bind(n),n}return o(e,t),h(e,[{key:"onInputChange",value:function(t){this.setState({term:t.target.value})}},{key:"onFormSubmit",value:function(t){t.preventDefault(),this.props.fetchWeather(this.state.term),this.setState({term:""})}},{key:"render",value:function(){return u.a.createElement("form",{onSubmit:this.onFormSubmit,className:"input-group"},u.a.createElement("input",{placeholder:"Get a five-day forecast in your favorite cities",className:"form-control",value:this.state.term,onChange:this.onInputChange}),u.a.createElement("span",{className:"input-group-btn"},u.a.createElement("button",{type:"submit",className:"btn btn-secondary"},"Submit")))}}]),e}(s.Component);e.a=Object(l.b)(null,a)(f)},function(t,e,n){t.exports=n(133)},function(t,e,n){"use strict";function r(t){var e=new a(t),n=o(a.prototype.request,e);return i.extend(n,a.prototype,e),i.extend(n,e),n}var i=n(2),o=n(42),a=n(135),s=n(22),u=r(s);u.Axios=a,u.create=function(t){return r(i.merge(s,t))},u.Cancel=n(46),u.CancelToken=n(149),u.isCancel=n(45),u.all=function(t){return Promise.all(t)},u.spread=n(150),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){"use strict";function r(t){this.defaults=t,this.interceptors={request:new a,response:new a}}var i=n(22),o=n(2),a=n(144),s=n(145);r.prototype.request=function(t){"string"===typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=r},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(44);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(2);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(2),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(2);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}function i(t){for(var e,n,i=String(t),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&e>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;e=e<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=i},function(t,e,n){"use strict";var r=n(2);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(2);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=n(2),o=n(146),a=n(45),s=n(22),u=n(147),l=n(148);t.exports=function(t){return r(t),t.baseURL&&!u(t.url)&&(t.url=l(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return r(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(r(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";function r(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}var i=n(46);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return{weather:t.weather}}var s=n(0),u=n.n(s),l=n(20),c=n(152),p=n(155),h=n(47),f=n.n(h),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),d(e,[{key:"renderWeather",value:function(t){if(t){var e=t.city.name,n=f.a.map(t.list.map(function(t){return t.main.temp}),function(t){return 1.8*t-459.67}),r=t.list.map(function(t){return t.main.pressure}),i=t.list.map(function(t){return t.main.humidity}),o=t.city.coord,a=o.lon,s=o.lat;return u.a.createElement("tr",{key:e},u.a.createElement("td",null,u.a.createElement(p.a,{lon:a,lat:s})),u.a.createElement("td",null,u.a.createElement(c.a,{data:n,color:"orange",units:"\xb0F"})),u.a.createElement("td",null,u.a.createElement(c.a,{data:r,color:"green",units:"hPA"})),u.a.createElement("td",null,u.a.createElement(c.a,{data:i,color:"gray",units:"%"})))}}},{key:"render",value:function(){return u.a.createElement("table",{className:"table table-hover"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"City"),u.a.createElement("th",null,"Temperature (\xb0F)"),u.a.createElement("th",null,"Pressure (hPA) "),u.a.createElement("th",null,"Humidity (%) "))),u.a.createElement("tbody",null,this.props.weather.map(this.renderWeather)))}}]),e}(s.Component);e.a=Object(l.b)(a)(y)},function(t,e,n){"use strict";function r(t){return o.a.round(o.a.sum(t)/t.length)}var i=n(47),o=n.n(i),a=n(0),s=n.n(a),u=n(154);n.n(u);e.a=function(t){return s.a.createElement("div",null,s.a.createElement(u.Sparklines,{height:120,width:180,data:t.data},s.a.createElement(u.SparklinesLine,{color:t.color}),s.a.createElement(u.SparklinesReferenceLine,{type:"avg"})),s.a.createElement("div",null,r(t.data)," ",t.units))}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){!function(e,r){t.exports=r(n(0))}(0,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=11)}([function(t,e,n){(function(e){if("production"!==e.env.NODE_ENV){var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,i=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r};t.exports=n(14)(i,!0)}else t.exports=n(16)()}).call(e,n(2))},function(e,n){e.exports=t},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){y&&f&&(y=!1,f.length?d=f.concat(d):m=-1,d.length&&s())}function s(){if(!y){var t=i(a);y=!0;for(var e=d.length;e;){for(f=d,d=[];++m<e;)f&&f[m].run();m=-1,e=d.length}f=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var c,p,h=t.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"===typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var f,d=[],y=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.reduce(function(t,e){return t+e})/t.length}},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";(function(e){function n(t,e,n,i,o,a,s,u){if(r(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,o,a,s,u],p=0;l=new Error(e.replace(/%s/g,function(){return c[p++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}var r=function(t){};"production"!==e.env.NODE_ENV&&(r=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")}),t.exports=n}).call(e,n(2))},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.min.apply(Math,t)}},function(t,e,n){"use strict";(function(e){var r=n(4),i=r;if("production"!==e.env.NODE_ENV){var o=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!==typeof console&&console.error(o);try{throw new Error(o)}catch(t){}};i=function(t,e){if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==e.indexOf("Failed Composite propType: ")&&!t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];o.apply(void 0,[e].concat(r))}}}t.exports=i}).call(e,n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.max.apply(Math,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t){var e=(0,i.default)(t),n=t.map(function(t){return Math.pow(t-e,2)}),r=(0,i.default)(n);return Math.sqrt(r)}},function(t,e,n){t.exports=n(12)},function(t,e,n){"use strict";t.exports=n(13)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SparklinesText=e.SparklinesNormalBand=e.SparklinesReferenceLine=e.SparklinesSpots=e.SparklinesBars=e.SparklinesCurve=e.SparklinesLine=e.Sparklines=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=n(17),f=r(h),d=n(18),y=r(d),m=n(19),v=r(m),g=n(20),_=r(g),b=n(21),x=r(b),w=n(22),E=r(w),S=n(27),k=r(S),T=n(28),C=r(T),P=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.limit,r=t.width,i=t.height,o=t.svgWidth,a=t.svgHeight,s=t.preserveAspectRatio,u=t.margin,l=t.style,c=t.max,h=t.min;if(0===e.length)return null;var f=(0,C.default)({data:e,limit:n,width:r,height:i,margin:u,max:c,min:h}),d={style:l,viewBox:"0 0 "+r+" "+i,preserveAspectRatio:s};return o>0&&(d.width=o),a>0&&(d.height=a),p.default.createElement("svg",d,p.default.Children.map(this.props.children,function(t){return p.default.cloneElement(t,{data:e,points:f,width:r,height:i,margin:u})}))}}]),e}(c.PureComponent);P.propTypes={data:l.default.array,limit:l.default.number,width:l.default.number,height:l.default.number,svgWidth:l.default.number,svgHeight:l.default.number,preserveAspectRatio:l.default.string,margin:l.default.number,style:l.default.object,min:l.default.number,max:l.default.number,onMouseMove:l.default.func},P.defaultProps={data:[],width:240,height:60,preserveAspectRatio:"none",margin:2},e.Sparklines=P,e.SparklinesLine=y.default,e.SparklinesCurve=v.default,e.SparklinesBars=_.default,e.SparklinesSpots=x.default,e.SparklinesReferenceLine=E.default,e.SparklinesNormalBand=k.default,e.SparklinesText=f.default},function(t,e,n){"use strict";(function(e){var r=n(4),i=n(5),o=n(8),a=n(6),s=n(15);t.exports=function(t,n){function u(t){var e=t&&(k&&t[k]||t[T]);if("function"===typeof e)return e}function l(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function c(t){this.message=t,this.stack=""}function p(t){function r(r,l,p,h,f,d,y){if(h=h||C,d=d||p,y!==a)if(n)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==e.env.NODE_ENV&&"undefined"!==typeof console){var m=h+":"+p;!s[m]&&u<3&&(o(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",d,h),s[m]=!0,u++)}return null==l[p]?r?new c(null===l[p]?"The "+f+" `"+d+"` is marked as required in `"+h+"`, but its value is `null`.":"The "+f+" `"+d+"` is marked as required in `"+h+"`, but its value is `undefined`."):null:t(l,p,h,f,d)}if("production"!==e.env.NODE_ENV)var s={},u=0;var l=r.bind(null,!1);return l.isRequired=r.bind(null,!0),l}function h(t){function e(e,n,r,i,o,a){var s=e[n];if(x(s)!==t)return new c("Invalid "+i+" `"+o+"` of type `"+w(s)+"` supplied to `"+r+"`, expected `"+t+"`.");return null}return p(e)}function f(t){function e(e,n,r,i,o){if("function"!==typeof t)return new c("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){return new c("Invalid "+i+" `"+o+"` of type `"+x(s)+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var l=t(s,u,r,i,o+"["+u+"]",a);if(l instanceof Error)return l}return null}return p(e)}function d(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||C;return new c("Invalid "+i+" `"+o+"` of type `"+S(e[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return p(e)}function y(t){function n(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(l(a,t[s]))return null;return new c("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+JSON.stringify(t)+".")}return Array.isArray(t)?p(n):("production"!==e.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)}function m(t){function e(e,n,r,i,o){if("function"!==typeof t)return new c("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=x(s);if("object"!==u)return new c("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(s.hasOwnProperty(l)){var p=t(s,l,r,i,o+"."+l,a);if(p instanceof Error)return p}return null}return p(e)}function v(t){function n(e,n,r,i,o){for(var s=0;s<t.length;s++){if(null==(0,t[s])(e,n,r,i,o,a))return null}return new c("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")}if(!Array.isArray(t))return"production"!==e.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull;for(var i=0;i<t.length;i++){var s=t[i];if("function"!==typeof s)return o(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",E(s),i),r.thatReturnsNull}return p(n)}function g(t){function e(e,n,r,i,o){var s=e[n],u=x(s);if("object"!==u)return new c("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var l in t){var p=t[l];if(p){var h=p(s,l,r,i,o+"."+l,a);if(h)return h}}return null}return p(e)}function _(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(_);if(null===e||t(e))return!0;var n=u(e);if(!n)return!1;var r,i=n.call(e);if(n!==e.entries){for(;!(r=i.next()).done;)if(!_(r.value))return!1}else for(;!(r=i.next()).done;){var o=r.value;if(o&&!_(o[1]))return!1}return!0;default:return!1}}function b(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"===typeof Symbol&&e instanceof Symbol)}function x(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":b(e,t)?"symbol":e}function w(t){if("undefined"===typeof t||null===t)return""+t;var e=x(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function E(t){var e=w(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function S(t){return t.constructor&&t.constructor.name?t.constructor.name:C}var k="function"===typeof Symbol&&Symbol.iterator,T="@@iterator",C="<<anonymous>>",P={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),symbol:h("symbol"),any:function(){return p(r.thatReturnsNull)}(),arrayOf:f,element:function(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){return new c("Invalid "+i+" `"+o+"` of type `"+x(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return p(e)}(),instanceOf:d,node:function(){function t(t,e,n,r,i){return _(t[e])?null:new c("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return p(t)}(),objectOf:m,oneOf:y,oneOfType:v,shape:g};return c.prototype=Error.prototype,P.checkPropTypes=s,P.PropTypes=P,P}}).call(e,n(2))},function(t,e,n){"use strict";(function(e){function r(t,n,r,u,l){if("production"!==e.env.NODE_ENV)for(var c in t)if(t.hasOwnProperty(c)){var p;try{i("function"===typeof t[c],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",u||"React class",r,c),p=t[c](n,c,u,r,null,a)}catch(t){p=t}if(o(!p||p instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",u||"React class",r,c,typeof p),p instanceof Error&&!(p.message in s)){s[p.message]=!0;var h=l?l():"";o(!1,"Failed %s type: %s%s",r,p.message,null!=h?h:"")}}}if("production"!==e.env.NODE_ENV)var i=n(5),o=n(8),a=n(6),s={};t.exports=r}).call(e,n(2))},function(t,e,n){"use strict";var r=n(4),i=n(5),o=n(6);t.exports=function(){function t(t,e,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.point,n=t.text,r=t.fontSize,i=t.fontFamily,o=e.x,a=e.y;return p.default.createElement("g",null,p.default.createElement("text",{x:o,y:a,fontFamily:i||"Verdana",fontSize:r||10},n))}}]),e}(p.default.Component);h.propTypes={text:l.default.string,point:l.default.object,fontSize:l.default.number,fontFamily:l.default.string},h.defaultProps={text:"",point:{x:0,y:0}},e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.points,r=(t.width,t.height),i=t.margin,o=t.color,a=t.style,s=t.onMouseMove,u=n.map(function(t){return[t.x,t.y]}).reduce(function(t,e){return t.concat(e)}),l=[n[n.length-1].x,r-i,i,r-i,i,n[0].y],c=u.concat(l),h={stroke:o||a.stroke||"slategray",strokeWidth:a.strokeWidth||"1",strokeLinejoin:a.strokeLinejoin||"round",strokeLinecap:a.strokeLinecap||"round",fill:"none"},f={stroke:a.stroke||"none",strokeWidth:"0",fillOpacity:a.fillOpacity||".1",fill:a.fill||o||"slategray",pointerEvents:"auto"},d=n.map(function(t,n){return p.default.createElement("circle",{key:n,cx:t.x,cy:t.y,r:2,style:f,onMouseEnter:function(r){return s("enter",e[n],t)},onClick:function(r){return s("click",e[n],t)}})});return p.default.createElement("g",null,d,p.default.createElement("polyline",{points:c.join(" "),style:f}),p.default.createElement("polyline",{points:u.join(" "),style:h}))}}]),e}(p.default.Component);h.propTypes={color:l.default.string,style:l.default.object},h.defaultProps={style:{},onMouseMove:function(){}},e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.points,n=(t.width,t.height),r=t.margin,i=t.color,o=t.style,a=t.divisor,s=void 0===a?.25:a,u=void 0,l=function(t){var e=void 0;if(u){var n=(t.x-u.x)*s;e=["C",u.x+n,u.y,t.x-n,t.y,t.x,t.y]}else e=[t.x,t.y];return u=t,e},c=e.map(function(t){return l(t)}).reduce(function(t,e){return t.concat(e)}),h=["L"+e[e.length-1].x,n-r,r,n-r,r,e[0].y],f=c.concat(h),d={stroke:i||o.stroke||"slategray",strokeWidth:o.strokeWidth||"1",strokeLinejoin:o.strokeLinejoin||"round",strokeLinecap:o.strokeLinecap||"round",fill:"none"},y={stroke:o.stroke||"none",strokeWidth:"0",fillOpacity:o.fillOpacity||".1",fill:o.fill||i||"slategray"};return p.default.createElement("g",null,p.default.createElement("path",{d:"M"+f.join(" "),style:y}),p.default.createElement("path",{d:"M"+c.join(" "),style:d}))}}]),e}(p.default.Component);h.propTypes={color:l.default.string,style:l.default.object},h.defaultProps={style:{}},e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.points,r=e.height,i=e.style,o=e.barWidth,a=e.margin,s=e.onMouseMove,u=1*(i&&i.strokeWidth||0),l=a?2*a:0,c=o||(n&&n.length>=2?Math.max(0,n[1].x-n[0].x-u-l):0);return p.default.createElement("g",{transform:"scale(1,-1)"},n.map(function(e,n){return p.default.createElement("rect",{key:n,x:e.x-(c+u)/2,y:-r,width:c,height:Math.max(0,r-e.y),style:i,onMouseMove:s&&s.bind(t,e)})}))}}]),e}(p.default.Component);h.propTypes={points:l.default.arrayOf(l.default.object),height:l.default.number,style:l.default.object,barWidth:l.default.number,margin:l.default.number,onMouseMove:l.default.func},h.defaultProps={style:{fill:"slategray"}},e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"lastDirection",value:function(t){return Math.sign=Math.sign||function(t){return t>0?1:-1},t.length<2?0:Math.sign(t[t.length-2].y-t[t.length-1].y)}},{key:"render",value:function(){var t=this.props,e=t.points,n=(t.width,t.height,t.size),r=t.style,i=t.spotColors,o=p.default.createElement("circle",{cx:e[0].x,cy:e[0].y,r:n,style:r}),a=p.default.createElement("circle",{cx:e[e.length-1].x,cy:e[e.length-1].y,r:n,style:r||{fill:i[this.lastDirection(e)]}});return p.default.createElement("g",null,r&&o,a)}}]),e}(p.default.Component);h.propTypes={size:l.default.number,style:l.default.object,spotColors:l.default.object},h.defaultProps={size:2,spotColors:{"-1":"red",0:"black",1:"green"}},e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=n(23),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(h),d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.points,n=t.margin,r=t.type,i=t.style,o=t.value,a=e.map(function(t){return t.y}),s="custom"==r?o:f[r](a);return p.default.createElement("line",{x1:e[0].x,y1:s+n,x2:e[e.length-1].x,y2:s+n,style:i})}}]),e}(p.default.Component);d.propTypes={type:l.default.oneOf(["max","min","mean","avg","median","custom"]),value:l.default.number,style:l.default.object},d.defaultProps={type:"mean",style:{stroke:"red",strokeOpacity:.75,strokeDasharray:"2, 2"}},e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.variance=e.stdev=e.median=e.midRange=e.avg=e.mean=e.max=e.min=void 0;var i=n(7),o=r(i),a=n(3),s=r(a),u=n(24),l=r(u),c=n(25),p=r(c),h=n(10),f=r(h),d=n(26),y=r(d);e.min=o.default,e.max=o.default,e.mean=s.default,e.avg=s.default,e.midRange=l.default,e.median=p.default,e.stdev=f.default,e.variance=y.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(9),s=r(a);e.default=function(t){return(0,s.default)(t)-(0,o.default)(t)/2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.sort(function(t,e){return t-e})[Math.floor(t.length/2)]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t){var e=(0,i.default)(t),n=t.map(function(t){return Math.pow(t-e,2)});return(0,i.default)(n)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),l=r(u),c=n(1),p=r(c),h=n(3),f=r(h),d=n(10),y=r(d),m=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.points,n=t.margin,r=t.style,i=e.map(function(t){return t.y}),o=(0,f.default)(i),a=(0,y.default)(i);return p.default.createElement("rect",{x:e[0].x,y:o-a+n,width:e[e.length-1].x-e[0].x,height:2*y.default,style:r})}}]),e}(p.default.Component);m.propTypes={style:l.default.object},m.defaultProps={style:{fill:"red",fillOpacity:.1}},e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(9),s=r(a);e.default=function(t){var e=t.data,n=t.limit,r=t.width,i=void 0===r?1:r,a=t.height,u=void 0===a?1:a,l=t.margin,c=void 0===l?0:l,p=t.max,h=void 0===p?(0,s.default)(e):p,f=t.min,d=void 0===f?(0,o.default)(e):f,y=e.length;n&&n<y&&(e=e.slice(y-n));var m=(u-2*c)/(h-d||2),v=(i-2*c)/((n||y)-(y>1?1:0));return e.map(function(t,e){return{x:e*v+c,y:(h===d?1:h-t)*m+c}})}}])})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(0),s=n.n(a),u=n(156),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t){function e(){var t,n,o,a;r(this,e);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o.state={viewport:{width:160,height:160,latitude:o.props.lat,longitude:o.props.lon,zoom:8}},a=n,i(o,a)}return o(e,t),l(e,[{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"map"},s.a.createElement(u.a,Object.assign({},this.state.viewport,{onViewportChange:function(e){return t.setState({viewport:e})},mapboxApiAccessToken:"pk.eyJ1IjoibWVkYW1hbiIsImEiOiJjamxlOGFuZmowamVjM3BwYjI2c2ZuNmJsIn0.bG5-dtwItZOqzM_wPqHUkg"})))}}]),e}(a.Component);e.a=c},function(t,e,n){"use strict";var r=n(48);n.d(e,"a",function(){return r.a});var i=(n(49),n(5),n(230),n(231),n(233),n(234),n(236),n(237),n(17),n(27),n(74));i.a},function(t,e,n){"use strict";function r(t,e){var n=t.get("sources"),r=e.get("sources"),i=[],o=[],a=[],s=n.keySeq().toArray(),u=r.keySeq().toArray(),l=!0,c=!1,p=void 0;try{for(var h,f=s[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var d=h.value,y=r.get(d);y?!y.equals(n.get(d))&&o.push({id:d,source:r.get(d)}):a.push({id:d,source:n.get(d)})}}catch(t){c=!0,p=t}finally{try{l||null==f.return||f.return()}finally{if(c)throw p}}var m=!0,v=!1,g=void 0;try{for(var _,b=u[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var x=_.value;n.get(x)||i.push({id:x,source:r.get(x)})}}catch(t){v=!0,g=t}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return{enter:i,update:o,exit:a}}function i(t,e){var n=t.get("layers"),r=e.get("layers"),i=[],o=[],a={},s={};r.forEach(function(t,e){var n=t.get("id"),i=r.get(e+1);s[n]={layer:t,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(t,e){var r=t.get("id"),i=n.get(e+1);a[r]={layer:t,id:r,before:i?i.get("id"):null},s[r]?s[r].enter=!1:o.push(a[r])});var u=!0,l=!1,c=void 0;try{for(var p,h=r.reverse()[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var f=p.value,d=f.get("id");a[d]&&a[d].layer.equals(s[d].layer)&&a[d].before===s[d].before||i.push(s[d])}}catch(t){l=!0,c=t}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}return{updates:i,exiting:o}}function o(t,e){return{sourcesDiff:r(t,e),layersDiff:i(t,e)}}e.a=o},function(t,e,n){"use strict";function r(t,e){return a(t)||o(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function a(t){if(Array.isArray(t))return t}function s(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function u(t,e){if(!s(t,e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function c(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}n.d(e,"a",function(){return E});var p=n(14),h=n(16),f=n(10),d=n(25),y=n.n(d),m=n(26),v=n.n(m),g=n(59),_=n.n(g),b=n(58),x=n.n(b),w=Object(h.a)(),E=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,o=void 0===i?w:i,a=e.projectionMatrix,s=void 0===a?w:a;u(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.viewMatrix=o,this.projectionMatrix=s;var l=Object(h.a)();_()(l,l,this.projectionMatrix),_()(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=Object(h.a)();y()(c,c,[this.width/2,-this.height/2,1]),v()(c,c,[1,-1,0]),_()(c,c,this.viewProjectionMatrix);var p=x()(Object(h.a)(),c);if(!p)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=p,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return c(t,[{key:"equals",value:function(e){return!!s(e,t)&&e.width===this.width&&e.height===this.height&&Object(p.c)(e.projectionMatrix,this.projectionMatrix)&&Object(p.c)(e.viewMatrix,this.viewMatrix)}},{key:"project",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=r(t,3),o=i[0],a=i[1],s=i[2],u=this.projectFlat([o,a]),l=r(u,2),c=l[0],p=l[1],h=Object(f.h)([c,p,s],this.pixelProjectionMatrix),d=r(h,2),y=d[0],m=d[1],v=void 0===n||n?m:this.height-m;return 2===t.length?[y,v]:[y,v,h[2]]}},{key:"unproject",value:function(t){var e=Number.isFinite,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=n.topLeft,o=n.targetZ,a=r(t,3),s=a[0],u=a[1],l=a[2],c=void 0===i||i?u:this.height-u,p=Object(f.e)([s,c,l],this.pixelUnprojectionMatrix,o),h=this.unprojectFlat(p),d=r(h,2),y=d[0],m=d[1];return e(l)?[y,m,p[2]]:e(o)?[y,m,o]:[y,m]}},{key:"projectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}},{key:"unprojectFlat",value:function(t){return 1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.scale,t}}]),t}()},function(t,e){function n(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}t.exports=n},function(t,e,n){function r(t,e){var n=i(t[0],t[1],t[2]),r=i(e[0],e[1],e[2]);o(n,n),o(r,r);var s=a(n,r);return s>1?0:Math.acos(s)}t.exports=r;var i=n(161),o=n(53),a=n(54)},function(t,e){function n(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=e[0],t[1]=i+a*l-s*u,t[2]=o+a*u+s*l,t}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}t.exports=n},function(t,e){function n(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}t.exports=n},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],h=t[11],f=t[12],d=t[13],y=t[14],m=t[15];return(e*a-n*o)*(p*m-h*y)-(e*s-r*o)*(c*m-h*d)+(e*u-i*o)*(c*y-p*d)+(n*s-r*a)*(l*m-h*f)-(n*u-i*a)*(l*y-p*f)+(r*u-i*s)*(l*d-c*f)}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,p=r*s,h=i*a,f=i*s,d=i*u,y=o*a,m=o*s,v=o*u;return t[0]=1-p-d,t[1]=c+v,t[2]=h-m,t[3]=0,t[4]=c-v,t[5]=1-l-d,t[6]=f+y,t[7]=0,t[8]=h+m,t[9]=f-y,t[10]=1-l-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}t.exports=n},function(t,e){function n(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}t.exports=n},function(t,e,n){function r(t,e,n,r){var o,a,s,u,l,c,p,h,f,d,y=e[0],m=e[1],v=e[2],g=r[0],_=r[1],b=r[2],x=n[0],w=n[1],E=n[2];return Math.abs(y-x)<1e-6&&Math.abs(m-w)<1e-6&&Math.abs(v-E)<1e-6?i(t):(p=y-x,h=m-w,f=v-E,d=1/Math.sqrt(p*p+h*h+f*f),p*=d,h*=d,f*=d,o=_*f-b*h,a=b*p-g*f,s=g*h-_*p,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=h*s-f*a,l=f*o-p*s,c=p*a-h*o,d=Math.sqrt(u*u+l*l+c*c),d?(d=1/d,u*=d,l*=d,c*=d):(u=0,l=0,c=0),t[0]=o,t[1]=u,t[2]=p,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=f,t[11]=0,t[12]=-(o*y+a*m+s*v),t[13]=-(u*y+l*m+c*v),t[14]=-(p*y+h*m+f*v),t[15]=1,t)}var i=n(169);t.exports=r},function(t,e){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}t.exports=n},function(t,e){function n(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}t.exports=n},function(t,e){function n(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}t.exports=n},function(t,e){function n(t,e,n,r){var i,o,a,s,u,l,c,p,h,f,d,y,m,v,g,_,b,x,w,E,S,k,T,C,P=r[0],M=r[1],I=r[2],A=Math.sqrt(P*P+M*M+I*I);return Math.abs(A)<1e-6?null:(A=1/A,P*=A,M*=A,I*=A,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],p=e[4],h=e[5],f=e[6],d=e[7],y=e[8],m=e[9],v=e[10],g=e[11],_=P*P*a+o,b=M*P*a+I*i,x=I*P*a-M*i,w=P*M*a-I*i,E=M*M*a+o,S=I*M*a+P*i,k=P*I*a+M*i,T=M*I*a-P*i,C=I*I*a+o,t[0]=s*_+p*b+y*x,t[1]=u*_+h*b+m*x,t[2]=l*_+f*b+v*x,t[3]=c*_+d*b+g*x,t[4]=s*w+p*E+y*S,t[5]=u*w+h*E+m*S,t[6]=l*w+f*E+v*S,t[7]=c*w+d*E+g*S,t[8]=s*k+p*T+y*C,t[9]=u*k+h*T+m*C,t[10]=l*k+f*T+v*C,t[11]=c*k+d*T+g*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}t.exports=n},function(t,e){function n(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-p*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+p*i,t[11]=u*r+h*i,t}t.exports=n},function(t,e){function n(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}t.exports=n},function(t,e){function n(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}t.exports=n},function(t,e,n){t.exports=n(179)},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}t.exports=n},function(t,e,n){t.exports=n(181)},function(t,e){function n(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}t.exports=n},function(t,e,n){t.exports=n(183)},function(t,e){function n(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}t.exports=n},function(t,e,n){function r(t,e,n){var r=i(e,n);return r<-.999999?(o(c,p,e),a(c)<1e-6&&o(c,h,e),s(c,c),l(t,c,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o(c,e,n),t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=1+r,u(t,t))}var i=n(54),o=n(55),a=n(64),s=n(53),u=n(65),l=n(66);t.exports=r;var c=[0,0,0],p=[1,0,0],h=[0,1,0]},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}t.exports=n},function(t,e,n){t.exports=n(187)},function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}t.exports=n},function(t,e){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}t.exports=n},function(t,e){function n(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}t.exports=n},function(t,e,n){t.exports=n(192)},function(t,e){function n(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}t.exports=n},function(t,e){function n(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*c+a*s+i*l-o*u,t[1]=i*c+a*u+o*s-r*l,t[2]=o*c+a*l+r*u-i*s,t[3]=a*c-r*s-i*u-o*l,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}t.exports=n},function(t,e){function n(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}t.exports=n},function(t,e,n){t.exports=n(67)},function(t,e,n){t.exports=n(199)},function(t,e){function n(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}t.exports=n},function(t,e){function n(t,e,n,r){var i,o,a,s,u,l=e[0],c=e[1],p=e[2],h=e[3],f=n[0],d=n[1],y=n[2],m=n[3];return o=l*f+c*d+p*y+h*m,o<0&&(o=-o,f=-f,d=-d,y=-y,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*l+u*f,t[1]=s*c+u*d,t[2]=s*p+u*y,t[3]=s*h+u*m,t}t.exports=n},function(t,e,n){"use strict";var r=(n(3),n(9),n(64));n.n(r)},function(t,e,n){"use strict";n(24),n(9),n(68)},function(t,e,n){"use strict";n(3)},function(t,e){function n(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}t.exports=n},function(t,e){function n(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}t.exports=n},function(t,e){function n(t,e){return t[0]=-e[0],t[1]=-e[1],t}t.exports=n},function(t,e,n){"use strict";function r(t){var e=t.width,n=t.height,r=t.longitude,u=t.latitude,l=t.zoom,c=t.pitch,p=void 0===c?0:c,h=t.bearing,f=void 0===h?0:h;(-180>r||180<r)&&(r=Object(o.c)(r+180,360)-180),(-180>f||180<f)&&(f=Object(o.c)(f+180,360)-180);var d=new i.a({width:e,height:n,longitude:r,latitude:u,zoom:l}),y=d.project([r,a])[1],m=d.project([r,s])[1],v=0;return m-y<n&&(l+=Math.log2(n/(m-y)),d=new i.a({width:e,height:n,longitude:r,latitude:u,zoom:l}),y=d.project([r,a])[1],m=d.project([r,s])[1]),0<y?v=y:m<n&&(v=m-n),v&&(u=d.unproject([e/2,n/2+v])[1]),{width:e,height:n,longitude:r,latitude:u,zoom:l,pitch:p,bearing:f}}e.a=r;var i=n(8),o=n(16),a=85.05113,s=-85.05113},function(t,e,n){"use strict";function r(t,e,n){var r=Math.cosh,l=Math.log,c=Math.sqrt,p={},h=t.zoom,f=[t.longitude,t.latitude],d=Object(a.i)(h),y=e.zoom,m=[e.longitude,e.latitude],v=Object(a.i)(y-h),g=new i.a(Object(a.d)(f,d)),_=new i.a(Object(a.d)(m,d)),b=_.subtract(g),x=Math.max(t.width,t.height),w=x/v,E=c(b.x*b.x+b.y*b.y);if(Math.abs(E)<s){for(var S=0;S<u.length;S++){var k=u[S],T=t[k],C=e[k];p[k]=Object(o.b)(T,C,n)}return p}var P=1.414*1.414,M=(w*w-x*x+P*P*E*E)/(2*x*P*E),I=(w*w-x*x-P*P*E*E)/(2*w*P*E),A=l(c(M*M+1)-M),O=l(c(I*I+1)-I),z=n*((O-A)/1.414),R=r(A)/r(A+1.414*z),L=x*((r(A)*Math.tanh(A+1.414*z)-Math.sinh(A))/P)/E,D=1/R,j=h+Object(a.f)(D),B=Object(a.g)(g.add(b.scale(L)).scale(D),Object(a.i)(j));return p.longitude=B[0],p.latitude=B[1],p.zoom=j,p}e.a=r;var i=n(14),o=n(16),a=n(10),s=.01,u=["longitude","latitude","zoom"]},function(t,e,n){"use strict";(function(t){function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(){}function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&c.a.checkPropTypes(p,t,"prop",e)}n.d(e,"a",function(){return f});var l=n(1),c=n.n(l),p={container:c.a.object,mapboxApiAccessToken:c.a.string,attributionControl:c.a.bool,preserveDrawingBuffer:c.a.bool,onLoad:c.a.func,onError:c.a.func,reuseMaps:c.a.bool,reuseMap:c.a.bool,transformRequest:c.a.func,mapStyle:c.a.string,visible:c.a.bool,width:c.a.number,height:c.a.number,viewState:c.a.object,longitude:c.a.number,latitude:c.a.number,zoom:c.a.number,bearing:c.a.number,pitch:c.a.number,altitude:c.a.number,mapOptions:c.a.object},h={mapboxApiAccessToken:function(){var e=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);e=n&&n[1]}return e||"undefined"==typeof t||(e=e||Object({NODE_ENV:"production",PUBLIC_URL:""}).MapboxAccessToken),e||null}(),preserveDrawingBuffer:!1,attributionControl:!0,preventStyleDiffing:!1,onLoad:s,onError:s,reuseMaps:!1,reuseMap:!1,transformRequest:null,mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,bearing:0,pitch:0,altitude:1.5,width:0,height:0,mapOptions:{}},f=function(){function t(e){if(i(this,t),!e.mapboxgl)throw new Error("Mapbox not available");!t.initialized&&console.debug&&(t.initialized=!0,console.debug("react-map-gl: ".concat("3.3.4"," using mapbox-gl v").concat(e.mapboxgl.version))),this.props={},this._initialize(e)}return a(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"getMap",value:function(){return this._map}},{key:"_create",value:function(e){if((e.reuseMaps||e.reuseMap)&&t.savedMap){this._map=this.map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");0<n.childNodes.length;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(e.mapStyle),e.onLoad()}else{var i={container:e.container||document.body,center:[0,0],zoom:8,pitch:0,bearing:0,style:e.mapStyle,interactive:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(i.transformRequest=e.transformRequest),this._map=this.map=new e.mapboxgl.Map(Object.assign({},i,e.mapOptions)),this.map.once("load",e.onLoad),this.map.on("error",e.onError)}return this}},{key:"_destroy",value:function(){this._map&&(t.savedMap?this._map.remove():t.savedMap=this._map,this._map=null)}},{key:"_initialize",value:function(t){t=Object.assign({},h,t),u(t,"Mapbox"),this.accessToken=t.mapboxApiAccessToken||h.mapboxApiAccessToken,t.mapboxgl&&(this.accessToken?t.mapboxgl.accessToken=this.accessToken:t.mapboxgl.accessToken="no-token"),this._create(t);var e=this.map.getCanvas();e&&(e.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t,this._checkStyleSheet()}},{key:"_update",value:function(t,e){this._map&&(e=Object.assign({},this.props,e),u(e,"Mapbox"),this._updateMapViewport(t,e),this._updateMapSize(t,e),this.props=e)}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&this._map.resize()}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e);(r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude)&&(this._map.jumpTo(this._getMapboxViewStateProps(e)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude))}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,i=e.zoom,o=e.pitch,a=void 0===o?0:o,s=e.bearing,u=void 0===s?0:s,l=e.altitude;return{longitude:n,latitude:r,zoom:i,pitch:a,bearing:u,altitude:void 0===l?1.5:l}}},{key:"_checkStyleSheet",value:function(){if("undefined"!=typeof document)try{var t=document.querySelector(".mapboxgl-missing-css");if(!("none"===window.getComputedStyle(t).display)){var e=this.props.mapboxgl.version,n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),document.head.append(n)}}catch(t){}}},{key:"_getMapboxViewStateProps",value:function(t){var e=this._getViewState(t);return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch,width:t.width,height:t.height}}}]),t}();f.propTypes=p,f.defaultProps=h}).call(e,n(6))},function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(211),o="object"===("undefined"==typeof t?"undefined":r(t))&&"[object process]"===t+""&&!t.browser,a=!o||i.a;e.a=a}).call(e,n(6))},function(t,e,n){"use strict";(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(){return!("undefined"==typeof window||"object"!==n(window.process)||"renderer"!==window.process.type)||"undefined"!=typeof t&&"object"===n(t.versions)&&t.versions.electron||!!("object"===("undefined"==typeof navigator?"undefined":n(navigator))&&"string"==typeof navigator.userAgent&&0<=navigator.userAgent.indexOf("Electron"))}()}).call(e,n(6))},function(t,e,n){"use strict";function r(t){return t[0].toLowerCase()+t.slice(1)}function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.a;for(var n in e){var i=n.slice(0,3),a=r(n.slice(3));if("min"===i&&t[a]<e[n])return!1;if("max"===i&&t[a]>e[n])return!1}return!0}e.a=i;var o=n(11)},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,i){if(e)if(n){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",a={};e(a),r=i(a),r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else n=i;else e=i}var e,n,r;return t(["exports"],function(t){function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function n(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function i(t,e){this.x=t,this.y=e}function o(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!o(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!o(t[r],e[r]))return!1;return!0}return t===e}function a(t,e,n,r){var i=new rr(t,e,n,r);return function(t){return i.solve(t)}}function s(t,e,n){return Math.min(n,Math.max(e,t))}function u(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function l(){return sr++}function c(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function p(t,e){return-1!==t.indexOf(e,t.length-e.length)}function h(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function f(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?h(t,d):t}function y(t){ur[t]||("undefined"!=typeof console&&console.warn(t),ur[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function v(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)o=t[n],e+=((a=t[i]).x-o.x)*(o.y+a.y);return e}function g(t){var e=new self.XMLHttpRequest;for(var n in e.open("GET",t.url,!0),t.headers)e.setRequestHeader(n,t.headers[n]);return e.withCredentials="include"===t.credentials,e}function _(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function b(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function x(t){var e=t.key,n=t.value;return n?[new mr(e,n,"constants have been deprecated as of v8")]:[]}function w(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function E(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function S(t){return Array.isArray(t)?t.map(S):E(t)}function k(t,e){return{kind:"array",itemType:t,N:e}}function T(t){if("array"===t.kind){var e=T(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function C(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&!C(t.itemType,e.itemType)&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Cr;n<r.length;n+=1)if(!C(r[n],e))return null}return"Expected "+T(t)+" but found "+T(e)+" instead."}function P(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function M(t){if(null===t)return _r;if("string"==typeof t)return xr;if("boolean"==typeof t)return wr;if("number"==typeof t)return br;if(t instanceof Mr)return Er;if(t instanceof Ir)return Tr;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=M(i[r]);if(e){if(e===o)continue;e=kr;break}e=o}return k(e||kr,n)}return Sr}function I(t){if(t instanceof Ur){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!I(t)&&(e=!1)}),e}function A(t){if(t instanceof Ur&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!A(t)&&(e=!1)}),e}function O(t,e){if(t instanceof Ur&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!O(t,e)&&(n=!1)}),n}function z(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)],r=t[a+1],e===n||e>n&&e<r)return a;if(n<e)i=a+1;else{if(!(n>e))throw new zr("Input is not a number.");o=a-1}}return Math.max(a-1,0)}function R(t,e,n){return t*(1-n)+e*n}function L(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function D(t){return"string"===t.kind||"number"===t.kind||"boolean"===t.kind||"null"===t.kind}function j(t,e){return function(){function n(t,e,n){this.type=wr,this.lhs=t,this.rhs=e,this.collator=n}return n.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var r=e.parse(t[1],1,kr);if(!r)return null;var i=e.parse(t[2],2,kr);if(!i)return null;if(!D(r.type)&&!D(i.type))return e.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+T(r.type)+", "+T(i.type)+") instead.");if(r.type.kind!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare "+T(r.type)+" and "+T(i.type)+".");var o=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,Tr)))return null}return new n(r,i,o)},n.prototype.evaluate=function(t){var n=this.collator?0===this.collator.evaluate(t).compare(this.lhs.evaluate(t),this.rhs.evaluate(t)):this.lhs.evaluate(t)===this.rhs.evaluate(t);return e?!n:n},n.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},n.prototype.possibleOutputs=function(){return[!0,!1]},n.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},n}()}function B(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=P(n,r,i,a);if(s)throw new zr(s);return new Mr(n/255*a,r/255*a,i/255*a,a)}function F(t,e){return t in e}function N(t,e){var n=e[t];return void 0===n?null:n}function V(t,e){var n=e[0],r=e[1];return n.evaluate(t)<r.evaluate(t)}function U(t,e){var n=e[0],r=e[1];return n.evaluate(t)>r.evaluate(t)}function q(t,e){var n=e[0],r=e[1];return n.evaluate(t)<=r.evaluate(t)}function Z(t,e){var n=e[0],r=e[1];return n.evaluate(t)>=r.evaluate(t)}function $(t){return{type:t}}function W(t){return{result:"success",value:t}}function H(t){return{result:"error",value:t}}function G(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function X(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Y(t){return!!t.expression&&t.expression.interpolated}function K(t){return t>li?Math.pow(t,1/3):t/ui+ai}function J(t){return t>si?t*t*t:ui*(t-ai)}function Q(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function tt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function et(t){var e=tt(t.r),n=tt(t.g),r=tt(t.b),i=K((.4124564*e+.3575761*n+.1804375*r)/ri),o=K((.2126729*e+.7151522*n+.072175*r)/ii);return{l:116*o-16,a:500*(i-o),b:200*(o-K((.0193339*e+.119192*n+.9503041*r)/oi)),alpha:t.a}}function nt(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=ii*J(e),n=ri*J(n),r=oi*J(r),new Mr(Q(3.2404542*n-1.5371385*e-.4985314*r),Q(-.969266*n+1.8760108*e+.041556*r),Q(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function rt(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function it(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ot(t){return t}function at(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function st(t,e,n,r,i){return at(typeof n===i?r[n]:void 0,t.default,e.default)}function ut(t,e,n){if("number"!==rt(n))return at(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=pt(t.stops,n);return t.stops[i][1]}function lt(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==rt(n))return at(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=pt(t.stops,n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Wr[e.type]||ot;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=di[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function ct(t,e,n){return"color"===e.type?n=Mr.parse(n):rt(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),at(n,t.default,e.default)}function pt(t,e){for(var n,r,i=0,o=t.length-1,a=0;i<=o;){if(n=t[a=Math.floor((i+o)/2)][0],r=t[a+1][0],e===n||e>n&&e<r)return a;n<e?i=a+1:n>e&&(o=a-1)}return Math.max(a-1,0)}function ht(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ni}function ft(t,e){var n=new Zr(ni,[],function(t){var e={color:Er,string:xr,number:br,enum:xr,boolean:wr};return"array"===t.type?k(e[t.value]||kr,t.length):e[t.type]||null}(e)),r=n.parse(t);return r?W(new yi(r,e)):H(n.errors)}function dt(t,e){if("error"===(t=ft(t,e)).result)return t;var n=t.value.expression,r=I(n);if(!r&&!G(e))return H([new vr("","data expressions not supported")]);var i=O(n,["zoom"]);if(!i&&!X(e))return H([new vr("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof Xr)n=t(e.result);else if(e instanceof Gr)for(var r=0,i=e.args;r<i.length;r+=1){var o=i[r];if(n=t(o))break}else(e instanceof $r||e instanceof Hr)&&e.input instanceof Ur&&"zoom"===e.input.name&&(n=e);return n instanceof vr?n:(e.eachChild(function(e){var r=t(e);r instanceof vr?n=r:!n&&r?n=new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n)}(n);return o||i?o instanceof vr?H([o]):o instanceof Hr&&!Y(e)?H([new vr("",'"interpolate" expressions cannot be used with this property')]):W(o?new vi(r?"camera":"composite",t.value,o):new mi(r?"constant":"source",t.value)):H([new vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function yt(t,e){if(it(t))return new gi(t,e);if(ht(t)){var n=dt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Mr.parse(t)),{kind:"constant",evaluate:function(){return r}}}function mt(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=rt(n);if("object"!==u)return[new mr(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],p=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Bt;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new mr(e,n[l],'unknown property "'+l+'"'));continue}h=Bt}s=s.concat(h({key:(e?e+".":e)+l,value:n[l],valueSpec:p,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new mr(e,n,'missing required property "'+f+'"'));return s}function vt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Bt;if("array"!==rt(e))return[new mr(o,e,"array expected, "+rt(e)+" found")];if(n.length&&e.length!==n.length)return[new mr(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new mr(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value};i.$version<7&&(s.function=n.function),"object"===rt(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function gt(t){var e=t.key,n=t.value,r=t.valueSpec,i=rt(n);return"number"!==i?[new mr(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new mr(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new mr(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function _t(t){function e(t){var e=[],r=t.value,s=t.key;if("array"!==rt(r))return[new mr(s,r,"array expected, "+rt(r)+" found")];if(2!==r.length)return[new mr(s,r,"array length 2 expected, length "+r.length+" found")];if(p){if("object"!==rt(r[0]))return[new mr(s,r,"object expected, "+rt(r[0])+" found")];if(void 0===r[0].zoom)return[new mr(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new mr(s,r,"object stop key must have value")];if(o&&o>E(r[0].zoom))return[new mr(s,r[0].zoom,"stop zoom values must appear in ascending order")];E(r[0].zoom)!==o&&(o=E(r[0].zoom),i=void 0,u={}),e=e.concat(mt({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:gt,value:n}}))}else e=e.concat(n({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return e.concat(Bt({key:s+"[1]",value:r[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=rt(t.value),o=E(t.value),l=null!==t.value?t.value:e;if(r){if(n!==r)return[new mr(t.key,l,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new mr(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var c="number expected, "+n+" found";return G(a)&&void 0===s&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mr(t.key,l,c)]}return"categorical"!==s||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==s&&"number"===n&&void 0!==i&&o<i?[new mr(t.key,l,"stop domain values must appear in ascending order")]:(i=o,"categorical"===s&&o in u?[new mr(t.key,l,"stop domain values must be unique")]:(u[o]=!0,[])):[new mr(t.key,l,"integer expected, found "+o)]}var r,i,o,a=t.valueSpec,s=E(t.value.type),u={},l="categorical"!==s&&void 0===t.value.property,c=!l,p="array"===rt(t.value.stops)&&"array"===rt(t.value.stops[0])&&"object"===rt(t.value.stops[0][0]),h=mt({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new mr(t.key,t.value,'identity function may not have a "stops" property')];var n=[],r=t.value;return n=n.concat(vt({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===rt(r)&&0===r.length&&n.push(new mr(t.key,r,"array must have at least one stop")),n},default:function(t){return Bt({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&l&&h.push(new mr(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||h.push(new mr(t.key,t.value,'missing required property "stops"')),"exponential"===s&&t.valueSpec.expression&&!Y(t.valueSpec)&&h.push(new mr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!G(t.valueSpec)?h.push(new mr(t.key,t.value,"property functions not supported")):l&&!X(t.valueSpec)&&h.push(new mr(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!p||void 0!==t.value.property||h.push(new mr(t.key,t.value,'"property" property is required')),h}function bt(t){var e=("property"===t.expressionContext?dt:ft)(S(t.value),t.valueSpec);return"error"===e.result?e.value.map(function(e){return new mr(""+t.key+e.key,t.value,e.message)}):"property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==e.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new mr(t.key,t.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:"property"!==t.expressionContext||"layout"!==t.propertyType||A(e.value._styleExpression.expression)?[]:[new mr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')]}function xt(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(E(n))&&i.push(new mr(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(E(n))&&i.push(new mr(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function wt(t){if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!wt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function Et(t){if(!t)return function(){return!0};wt(t)||(t=kt(t));var e=ft(t,_i);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,n){return e.value.evaluate(t,n)}}function St(t,e){return t<e?-1:t>e?1:0}function kt(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Tt(t[1],t[2],"=="):"!="===n?Mt(Tt(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Tt(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(kt))):"all"===n?["all"].concat(t.slice(1).map(kt)):"none"===n?["all"].concat(t.slice(1).map(kt).map(Mt)):"in"===n?Ct(t[1],t.slice(2)):"!in"===n?Mt(Ct(t[1],t.slice(2))):"has"===n?Pt(t[1]):"!has"!==n||Mt(Pt(t[1]))}function Tt(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Ct(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(St)]]:["filter-in-small",t,["literal",e]]}}function Pt(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Mt(t){return["!",t]}function It(t){return wt(S(t.value))?bt(w({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==rt(n))return[new mr(r,n,"array expected, "+rt(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new mr(r,n,"filter array must have at least 1 element")];switch(a=a.concat(xt({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),E(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===E(n[1])&&a.push(new mr(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new mr(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=rt(n[1]))&&a.push(new mr(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=rt(n[s]),"$type"===E(n[1])?a=a.concat(xt({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new mr(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=rt(n[1]),2!==n.length?a.push(new mr(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new mr(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function At(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Bt({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new mr(n,o,'unknown property "'+a+'"')];if("string"===rt(o)&&G(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new mr(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new mr(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&it(S(o))&&"identity"===E(o.type)&&p.push(new mr(n,o,'"text-font" does not support identity functions'))),p.concat(Bt({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ot(t){return At(t,"paint")}function zt(t){return At(t,"layout")}function Rt(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new mr(r,n,'either "type" or "ref" is required'));var a,s=E(n.type),u=E(n.ref);if(n.id)for(var l=E(n.id),c=0;c<t.arrayIndex;c++){var p=i.layers[c];E(p.id)===l&&e.push(new mr(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+p.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new mr(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){E(t.id)===u&&(a=t)}),a?a.ref?e.push(new mr(r,n.ref,"ref cannot reference another ref layer")):s=E(a.type):e.push(new mr(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&E(h.type);h?"vector"===f&&"raster"===s?e.push(new mr(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new mr(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new mr(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new mr(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new mr(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new mr(r,n.source,'source "'+n.source+'" not found'))}else e.push(new mr(r,n,'missing required property "source"'));return e=e.concat(mt({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Bt({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:It,layout:function(t){return mt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return zt(w({layerType:s},t))}}})},paint:function(t){return mt({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Ot(w({layerType:s},t))}}})}}}))}function Lt(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new mr(n,e,'"type" is required')];var o=E(e.type),a=[];switch(o){case"vector":case"raster":case"raster-dem":if(a=a.concat(mt({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r})),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&a.push(new mr(n+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":return mt({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r});case"video":return mt({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return mt({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return a.push(new mr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")),a;default:return xt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Dt(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=rt(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new mr("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=u&&r[u[1]]&&r[u[1]].transition?o.concat(Bt({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(Bt({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new mr(s,e[s],'unknown property "'+s+'"')])}return o}function jt(t){var e=t.value,n=t.key,r=rt(e);return"string"!==r?[new mr(n,e,"string expected, "+r+" found")]:[]}function Bt(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&it(E(e))?_t(t):n.expression&&ht(S(e))?bt(t):n.type&&bi[n.type]?bi[n.type](t):mt(w({},t,{valueSpec:n.type?r[n.type]:n}))}function Ft(t){var e=t.value,n=t.key,r=jt(t);return r.length?r:(-1===e.indexOf("{fontstack}")&&r.push(new mr(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new mr(n,e,'"glyphs" url must include a "{range}" token')),r)}function Nt(t,e){e=e||yr;var n=[];return n=n.concat(Bt({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ft,"*":function(){return[]}}})),t.constants&&(n=n.concat(x({key:"constants",value:t.constants,style:t,styleSpec:e}))),Vt(n)}function Vt(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function Ut(t){return function(){return Vt(t.apply(this,arguments))}}function qt(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1){var o=i[r];t.fire(new fr(new Error(o.message))),n=!0}return n}function Zt(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[Ti+o],s=i[Ti+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[Ti+r.length],l=i[Ti+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var p=n/e*t;this.min=-p,this.max=t+p}function $t(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Pi[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function Wt(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ci)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1){var a=o[i];r.push(Wt(a,e))}return r}if("object"==typeof t){var s=t.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l={};if(s.serialize)l._serialized=s.serialize(t,e);else{for(var c in t)if(t.hasOwnProperty(c)&&!(Pi[u].omit.indexOf(c)>=0)){var p=t[c];l[c]=Pi[u].shallow.indexOf(c)>=0?p:Wt(p,e)}t instanceof Error&&(l.message=t.message)}return{name:u,properties:l}}throw new Error("can't serialize object of type "+typeof t)}function Ht(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Ci)return t;if(Array.isArray(t))return t.map(function(t){return Ht(t)});if("object"==typeof t){var e=t,n=e.name,r=e.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=Pi[n].klass;if(!i)throw new Error("can't deserialize unregistered class "+n);if(i.deserialize)return i.deserialize(r._serialized);for(var o=Object.create(i.prototype),a=0,s=Object.keys(r);a<s.length;a+=1){var u=s[a];o[u]=Pi[n].shallow.indexOf(u)>=0?r[u]:Ht(r[u])}return o}throw new Error("can't deserialize object of type "+typeof t)}function Gt(t){for(var e=0,n=t;e<n.length;e+=1)if(Yt(n[e].charCodeAt(0)))return!0;return!1}function Xt(t){return!Oi.Arabic(t)&&!Oi["Arabic Supplement"](t)&&!Oi["Arabic Extended-A"](t)&&!Oi["Arabic Presentation Forms-A"](t)&&!Oi["Arabic Presentation Forms-B"](t)}function Yt(t){return 746===t||747===t||!(t<4352)&&(!!Oi["Bopomofo Extended"](t)||!!Oi.Bopomofo(t)||!(!Oi["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!Oi["CJK Compatibility Ideographs"](t)||!!Oi["CJK Compatibility"](t)||!!Oi["CJK Radicals Supplement"](t)||!!Oi["CJK Strokes"](t)||!(!Oi["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!Oi["CJK Unified Ideographs Extension A"](t)||!!Oi["CJK Unified Ideographs"](t)||!!Oi["Enclosed CJK Letters and Months"](t)||!!Oi["Hangul Compatibility Jamo"](t)||!!Oi["Hangul Jamo Extended-A"](t)||!!Oi["Hangul Jamo Extended-B"](t)||!!Oi["Hangul Jamo"](t)||!!Oi["Hangul Syllables"](t)||!!Oi.Hiragana(t)||!!Oi["Ideographic Description Characters"](t)||!!Oi.Kanbun(t)||!!Oi["Kangxi Radicals"](t)||!!Oi["Katakana Phonetic Extensions"](t)||!(!Oi.Katakana(t)||12540===t)||!(!Oi["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Oi["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!Oi["Unified Canadian Aboriginal Syllabics"](t)||!!Oi["Unified Canadian Aboriginal Syllabics Extended"](t)||!!Oi["Vertical Forms"](t)||!!Oi["Yijing Hexagram Symbols"](t)||!!Oi["Yi Syllables"](t)||!!Oi["Yi Radicals"](t))}function Kt(t){return!(Yt(t)||function(t){return!!(Oi["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Oi["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Oi["Letterlike Symbols"](t)||Oi["Number Forms"](t)||Oi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Oi["Control Pictures"](t)&&9251!==t||Oi["Optical Character Recognition"](t)||Oi["Enclosed Alphanumerics"](t)||Oi["Geometric Shapes"](t)||Oi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Oi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Oi["CJK Symbols and Punctuation"](t)||Oi.Katakana(t)||Oi["Private Use Area"](t)||Oi["CJK Compatibility Forms"](t)||Oi["Small Form Variants"](t)||Oi["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Jt(t,e){return!(!e&&(t>=1424&&t<=2303||Oi["Arabic Presentation Forms-A"](t)||Oi["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||Oi.Khmer(t))}function Qt(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i,o=(i=t.type,Qi[i].BYTES_PER_ELEMENT),a=n=te(n,Math.max(e,o)),s=t.components||1;return r=Math.max(r,o),n+=o*s,{name:t.name,type:t.type,components:s,offset:a}}),size:te(n,Math.max(r,e)),alignment:e}}function te(t,e){return Math.ceil(t/e)*e}function ee(t){return[zo(255*t.r,255*t.g),zo(255*t.b,255*t.a)]}function ne(t,e){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[t]||t.replace(e+"-","").replace(/-/g,"_")}function re(t){for(var e=No/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Vo.min||a.x>Vo.max||a.y<Vo.min||a.y>Vo.max)&&y("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function ie(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function oe(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(de(i,e))return!0;if(pe(e,i,n))return!0}return!1}function ae(t,e){if(1===t.length&&1===t[0].length)return fe(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(fe(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(fe(e,a[s]))return!0;for(var u=0;u<e.length;u++)if(le(a,e[u]))return!0}return!1}function se(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var s=0;s<i.length;s++)if(de(a,i[s]))return!0;if(ue(a,i,n))return!0}return!1}function ue(t,e,n){if(t.length>1){if(le(t,e))return!0;for(var r=0;r<e.length;r++)if(pe(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(pe(t[i],e,n))return!0;return!1}function le(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(ce(r,i,e[o],e[o+1]))return!0;return!1}function ce(t,e,n,r){return m(t,n,r)!==m(e,n,r)&&m(t,e,n)!==m(t,e,r)}function pe(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(he(t,e[i-1],e[i])<r)return!0;return!1}function he(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function fe(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function de(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ye(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).binders[t].statistics.max}function me(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ve(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=or.convert(e);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++){for(var u=t[s],l=[],c=0;c<u.length;c++)l.push(u[c].sub(o._mult(i)));a.push(l)}return a}function ge(){var t=new Zo(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _e(){var t=new Zo(3);return t[0]=0,t[1]=0,t[2]=0,t}function be(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function xe(t,e,n){var r=new Zo(3);return r[0]=t,r[1]=e,r[2]=n,r}function we(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function Ee(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Se(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function ke(){var t=new Zo(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Te(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}function Ce(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Pe(){var t=new Zo(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Me(t,e,n){var r=Ce([],[t.x,t.y,0,1],e);return new or((r[0]/r[3]+1)*n.width*.5,(r[1]/r[3]+1)*n.height*.5)}function Ie(t,e,n,r){var i=e.width,o=e.height;if(r){if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function Ae(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=Ie({},{width:r,height:i},n);Oe(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function Oe(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,p=0;p<i.width*o;p++)s[c+p]=a[l+p];return e}function ze(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new Jo({width:256,height:1},n)}function Re(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,p=c?e[0]*n:t.length,h=Le(t,0,p,n,!0),f=[];if(!h)return f;if(c&&(h=function(t,e,n,r){var i,o,a,s,u,l=[];for(i=0,o=e.length;i<o;i++)a=e[i]*r,s=i<o-1?e[i+1]*r:t.length,(u=Le(t,a,s,r,!1))===u.next&&(u.steiner=!0),l.push($e(u));for(l.sort(Ue),i=0;i<l.length;i++)qe(l[i],n),n=De(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<p;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return je(h,f,n,r,i,l),f}function Le(t,e,n,r,i){var o,a;if(i===nn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Qe(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Qe(o,t[o],t[o+1],a);return a&&Xe(a,a.next)&&(tn(a),a=a.next),a}function De(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Xe(r,r.next)&&0!==Ge(r.prev,r,r.next))r=r.next;else{if(tn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function je(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Ze(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Fe(t,r,i,o):Be(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),tn(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?je(t=Ne(t,e,n),e,n,r,i,o,2):2===a&&Ve(t,e,n,r,i,o):je(De(t),e,n,r,i,o,1);break}}}function Be(t){var e=t.prev,n=t,r=t.next;if(Ge(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(We(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ge(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Fe(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Ge(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,p=Ze(s,u,e,n,r),h=Ze(l,c,e,n,r),f=t.prevZ,d=t.nextZ;f&&f.z>=p&&d&&d.z<=h;){if(f!==t.prev&&f!==t.next&&We(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ge(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&We(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ge(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=p;){if(f!==t.prev&&f!==t.next&&We(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Ge(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=h;){if(d!==t.prev&&d!==t.next&&We(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Ge(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ne(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Xe(i,o)&&Ye(i,r,r.next,o)&&Ke(i,o)&&Ke(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),tn(r),tn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Ve(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&He(a,s)){var u=Je(a,s);return a=De(a,a.next),u=De(u,u.next),je(a,e,n,r,i,o),void je(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Ue(t,e){return t.x-e.x}function qe(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,p=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&We(o<p?i:a,o,c,p,o<p?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Ke(r,t)&&(n=r,h=u),r=r.next;return n}(t,e)){var n=Je(e,t);De(n,n.next)}}function Ze(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $e(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function We(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function He(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ye(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ke(t,e)&&Ke(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Ge(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Xe(t,e){return t.x===e.x&&t.y===e.y}function Ye(t,e,n,r){return!!(Xe(t,e)&&Xe(n,r)||Xe(t,r)&&Xe(n,e))||Ge(t,e,n)>0!=Ge(t,e,r)>0&&Ge(n,r,t)>0!=Ge(n,r,e)>0}function Ke(t,e){return Ge(t.prev,t,t.next)<0?Ge(t,e,t.next)>=0&&Ge(t,t.prev,e)>=0:Ge(t,e,t.prev)<0||Ge(t,t.next,e)<0}function Je(t,e){var n=new en(t.i,t.x,t.y),r=new en(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Qe(t,e,n,r){var i=new en(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function tn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function en(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function rn(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var p=e[n],h=r,f=i;for(on(e,r,n),o(e[i],p)>0&&on(e,r,i);h<f;){for(on(e,h,f),h++,f--;o(e[h],p)<0;)h++;for(;o(e[f],p)>0;)f--}0===o(e[r],p)?on(e,r,f):on(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||an)}function on(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function an(t,e){return t<e?-1:t>e?1:0}function sn(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=v(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(aa(o[u],e,1,o[u].length-1,un),o[u]=o[u].slice(0,e));return o}function un(t,e){return e.area-t.area}function ln(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*ha)+a,i*ha*2,o*ha*2,Math.round(s))}function cn(t,e){return t.x===e.x&&(t.x<0||t.x>No)||t.y===e.y&&(t.y<0||t.y>No)}function pn(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>No})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>No})}function hn(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(fn,this,e)}function fn(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function dn(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],r+=((n=t[a]).x-e.x)*(e.y+n.y);return r}function yn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(mn,this,e),this.length=this._features.length}function mn(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function vn(t,e,n){if(3===t){var r=new ga(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function gn(t,e,n,r,i,o,a){t.emplaceBack(e.x,e.y,r?1:0,i?1:-1,Math.round(xa*n.x)+128,Math.round(xa*n.y)+128,1+(0===o?0:o<0?-1:1)|(a*Ea&63)<<2,a*Ea>>6)}function _n(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(Sa-1)}function bn(t,e){return e>0?e+2*t:t}function xn(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),ji.applyArabicShaping&&(t=ji.applyArabicShaping(t)),t}function wn(t,e){var n=e.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new Bi(t+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=t;)i++;for(var o=i=Math.max(0,i-1);o<r.length&&r[o]<t+1;)o++;o=Math.min(r.length-1,o);var a={min:r[i],max:r[o]};return"composite"===n.kind?{functionType:"composite",zoomRange:a,propertyValue:e.value}:{functionType:"camera",layoutSize:n.evaluate(new Bi(t+1)),zoomRange:a,sizeRange:{min:n.evaluate(new Bi(a.min)),max:n.evaluate(new Bi(a.max))},propertyValue:e.value}}function En(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,s?s[0]:0,s?s[1]:0)}function Sn(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function kn(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function Tn(t){return t.type===kn.Bytes?t.readVarint()+t.pos:t.pos+1}function Cn(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Pn(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Mn(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function In(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function An(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function On(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function zn(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Rn(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Ln(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Dn(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function jn(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Bn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Fn(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Nn(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Vn(t,e,n){1===t&&n.readMessage(Un,e)}function Un(t,e,n){if(3===t){var r=n.readMessage(qn,{}),i=r.id,o=r.bitmap,a=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;e.push({id:i,bitmap:new Ko({width:a+2*ss,height:s+2*ss},o),metrics:{width:a,height:s,left:u,top:l,advance:c}})}}function qn(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Zn(t,e,n,r){(t*=2)<0&&(t=-1*t-1);var i=1<<e;return 32*(i*i*t+i*r+n)+e}function $n(t,e){return e-t}function Wn(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Hn(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Gn(t,e,n,r,i,o){for(var a=null,s=Wn(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],p=Wn(e-c.x,n,i,o)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function Xn(t,e,n,r){if(!n)return[];if(!t)return[];for(var i,o=[],a=function(t,e,n,r){for(var i=0,o=0;o<t.length;o++){var a=r[t.charCodeAt(o)];a&&(i+=a.metrics.advance+e)}return i/Math.max(1,Math.ceil(i/n))}(t,e,n,r),s=0,u=0;u<t.length;u++){var l=t.charCodeAt(u),c=r[l];c&&!ks[l]&&(s+=c.metrics.advance+e),u<t.length-1&&(Ts[l]||!((i=l)<11904)&&(Oi["Bopomofo Extended"](i)||Oi.Bopomofo(i)||Oi["CJK Compatibility Forms"](i)||Oi["CJK Compatibility Ideographs"](i)||Oi["CJK Compatibility"](i)||Oi["CJK Radicals Supplement"](i)||Oi["CJK Strokes"](i)||Oi["CJK Symbols and Punctuation"](i)||Oi["CJK Unified Ideographs Extension A"](i)||Oi["CJK Unified Ideographs"](i)||Oi["Enclosed CJK Letters and Months"](i)||Oi["Halfwidth and Fullwidth Forms"](i)||Oi.Hiragana(i)||Oi["Ideographic Description Characters"](i)||Oi["Kangxi Radicals"](i)||Oi["Katakana Phonetic Extensions"](i)||Oi.Katakana(i)||Oi["Vertical Forms"](i)||Oi["Yi Radicals"](i)||Oi["Yi Syllables"](i)))&&o.push(Gn(u+1,s,a,o,Hn(l,t.charCodeAt(u+1)),!1))}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Gn(t.length,s,a,o,0,!0))}function Yn(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Kn(t,e,n,r,i){if(i){var o=e[t[r].glyph];if(o)for(var a=o.metrics.advance,s=(t[r].x+a)*i,u=n;u<=r;u++)t[u].x-=s}}var Jn=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Qn=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,tr=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,er={now:Jn,frame:function(t){var e=Qn(t);return{cancel:function(){return tr(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(0,0,t.width,t.height)},resolveURL:function(t){var e=self.document.createElement("a");return e.href=t,e.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},supportsWebp:!1};if(self.document){var nr=self.document.createElement("img");nr.onload=function(){er.supportsWebp=!0},nr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="}var rr=r;r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var ir=function(t,e,n){this.column=t,this.row=e,this.zoom=n};ir.prototype.clone=function(){return new ir(this.column,this.row,this.zoom)},ir.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},ir.prototype.sub=function(t){return this.clone()._sub(t)},ir.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},ir.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this};var or=i;i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var ar=a(.25,.1,.25,1),sr=1,ur={},lr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(lr);var cr=function(t){function e(e,n,r){t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),pr=function(t,e){var n=g(t);return n.responseType="arraybuffer",n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){var r=n.response;if(0===r.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:r,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new cr(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},hr=function(t,e){void 0===e&&(e={}),u(this,e),this.type=t},fr=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",u({error:e},n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(hr),dr=function(){};dr.prototype.on=function(t,e){return this._listeners=this._listeners||{},_(t,e,this._listeners),this},dr.prototype.off=function(t,e){return b(t,e,this._listeners),b(t,e,this._oneTimeListeners),this},dr.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},_(t,e,this._oneTimeListeners),this},dr.prototype.fire=function(t){"string"==typeof t&&(t=new hr(t,arguments[1]||{}));var e=t.type;if(this.listens(e)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var i=0,o=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[];i<o.length;i+=1){var a=o[i];b(e,a,this._oneTimeListeners),a.call(this,t)}var s=this._eventedParent;s&&(u(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(t))}else t instanceof fr&&console.error(t.error);return this},dr.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},dr.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var yr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},lineMetrics:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"string",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},mr=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},vr=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),gr=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}};gr.prototype.concat=function(t){return new gr(this,t)},gr.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},gr.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var _r={kind:"null"},br={kind:"number"},xr={kind:"string"},wr={kind:"boolean"},Er={kind:"color"},Sr={kind:"object"},kr={kind:"value"},Tr={kind:"collator"},Cr=[_r,br,xr,wr,Er,Sr,k(kr)],Pr=n(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function i(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return r("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in s)return s[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=r.indexOf("("),l=r.indexOf(")");if(-1!==u&&l+1===r.length){var c=r.substr(0,u),p=r.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=o(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),h];case"hsla":if(4!==p.length)return null;h=o(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,d=o(p[1]),y=o(p[2]),m=y<=.5?y*(d+1):y+d-y*d,v=2*y-m;return[n(255*a(v,m,f+1/3)),n(255*a(v,m,f)),n(255*a(v,m,f-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Mr=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Mr.parse=function(t){if(t){if(t instanceof Mr)return t;if("string"==typeof t){var e=Pr(t);if(e)return new Mr(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Mr.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Mr.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0);var Ir=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ir.prototype.compare=function(t,e){return this.collator.compare(t,e)},Ir.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ar=function(t,e,n){this.type=Tr,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};Ar.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,wr);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,wr);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,xr))?null:new Ar(r,i,o)},Ar.prototype.evaluate=function(t){return new Ir(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Ar.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Ar.prototype.possibleOutputs=function(){return[void 0]},Ar.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Or=function(t,e){this.type=t,this.value=e};Or.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Mr)return!0;if(e instanceof Ir)return!0;if(Array.isArray(e)){for(var n=0,r=e;n<r.length;n+=1)if(!t(r[n]))return!1;return!0}if("object"==typeof e){for(var i in e)if(!t(e[i]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var n=t[1],r=M(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Or(r,n)},Or.prototype.evaluate=function(){return this.value},Or.prototype.eachChild=function(){},Or.prototype.possibleOutputs=function(){return[this.value]},Or.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Mr?["rgba"].concat(this.value.toArray()):this.value};var zr=function(t){this.name="ExpressionEvaluationError",this.message=t};zr.prototype.toJSON=function(){return this.message};var Rr={string:xr,number:br,boolean:wr,object:Sr},Lr=function(t,e){this.type=t,this.args=e};Lr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=Rr[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,kr);if(!a)return null;i.push(a)}return new Lr(r,i)},Lr.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!C(this.type,M(n)))return n;if(e===this.args.length-1)throw new zr("Expected value to be of type "+T(this.type)+", but found "+T(M(n))+" instead.")}return null},Lr.prototype.eachChild=function(t){this.args.forEach(t)},Lr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Lr.prototype.serialize=function(){return[this.type.kind].concat(this.args.map(function(t){return t.serialize()}))};var Dr={string:xr,number:br,boolean:wr},jr=function(t,e){this.type=t,this.input=e};jr.parse=function(t,e){if(t.length<2||t.length>4)return e.error("Expected 1, 2, or 3 arguments, but found "+(t.length-1)+" instead.");var n,r;if(t.length>2){var i=t[1];if("string"!=typeof i||!(i in Dr))return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=Dr[i]}else n=kr;if(t.length>3){if("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2]))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2]}var o=k(n,r),a=e.parse(t[t.length-1],t.length-1,kr);return a?new jr(o,a):null},jr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if(C(this.type,M(e)))throw new zr("Expected value to be of type "+T(this.type)+", but found "+T(M(e))+" instead.");return e},jr.prototype.eachChild=function(t){t(this.input)},jr.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},jr.prototype.serialize=function(){var t=["array"],e=this.type.itemType;if("string"===e.kind||"number"===e.kind||"boolean"===e.kind){t.push(e.kind);var n=this.type.N;"number"==typeof n&&t.push(n)}return t.push(this.input.serialize()),t};var Br={"to-number":br,"to-color":Er},Fr=function(t,e){this.type=t,this.args=e};Fr.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");for(var n=t[0],r=Br[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,kr);if(!a)return null;i.push(a)}return new Fr(r,i)},Fr.prototype.evaluate=function(t){if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1)if(n=null,"string"==typeof(e=i[r].evaluate(t))){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":P(e[0],e[1],e[2],e[3])))return new Mr(e[0]/255,e[1]/255,e[2]/255,e[3]);throw new zr(n||"Could not parse color from value '"+("string"==typeof e?e:JSON.stringify(e))+"'")}for(var a=null,s=0,u=this.args;s<u.length;s+=1)if(null!==(a=u[s].evaluate(t))){var l=Number(a);if(!isNaN(l))return l}throw new zr("Could not convert "+JSON.stringify(a)+" to number.")},Fr.prototype.eachChild=function(t){this.args.forEach(t)},Fr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Fr.prototype.serialize=function(){var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var Nr=["Unknown","Point","LineString","Polygon"],Vr=function(){this._parseColorCache={}};Vr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Vr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Nr[this.feature.type]:this.feature.type:null},Vr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Vr.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Mr.parse(t)),e};var Ur=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Ur.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Ur.prototype.eachChild=function(t){this.args.forEach(t)},Ur.prototype.possibleOutputs=function(){return[void 0]},Ur.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Ur.parse=function(t,e){var n=t[0],r=Ur.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),s=[],u=1;u<t.length;u++){var l=t[u],c=void 0;if(1===a.length){var p=a[0][0];c=Array.isArray(p)?p[u-1]:p.type}var h=e.parse(l,1+s.length,c);if(!h)return null;s.push(h)}for(var f=null,d=0,y=a;d<y.length;d+=1){var m=y[d],v=m[0],g=m[1];if(f=new Zr(e.registry,e.path,null,e.scope),Array.isArray(v)&&v.length!==s.length)f.error("Expected "+v.length+" arguments, but found "+s.length+" instead.");else{for(var _=0;_<s.length;_++){var b=Array.isArray(v)?v[_]:v.type,x=s[_];f.concat(_+1).checkSubtype(b,x.type)}if(0===f.errors.length)return new Ur(n,i,g,s)}}if(1===a.length)e.errors.push.apply(e.errors,f.errors);else{var w=(a.length?a:o).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(T).join(", ")+")":"("+T(e.type)+"...)"}).join(" | "),E=s.map(function(t){return T(t.type)}).join(", ");e.error("Expected arguments of type "+w+", but found ("+E+") instead.")}return null},Ur.register=function(t,e){for(var n in Ur.definitions=e,e)t[n]=Ur};var qr=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};qr.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new qr(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},qr.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},qr.prototype.eachChild=function(){},qr.prototype.possibleOutputs=function(){return[void 0]},qr.prototype.serialize=function(){return["var",this.name]};var Zr=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new gr),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};Zr.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Zr.prototype._parse=function(t,e){if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var i=r.parse(t,this);if(!i)return null;if(this.expectedType){var o=this.expectedType,a=i.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind||"value"!==a.kind)if("array"===o.kind&&"value"===a.kind)e.omitTypeAnnotations||(i=new jr(o,i));else if("color"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(this.expectedType,i.type))return null}else e.omitTypeAnnotations||(i=new Fr(o,[i]));else e.omitTypeAnnotations||(i=new Lr(o,[i]))}if(!(i instanceof Or)&&function t(e){if(e instanceof qr)return t(e.boundExpression);if(e instanceof Ur&&"error"===e.name)return!1;if(e instanceof Ar)return!1;var n=e instanceof Fr||e instanceof Lr||e instanceof jr,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Or}),!!r&&(I(e)&&O(e,["zoom","heatmap-density","line-progress","is-supported-script"]))}(i)){var s=new Vr;try{i=new Or(i.type,i.evaluate(s))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},Zr.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Zr(this.registry,r,e||null,i,this.errors)},Zr.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new vr(r,t))},Zr.prototype.checkSubtype=function(t,e){var n=C(t,e);return n&&this.error(n),n};var $r=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};$r.parse=function(t,e){var n=t[1],r=t.slice(2);if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(n=e.parse(n,1,br)))return null;var i=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType),r.unshift(-1/0);for(var a=0;a<r.length;a+=2){var s=r[a],u=r[a+1],l=a+1,c=a+2;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var p=e.parse(u,c,o);if(!p)return null;o=o||p.type,i.push([s,p])}return new $r(o,n,i)},$r.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[z(e,r)].evaluate(t)},$r.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},$r.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},$r.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Wr=Object.freeze({number:R,color:function(t,e,n){return new Mr(R(t.r,e.r,n),R(t.g,e.g,n),R(t.b,e.b,n),R(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return R(t,e[r],n)})}}),Hr=function(t,e,n,r){this.type=t,this.interpolation=e,this.input=n,this.labels=[],this.outputs=[];for(var i=0,o=r;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}};Hr.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=L(e,t.base,n,r);else if("linear"===t.name)i=L(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new rr(o[0],o[1],o[2],o[3]).solve(L(e,1,n,r))}return i},Hr.parse=function(t,e){var n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,br)))return null;var s=[],u=null;e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var l=0;l<i.length;l+=2){var c=i[l],p=i[l+1],h=l+3,f=l+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(s.length&&s[s.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var d=e.parse(p,f,u);if(!d)return null;u=u||d.type,s.push([c,d])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Hr(u,n,r,s):e.error("Type "+T(u)+" is not interpolatable.")},Hr.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=z(e,r),a=e[o],s=e[o+1],u=Hr.interpolationFactor(this.interpolation,r,a,s),l=n[o].evaluate(t),c=n[o+1].evaluate(t);return Wr[this.type.kind.toLowerCase()](l,c,u)},Hr.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Hr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}));var t},Hr.prototype.serialize=function(){for(var t=["interpolate","linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),this.input.serialize()],e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t};var Gr=function(t,e){this.type=t,this.args=e};Gr.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],u=e.parse(s,1+i.length,n,void 0,{omitTypeAnnotations:!0});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some(function(t){return C(r,t.type)});return new Gr(l?kr:n,i)},Gr.prototype.evaluate=function(t){for(var e=null,n=0,r=this.args;n<r.length&&null===(e=r[n].evaluate(t));n+=1);return e},Gr.prototype.eachChild=function(t){this.args.forEach(t)},Gr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}));var t},Gr.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Xr=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Xr.prototype.evaluate=function(t){return this.result.evaluate(t)},Xr.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},Xr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,void 0,n);return a?new Xr(n,a):null},Xr.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Xr.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};var Yr=function(t,e,n){this.type=t,this.index=e,this.input=n};Yr.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,br),r=e.parse(t[2],2,k(e.expectedType||kr));if(!n||!r)return null;var i=r.type;return new Yr(i.itemType,n,r)},Yr.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new zr("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new zr("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new zr("Array index must be an integer, but found "+e+" instead.");return n[e]},Yr.prototype.eachChild=function(t){t(this.index),t(this.input)},Yr.prototype.possibleOutputs=function(){return[void 0]},Yr.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Kr=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};Kr.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,M(h)))return null}else n=M(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,kr);if(!d)return null;var y=e.parse(t[t.length-1],t.length-1,r);return y?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new Kr(n,r,d,i,o,y):null},Kr.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(M(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Kr.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Kr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Kr.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i],s=r[t.cases[a]];void 0===s?(r[t.cases[a]]=n.length,n.push([t.cases[a],[a]])):n[s][1].push(a)}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=n;l<c.length;l+=1){var p=c[l],h=p[0],f=p[1];1===f.length?e.push(u(f[0])):e.push(f.map(u)),e.push(t.outputs[h].serialize())}return e.push(this.otherwise.serialize()),e};var Jr=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};Jr.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,wr);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new Jr(n,r,s):null},Jr.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},Jr.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},Jr.prototype.possibleOutputs=function(){return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var t},Jr.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Qr=j("==",!1),ti=j("!=",!0),ei=function(t){this.type=br,this.input=t};ei.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+T(n.type)+" instead."):new ei(n):null},ei.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new zr("Expected value to be of type string or array, but found "+T(M(e))+" instead.")},ei.prototype.eachChild=function(t){t(this.input)},ei.prototype.possibleOutputs=function(){return[void 0]},ei.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ni={"==":Qr,"!=":ti,array:jr,at:Yr,boolean:Lr,case:Jr,coalesce:Gr,collator:Ar,interpolate:Hr,length:ei,let:Xr,literal:Or,match:Kr,number:Lr,object:Lr,step:$r,string:Lr,"to-color":Fr,"to-number":Fr,var:qr};Ur.register(ni,{error:[{kind:"error"},[xr],function(t,e){var n=e[0];throw new zr(n.evaluate(t))}],typeof:[xr,[kr],function(t,e){return T(M(e[0].evaluate(t)))}],"to-string":[xr,[kr],function(t,e){var n=e[0],r=typeof(n=n.evaluate(t));return null===n?"":"string"===r||"number"===r||"boolean"===r?String(n):n instanceof Mr?n.toString():JSON.stringify(n)}],"to-boolean":[wr,[kr],function(t,e){var n=e[0];return Boolean(n.evaluate(t))}],"to-rgba":[k(br,4),[Er],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Er,[br,br,br],B],rgba:[Er,[br,br,br,br],B],has:{type:wr,overloads:[[[xr],function(t,e){return F(e[0].evaluate(t),t.properties())}],[[xr,Sr],function(t,e){var n=e[0],r=e[1];return F(n.evaluate(t),r.evaluate(t))}]]},get:{type:kr,overloads:[[[xr],function(t,e){return N(e[0].evaluate(t),t.properties())}],[[xr,Sr],function(t,e){var n=e[0],r=e[1];return N(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[kr,[xr],function(t,e){return N(e[0].evaluate(t),t.featureState||{})}],properties:[Sr,[],function(t){return t.properties()}],"geometry-type":[xr,[],function(t){return t.geometryType()}],id:[kr,[],function(t){return t.id()}],zoom:[br,[],function(t){return t.globals.zoom}],"heatmap-density":[br,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[br,[],function(t){return t.globals.lineProgress||0}],"+":[br,$(br),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[br,$(br),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:br,overloads:[[[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[br],function(t,e){return-e[0].evaluate(t)}]]},"/":[br,[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[br,[br,br],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[br,[],function(){return Math.LN2}],pi:[br,[],function(){return Math.PI}],e:[br,[],function(){return Math.E}],"^":[br,[br,br],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[br,[br],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[br,[br],function(t,e){var n=e[0];return Math.log10(n.evaluate(t))}],ln:[br,[br],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[br,[br],function(t,e){var n=e[0];return Math.log2(n.evaluate(t))}],sin:[br,[br],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[br,[br],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[br,[br],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[br,[br],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[br,[br],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[br,[br],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[br,$(br),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[br,$(br),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[br,[br],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[br,[br],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[br,[br],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[br,[br],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[wr,[xr,kr],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[wr,[kr],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[wr,[xr],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[wr,[xr,kr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[wr,[kr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[wr,[xr,kr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[wr,[kr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[wr,[xr,kr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[wr,[kr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[wr,[xr,kr],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[wr,[kr],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[wr,[kr],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[wr,[],function(t){return null!==t.id()}],"filter-type-in":[wr,[k(xr)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[wr,[k(kr)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[wr,[xr,k(kr)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[wr,[xr,k(kr)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:wr,overloads:[[[br,br],U],[[xr,xr],U],[[xr,xr,Tr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>0}]]},"<":{type:wr,overloads:[[[br,br],V],[[xr,xr],V],[[xr,xr,Tr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<0}]]},">=":{type:wr,overloads:[[[br,br],Z],[[xr,xr],Z],[[xr,xr,Tr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))>=0}]]},"<=":{type:wr,overloads:[[[br,br],q],[[xr,xr],q],[[xr,xr,Tr],function(t,e){var n=e[0],r=e[1];return e[2].evaluate(t).compare(n.evaluate(t),r.evaluate(t))<=0}]]},all:{type:wr,overloads:[[[wr,wr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[$(wr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:wr,overloads:[[[wr,wr],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[$(wr),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[wr,[wr],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[wr,[xr],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[xr,[xr],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[xr,[xr],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[xr,$(xr),function(t,e){return e.map(function(e){return e.evaluate(t)}).join("")}],"resolved-locale":[xr,[Tr],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var ri=.95047,ii=1,oi=1.08883,ai=4/29,si=6/29,ui=3*si*si,li=si*si*si,ci=Math.PI/180,pi=180/Math.PI,hi={forward:et,reverse:nt,interpolate:function(t,e,n){return{l:R(t.l,e.l,n),a:R(t.a,e.a,n),b:R(t.b,e.b,n),alpha:R(t.alpha,e.alpha,n)}}},fi={forward:function(t){var e=et(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*pi;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*ci,n=t.c;return nt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:function(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}(t.h,e.h,n),c:R(t.c,e.c,n),l:R(t.l,e.l,n),alpha:R(t.alpha,e.alpha,n)}}},di=Object.freeze({lab:hi,hcl:fi}),yi=function(t,e){var n;this.expression=t,this._warningHistory={},this._defaultValue="color"===(n=e).type&&it(n.default)?new Mr(0,0,0,0):"color"===n.type?Mr.parse(n.default)||null:void 0===n.default?null:n.default,"enum"===e.type&&(this._enumValues=e.values)};yi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._evaluator||(this._evaluator=new Vr),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},yi.prototype.evaluate=function(t,e,n){this._evaluator||(this._evaluator=new Vr),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new zr("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var mi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!A(e.expression)};mi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},mi.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)};var vi=function(t,e,n){this.kind=t,this.zoomStops=n.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!A(e.expression),n instanceof Hr&&(this._interpolationType=n.interpolation)};vi.prototype.evaluateWithoutErrorHandling=function(t,e,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n)},vi.prototype.evaluate=function(t,e,n){return this._styleExpression.evaluate(t,e,n)},vi.prototype.interpolationFactor=function(t,e,n){return this._interpolationType?Hr.interpolationFactor(this._interpolationType,t,e,n):0};var gi=function(t,e){this._parameters=t,this._specification=e,w(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||void 0!==e.property,l=s||!u,c=e.type||(Y(n)?"exponential":"interval");if(a&&((e=w({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Mr.parse(t[1])]})),e.default?e.default=Mr.parse(e.default):e.default=Mr.parse(n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!di[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=lt;else if("interval"===c)r=ut;else if("categorical"===c){r=st,i=Object.create(null);for(var p=0,h=e.stops;p<h.length;p+=1){var f=h[p];i[f[0]]=f[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=ct}if(s){for(var d={},y=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},y.push(g)),d[g].stops.push([v[0].value,v[1]])}for(var _=[],b=0,x=y;b<x.length;b+=1){var E=x[b];_.push([d[E].zoom,t(d[E],n)])}return{kind:"composite",interpolationFactor:Hr.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:_.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return lt({stops:_,base:e.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?Hr.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return r(e,n,a,i,o)}}:{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?at(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};gi.deserialize=function(t){return new gi(t._parameters,t._specification)},gi.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var _i={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},bi={"*":function(){return[]},array:vt,boolean:function(t){var e=t.value,n=t.key,r=rt(e);return"boolean"!==r?[new mr(n,e,"boolean expected, "+r+" found")]:[]},number:gt,color:function(t){var e=t.key,n=t.value,r=rt(n);return"string"!==r?[new mr(e,n,"color expected, "+r+" found")]:null===Pr(n)?[new mr(e,n,'color expected, "'+n+'" found')]:[]},constants:x,enum:xt,filter:It,function:_t,layer:Rt,object:mt,source:Lt,light:Dt,string:jt};Nt.source=Ut(Lt),Nt.light=Ut(Dt),Nt.layer=Ut(Rt),Nt.filter=Ut(It),Nt.paintProperty=Ut(Ot),Nt.layoutProperty=Ut(zt);var xi=Nt,wi=Nt.light,Ei=Nt.paintProperty,Si=Nt.layoutProperty,ki=Zt,Ti=3;Zt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Zt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zt.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Zt.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{}),a},Zt.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,l=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var h=4*p;t<=l[h+2]&&e<=l[h+3]&&n>=l[h+0]&&r>=l[h+1]?(a[p]=!0,o.push(u[p])):a[p]=!1}}},Zt.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),l=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=l;p++)for(var h=u;h<=c;h++){var f=this.d*h+p;if(i.call(this,t,e,n,r,f,o,a))return}},Zt.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Zt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=Ti+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[Ti+a]=o,i.set(s,o),o+=s.length}return i[Ti+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[Ti+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Ci=self.ImageData,Pi={};for(var Mi in $t("Object",Object),ki.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),n},ki.deserialize=function(t){return new ki(t)},$t("Grid",ki),$t("Color",Mr),$t("Error",Error),$t("StylePropertyFunction",gi),$t("StyleExpression",yi,{omit:["_evaluator"]}),$t("ZoomDependentExpression",vi),$t("ZoomConstantExpression",mi),$t("CompoundExpression",Ur,{omit:["_evaluate"]}),ni)ni[Mi]._classRegistryKey||$t("Expression_"+Mi,ni[Mi]);var Ii=function(){this.first=!0};Ii.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Ai,Oi={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},zi=!1,Ri=null,Li=!1,Di=new dr,ji={applyArabicShaping:null,processBidirectionalText:null,isLoaded:function(){return Li||null!=ji.applyArabicShaping}},Bi=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ii,this.transition={})};Bi.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Jt(r[n].charCodeAt(0),e))return!1;return!0}(t,ji.isLoaded())},Bi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};var Fi=function(t,e){this.property=t,this.value=e,this.expression=yt(void 0===e?t.specification.default:e,t.specification)};Fi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Fi.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Ni=function(t){this.property=t,this.value=new Fi(t,void 0)};Ni.prototype.transitioned=function(t,e){return new Ui(this.property,this.value,e,u({},t.transition,this.transition),t.now)},Ni.prototype.untransitioned=function(){return new Ui(this.property,this.value,null,{},0)};var Vi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Vi.prototype.getValue=function(t){return d(this._values[t].value.value)},Vi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ni(this._values[t].property)),this._values[t].value=new Fi(this._values[t].property,null===e?void 0:d(e))},Vi.prototype.getTransition=function(t){return d(this._values[t].transition)},Vi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Ni(this._values[t].property)),this._values[t].transition=d(e)||void 0},Vi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},Vi.prototype.transitioned=function(t,e){for(var n=new qi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},Vi.prototype.untransitioned=function(){for(var t=new qi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Ui=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Ui.prototype.possiblyEvaluate=function(t){var e=t.now||0,n=this.value.possiblyEvaluate(t),r=this.prior;if(r){if(e>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(e<this.begin)return r.possiblyEvaluate(t);var i=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(t),n,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(i))}return n};var qi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};qi.prototype.possiblyEvaluate=function(t){for(var e=new Wi(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e},qi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var n=e[t];if(this._values[n].prior)return!0}return!1};var Zi=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Zi.prototype.getValue=function(t){return d(this._values[t].value)},Zi.prototype.setValue=function(t,e){this._values[t]=new Fi(this._values[t].property,null===e?void 0:d(e))},Zi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Zi.prototype.possiblyEvaluate=function(t){for(var e=new Wi(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];e._values[i]=this._values[i].possiblyEvaluate(t)}return e};var $i=function(t,e,n){this.property=t,this.value=e,this.globals=n};$i.prototype.isConstant=function(){return"constant"===this.value.kind},$i.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},$i.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.globals,t,e)};var Wi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Wi.prototype.get=function(t){return this._values[t]};var Hi=function(t){this.specification=t};Hi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Hi.prototype.interpolate=function(t,e,n){var r=Wr[this.specification.type];return r?r(t,e,n):t};var Gi=function(t){this.specification=t};Gi.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new $i(this,{kind:"constant",value:t.expression.evaluate(e)},e):new $i(this,t.expression,e)},Gi.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new $i(this,{kind:"constant",value:void 0},t.globals);var r=Wr[this.specification.type];return r?new $i(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.globals):t},Gi.prototype.evaluate=function(t,e,n,r){return"constant"===t.kind?t.value:t.evaluate(e,n,r)};var Xi=function(t){this.specification=t};Xi.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var n=t.expression.evaluate(e);return this._calculate(n,n,n,e)}return this._calculate(t.expression.evaluate(new Bi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Bi(Math.floor(e.zoom),e)),t.expression.evaluate(new Bi(Math.floor(e.zoom+1),e)),e)}},Xi.prototype._calculate=function(t,e,n,r){var i=r.zoom,o=i-Math.floor(i),a=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:t,to:e,fromScale:2,toScale:1,t:o+(1-o)*a}:{from:n,to:e,fromScale:.5,toScale:1,t:1-(1-a)*o}},Xi.prototype.interpolate=function(t){return t};var Yi=function(t){this.specification=t};Yi.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},Yi.prototype.interpolate=function(){return!1};var Ki=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var n=t[e],r=this.defaultPropertyValues[e]=new Fi(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Ni(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};$t("DataDrivenProperty",Gi),$t("DataConstantProperty",Hi),$t("CrossFadedProperty",Xi),$t("ColorRampProperty",Yi);var Ji=function(t){function e(e,n){for(var r in t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.visibility="visible","background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new Zi(n.layout)),this._transitionablePaint=new Vi(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".layout."+t;if(this._validate(Si,r,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility="none"===e?e:"visible"},e.prototype.getPaintProperty=function(t){return p(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(null!=e){var r="layers."+this.id+".paint."+t;if(this._validate(Ei,r,t,e,n))return!1}if(p(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var i=this._transitionablePaint._values[t].value.isDataDriven();this._transitionablePaint.setValue(t,e);var o=this._transitionablePaint._values[t].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(t),o||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(t.layout=t.layout||{},t.layout.visibility="none"),f(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return(!i||!1!==i.validate)&&qt(this,t.call(xi,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:yr,style:{glyphs:!0,sprite:!0}}))},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof $i&&G(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(dr),Qi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},to=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},eo=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};eo.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},eo.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},eo.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},eo.prototype.clear=function(){this.length=0},eo.prototype.resize=function(t){this.reserve(t),this.length=t},eo.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},eo.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=t,this.int16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(eo);no.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",no);var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.int16[o+0]=t,this.int16[o+1]=e,this.int16[o+2]=n,this.int16[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(eo);ro.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",ro);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(eo);io.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",io);var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=6*u,c=12*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=o,this.uint8[c+10]=a,this.uint8[c+11]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=6*t,c=12*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=o,this.uint8[c+9]=a,this.uint8[c+10]=s,this.uint8[c+11]=u,t},e}(eo);oo.prototype.bytesPerElement=12,$t("StructArrayLayout4i4ub12",oo);var ao=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s){var u=this.length;this.resize(u+1);var l=8*u;return this.int16[l+0]=t,this.int16[l+1]=e,this.int16[l+2]=n,this.int16[l+3]=r,this.uint16[l+4]=i,this.uint16[l+5]=o,this.uint16[l+6]=a,this.uint16[l+7]=s,u},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u){var l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=o,this.uint16[l+5]=a,this.uint16[l+6]=s,this.uint16[l+7]=u,t},e}(eo);ao.prototype.bytesPerElement=16,$t("StructArrayLayout4i4ui16",ao);var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=t,this.float32[i+1]=e,this.float32[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(eo);so.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",so);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.uint32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.uint32[n+0]=e,t},e}(eo);uo.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",uo);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var p=this.length;this.resize(p+1);var h=12*p,f=6*p;return this.int16[h+0]=t,this.int16[h+1]=e,this.int16[h+2]=n,this.int16[h+3]=r,this.int16[h+4]=i,this.int16[h+5]=o,this.uint32[f+3]=a,this.uint16[h+8]=s,this.uint16[h+9]=u,this.int16[h+10]=l,this.int16[h+11]=c,p},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,p){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=p,t},e}(eo);lo.prototype.bytesPerElement=24,$t("StructArrayLayout6i1ul2ui2i24",lo);var co=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;this.resize(a+1);var s=6*a;return this.int16[s+0]=t,this.int16[s+1]=e,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=o,a},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(eo);co.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",co);var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=t,this.uint8[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=4*t;return this.uint8[r+0]=e,this.uint8[r+1]=n,t},e}(eo);po.prototype.bytesPerElement=4,$t("StructArrayLayout2ub4",po);var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,p,h,f){var d=this.length;this.resize(d+1);var y=20*d,m=10*d,v=40*d;return this.int16[y+0]=t,this.int16[y+1]=e,this.uint16[y+2]=n,this.uint16[y+3]=r,this.uint32[m+2]=i,this.uint32[m+3]=o,this.uint32[m+4]=a,this.uint16[y+10]=s,this.uint16[y+11]=u,this.uint16[y+12]=l,this.float32[m+7]=c,this.float32[m+8]=p,this.uint8[v+36]=h,this.uint8[v+37]=f,d},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,p,h,f,d){var y=20*t,m=10*t,v=40*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[m+2]=o,this.uint32[m+3]=a,this.uint32[m+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=l,this.uint16[y+12]=c,this.float32[m+7]=p,this.float32[m+8]=h,this.uint8[v+36]=f,this.uint8[v+37]=d,t},e}(eo);ho.prototype.bytesPerElement=40,$t("StructArrayLayout2i2ui3ul3ui2f2ub40",ho);var fo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;this.resize(e+1);var n=1*e;return this.float32[n+0]=t,e},e.prototype.emplace=function(t,e){var n=1*t;return this.float32[n+0]=e,t},e}(eo);fo.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",fo);var yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=t,this.int16[i+1]=e,this.int16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(eo);yo.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",yo);var mo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=2*r,o=4*r;return this.uint32[i+0]=t,this.uint16[o+2]=e,this.uint16[o+3]=n,r},e.prototype.emplace=function(t,e,n,r){var i=2*t,o=4*t;return this.uint32[i+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,t},e}(eo);mo.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",mo);var vo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=t,this.uint16[i+1]=e,this.uint16[i+2]=n,r},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(eo);vo.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",vo);var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=t,this.uint16[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(eo);go.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",go);var _o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=t,this.float32[r+1]=e,n},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(eo);_o.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",_o);var bo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;this.resize(i+1);var o=4*i;return this.float32[o+0]=t,this.float32[o+1]=e,this.float32[o+2]=n,this.float32[o+3]=r,i},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(eo);bo.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",bo);var xo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},n.anchorPoint.get=function(){return new or(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(to);xo.prototype.size=24;var wo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new xo(this,t)},e}(lo);$t("CollisionBoxArray",wo);var Eo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},Object.defineProperties(e.prototype,n),e}(to);Eo.prototype.size=40;var So=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Eo(this,t)},e}(ho);$t("PlacedSymbolArray",So);var ko=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,n),e}(to);ko.prototype.size=4;var To=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new ko(this,t)},e}(fo);$t("GlyphOffsetArray",To);var Co=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(t){this._structArray.int16[this._pos2+0]=t},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(t){this._structArray.int16[this._pos2+1]=t},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,n),e}(to);Co.prototype.size=6;var Po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Co(this,t)},e}(yo);$t("SymbolLineVertexArray",Po);var Mo=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,n),e}(to);Mo.prototype.size=8;var Io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Mo(this,t)},e}(mo);$t("FeatureIndexArray",Io);var Ao=Qt([{name:"a_pos",components:2,type:"Int16"}],4).members,Oo=function(t){void 0===t&&(t=[]),this.segments=t};Oo.prototype.prepareSegment=function(t,e,n){var r=this.segments[this.segments.length-1];return t>Oo.MAX_VERTEX_ARRAY_LENGTH&&y("Max vertices per segment is "+Oo.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>Oo.MAX_VERTEX_ARRAY_LENGTH)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(r)),r},Oo.prototype.get=function(){return this.segments},Oo.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Oo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",Oo);var zo=function(t,e){return 256*(t=s(Math.floor(t),0,255))+(e=s(Math.floor(e),0,255))},Ro=function(t,e,n){this.value=t,this.name=e,this.type=n,this.statistics={max:-1/0}};Ro.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},Ro.prototype.populatePaintArray=function(){},Ro.prototype.updatePaintArray=function(){},Ro.prototype.upload=function(){},Ro.prototype.destroy=function(){},Ro.prototype.setUniforms=function(t,e,n,r){var i=r.constantOr(this.value),o=t.gl;"color"===this.type?o.uniform4f(e.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):o.uniform1f(e.uniforms["u_"+this.name],i)};var Lo=function(t,e,n){this.expression=t,this.name=e,this.type=n,this.statistics={max:-1/0};var r="color"===n?_o:fo;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};Lo.prototype.defines=function(){return[]},Lo.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Bi(0),e,{});if("color"===this.type)for(var o=ee(i),a=r;a<t;a++)n.emplaceBack(o[0],o[1]);else{for(var s=r;s<t;s++)n.emplaceBack(i);this.statistics.max=Math.max(this.statistics.max,i)}},Lo.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var a=ee(o),s=t;s<e;s++)i.emplace(s,a[0],a[1]);else{for(var u=t;u<e;u++)i.emplace(u,o);this.statistics.max=Math.max(this.statistics.max,o)}},Lo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Lo.prototype.setUniforms=function(t,e){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],0)};var Do=function(t,e,n,r,i){this.expression=t,this.name=e,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var o="color"===n?bo:_o;this.paintVertexAttributes=[{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new o};Do.prototype.defines=function(){return[]},Do.prototype.populatePaintArray=function(t,e){var n=this.paintVertexArray,r=n.length;n.reserve(t);var i=this.expression.evaluate(new Bi(this.zoom),e,{}),o=this.expression.evaluate(new Bi(this.zoom+1),e,{});if("color"===this.type)for(var a=ee(i),s=ee(o),u=r;u<t;u++)n.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var l=r;l<t;l++)n.emplaceBack(i,o);this.statistics.max=Math.max(this.statistics.max,i,o)}},Do.prototype.updatePaintArray=function(t,e,n,r){var i=this.paintVertexArray,o=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=ee(o),u=ee(a),l=t;l<e;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=t;c<e;c++)i.emplace(c,o,a);this.statistics.max=Math.max(this.statistics.max,o,a)}},Do.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Do.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Do.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},Do.prototype.setUniforms=function(t,e,n){t.gl.uniform1f(e.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var jo=function(){this.binders={},this.cacheKey="",this._buffers=[],this._idMap={},this._bufferOffset=0};jo.createDynamic=function(t,e,n){var r=new jo,i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof $i&&G(a.property.specification)){var s=ne(o,t.type),u=a.property.specification.type,l=a.property.useIntegerZoom;"constant"===a.value.kind?(r.binders[o]=new Ro(a.value,s,u),i.push("/u_"+s)):"source"===a.value.kind?(r.binders[o]=new Lo(a.value,s,u),i.push("/a_"+s)):(r.binders[o]=new Do(a.value,s,u,l,e),i.push("/z_"+s))}}return r.cacheKey=i.sort().join(""),r},jo.prototype.populatePaintArrays=function(t,e,n){for(var r in this.binders)this.binders[r].populatePaintArray(t,e);if(e.id){var i=String(e.id);this._idMap[i]=this._idMap[i]||[],this._idMap[i].push({index:n,start:this._bufferOffset,end:t})}this._bufferOffset=t},jo.prototype.updatePaintArrays=function(t,e,n){var r=!1;for(var i in t){var o=this._idMap[i];if(o)for(var a=t[i],s=0,u=o;s<u.length;s+=1){var l=u[s],c=e.feature(l.index);for(var p in this.binders){var h=this.binders[p];if(!(h instanceof Ro)&&!0===h.expression.isStateDependent){var f=n.paint.get(p);h.expression=f.value,h.updatePaintArray(l.start,l.end,c,a),r=!0}}}}return r},jo.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},jo.prototype.setUniforms=function(t,e,n,r){for(var i in this.binders)this.binders[i].setUniforms(t,e,r,n.get(i))},jo.prototype.getPaintVertexBuffers=function(){return this._buffers},jo.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Lo||i instanceof Do)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},jo.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var Bo=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=jo.createDynamic(a,n,r),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};Bo.prototype.populatePaintArrays=function(t,e,n){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n);this.needsUpload=!0},Bo.prototype.updatePaintArrays=function(t,e,n){for(var r=0,i=n;r<i.length;r+=1){var o=i[r];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,e,o)||this.needsUpload}},Bo.prototype.get=function(t){return this.programConfigurations[t]},Bo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Bo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},$t("ConstantBinder",Ro),$t("SourceExpressionBinder",Lo),$t("CompositeExpressionBinder",Do),$t("ProgramConfiguration",jo,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Bo);var Fo,No=8192,Vo=(Fo=16,{min:-1*Math.pow(2,Fo-1),max:Math.pow(2,Fo-1)-1}),Uo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new no,this.indexArray=new vo,this.segments=new Oo,this.programConfigurations=new Bo(Ao,t.layers,t.zoom)};Uo.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bi(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},Uo.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},Uo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Uo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ao),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Uo.prototype.addFeature=function(t,e,n){for(var r=0,i=e;r<i.length;r+=1)for(var o=0,a=i[r];o<a.length;o+=1){var s=a[o],u=s.x,l=s.y;if(!(u<0||u>=No||l<0||l>=No)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;ie(this.layoutVertexArray,u,l,-1,-1),ie(this.layoutVertexArray,u,l,1,-1),ie(this.layoutVertexArray,u,l,1,1),ie(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},$t("CircleBucket",Uo,{omit:["layers"]});var qo={paint:new Ki({"circle-radius":new Gi(yr.paint_circle["circle-radius"]),"circle-color":new Gi(yr.paint_circle["circle-color"]),"circle-blur":new Gi(yr.paint_circle["circle-blur"]),"circle-opacity":new Gi(yr.paint_circle["circle-opacity"]),"circle-translate":new Hi(yr.paint_circle["circle-translate"]),"circle-translate-anchor":new Hi(yr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Hi(yr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Hi(yr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gi(yr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gi(yr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gi(yr.paint_circle["circle-stroke-opacity"])})},Zo="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;var $o,Wo=be,Ho=($o=_e(),function(t,e,n,r,i,o){var a,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,a=n;a<s;a+=e)$o[0]=t[a],$o[1]=t[a+1],$o[2]=t[a+2],i($o,$o,o),t[a]=$o[0],t[a+1]=$o[1],t[a+2]=$o[2];return t}),Go=function(){var t=ke();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();_e(),xe(1,0,0),xe(0,1,0),Pe(),Pe(),ge(),function(){var t;(t=new Zo(2))[0]=0,t[1]=0}();var Xo=function(t){function e(e){t.call(this,e,qo)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Uo(t)},e.prototype.queryRadius=function(t){var e=t;return ye("circle-radius",this,e)+ye("circle-stroke-width",this,e)+me(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=ve(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),p=c?u:function(t,e,n){return t.map(function(t){return t.map(function(t){return Me(t,e,n)})})}(u,s,o),h=c?l*a:l,f=0,d=r;f<d.length;f+=1)for(var y=0,m=d[f];y<m.length;y+=1){var v=m[y],g=c?v:Me(v,s,o),_=h,b=Ce([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),oe(p,g,_))return!0}return!1},e}(Ji),Yo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Uo);$t("HeatmapBucket",Yo,{omit:["layers"]});var Ko=function(t,e){Ie(this,t,1,e)};Ko.prototype.resize=function(t){Ae(this,t,1)},Ko.prototype.clone=function(){return new Ko({width:this.width,height:this.height},new Uint8Array(this.data))},Ko.copy=function(t,e,n,r,i){Oe(t,e,n,r,i,1)};var Jo=function(t,e){Ie(this,t,4,e)};Jo.prototype.resize=function(t){Ae(this,t,4)},Jo.prototype.clone=function(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))},Jo.copy=function(t,e,n,r,i){Oe(t,e,n,r,i,4)},$t("AlphaImage",Ko),$t("RGBAImage",Jo);var Qo={paint:new Ki({"heatmap-radius":new Gi(yr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gi(yr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Hi(yr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yi(yr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Hi(yr.paint_heatmap["heatmap-opacity"])})},ta=function(t){function e(e){t.call(this,e,Qo),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new Yo(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=ze(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Ji),ea={paint:new Ki({"hillshade-illumination-direction":new Hi(yr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Hi(yr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Hi(yr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Hi(yr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Hi(yr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Hi(yr.paint_hillshade["hillshade-accent-color"])})},na=function(t){function e(e){t.call(this,e,ea)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Ji),ra=Qt([{name:"a_pos",components:2,type:"Int16"}],4).members,ia=Re,oa=Re;Re.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(nn(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(nn(t,l,c,n))}var p=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;p+=Math.abs((t[h]-t[d])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[d+1]-t[h+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},Re.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},ia.default=oa;var aa=rn,sa=rn;aa.default=sa;var ua=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new no,this.indexArray=new vo,this.indexArray2=new go,this.programConfigurations=new Bo(ra,t.layers,t.zoom),this.segments=new Oo,this.segments2=new Oo};ua.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bi(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},ua.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},ua.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ua.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ra),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ua.prototype.addFeature=function(t,e,n){for(var r=0,i=sn(e,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray),c=l.vertexLength,p=[],h=[],f=0,d=o;f<d.length;f+=1){var y=d[f];if(0!==y.length){y!==o[0]&&h.push(p.length/2);var m=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),v=m.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(v+y.length-1,v),p.push(y[0].x),p.push(y[0].y);for(var g=1;g<y.length;g++)this.layoutVertexArray.emplaceBack(y[g].x,y[g].y),this.indexArray2.emplaceBack(v+g-1,v+g),p.push(y[g].x),p.push(y[g].y);m.vertexLength+=y.length,m.primitiveLength+=y.length}}for(var _=ia(p,h),b=0;b<_.length;b+=3)this.indexArray.emplaceBack(c+_[b],c+_[b+1],c+_[b+2]);l.vertexLength+=a,l.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},$t("FillBucket",ua,{omit:["layers"]});var la={paint:new Ki({"fill-antialias":new Hi(yr.paint_fill["fill-antialias"]),"fill-opacity":new Gi(yr.paint_fill["fill-opacity"]),"fill-color":new Gi(yr.paint_fill["fill-color"]),"fill-outline-color":new Gi(yr.paint_fill["fill-outline-color"]),"fill-translate":new Hi(yr.paint_fill["fill-translate"]),"fill-translate-anchor":new Hi(yr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xi(yr.paint_fill["fill-pattern"])})},ca=function(t){function e(e){t.call(this,e,la)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(t){this.paint=this._transitioningPaint.possiblyEvaluate(t);var e=this.paint._values["fill-outline-color"];"constant"===e.value.kind&&void 0===e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ua(t)},e.prototype.queryRadius=function(){return me(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return ae(ve(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e}(Ji),pa=Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ha=Math.pow(2,13),fa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new io,this.indexArray=new vo,this.programConfigurations=new Bo(pa,t.layers,t.zoom),this.segments=new Oo};fa.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bi(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},fa.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},fa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,pa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},fa.prototype.addFeature=function(t,e,n){for(var r=0,i=sn(e,500);r<i.length;r+=1){for(var o=i[r],a=0,s=0,u=o;s<u.length;s+=1)a+=u[s].length;for(var l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),c=0,p=o;c<p.length;c+=1){var h=p[c];if(0!==h.length&&!pn(h))for(var f=0,d=0;d<h.length;d++){var y=h[d];if(d>=1){var m=h[d-1];if(!cn(y,m)){l.vertexLength+4>Oo.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=y.sub(m)._perp()._unit(),g=m.dist(y);f+g>32768&&(f=0),ln(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,f),ln(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,f),f+=g,ln(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,0,f),ln(this.layoutVertexArray,m.x,m.y,v.x,v.y,0,1,f);var _=l.vertexLength;this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_+1,_+2,_+3),l.vertexLength+=4,l.primitiveLength+=2}}}}l.vertexLength+a>Oo.MAX_VERTEX_ARRAY_LENGTH&&(l=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray));for(var b=[],x=[],w=l.vertexLength,E=0,S=o;E<S.length;E+=1){var k=S[E];if(0!==k.length){k!==o[0]&&x.push(b.length/2);for(var T=0;T<k.length;T++){var C=k[T];ln(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),b.push(C.x),b.push(C.y)}}}for(var P=ia(b,x),M=0;M<P.length;M+=3)this.indexArray.emplaceBack(w+P[M],w+P[M+1],w+P[M+2]);l.primitiveLength+=P.length/3,l.vertexLength+=a}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n)},$t("FillExtrusionBucket",fa,{omit:["layers"]});var da={paint:new Ki({"fill-extrusion-opacity":new Hi(yr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gi(yr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Hi(yr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Hi(yr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xi(yr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gi(yr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gi(yr["paint_fill-extrusion"]["fill-extrusion-base"])})},ya=function(t){function e(e){t.call(this,e,da)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new fa(t)},e.prototype.queryRadius=function(){return me(this.paint.get("fill-extrusion-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return ae(ve(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),r)},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},e.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},e}(Ji),ma=Qt([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,va=hn;hn.types=["Unknown","Point","LineString","Polygon"],hn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new or(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},hn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},hn.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+u)/a;t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,l=this.loadGeometry(),c=hn.types[this.type];switch(this.type){case 1:var p=[];for(i=0;i<l.length;i++)p[i]=l[i][0];r(l=p);break;case 2:for(i=0;i<l.length;i++)r(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=dn(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),i=0;i<l.length;i++)for(o=0;o<l[i].length;o++)r(l[i][o])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ga=yn;yn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new va(this._pbf,e,this.extent,this._keys,this._values)};var _a={VectorTile:function(t,e){this.layers=t.readFields(vn,{},e)},VectorTileFeature:va,VectorTileLayer:ga},ba=_a.VectorTileFeature.types,xa=63,wa=Math.cos(Math.PI/180*37.5),Ea=.5,Sa=Math.pow(2,14)/Ea,ka=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.layoutVertexArray=new oo,this.indexArray=new vo,this.programConfigurations=new Bo(ma,t.layers,t.zoom),this.segments=new Oo};ka.prototype.populate=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],o=i.feature,a=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new Bi(this.zoom),o)){var u=re(o);this.addFeature(o,u,a),e.featureIndex.insert(o,u,a,s,this.index)}}},ka.prototype.update=function(t,e){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers)},ka.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ka.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ka.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ma),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ka.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ka.prototype.addFeature=function(t,e,n){for(var r=this.layers[0].layout,i=r.get("line-join").evaluate(t,{}),o=r.get("line-cap"),a=r.get("line-miter-limit"),s=r.get("line-round-limit"),u=0,l=e;u<l.length;u+=1){var c=l[u];this.addLine(c,t,i,o,a,s,n)}},ka.prototype.addLine=function(t,e,n,r,i,o,a){var s=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(s={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===ba[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(u?3:2))){s&&(s.tileTotal=function(t,e,n){for(var r,i,o=0,a=e;a<n-1;a++)r=t[a],i=t[a+1],o+=r.dist(i);return o}(t,c,l)),"bevel"===n&&(i=1.05);var p=No/(512*this.overscaling)*15,h=t[c],f=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var d,y,m,v=r,g=u?"butt":r,_=!0,b=void 0,x=void 0,w=void 0,E=void 0;this.e1=this.e2=this.e3=-1,u&&(d=t[l-2],E=h.sub(d)._unit()._perp());for(var S=c;S<l;S++)if(!(x=u&&S===l-1?t[c+1]:t[S+1])||!t[S].equals(x)){E&&(w=E),d&&(b=d),d=t[S],E=x?x.sub(d)._unit()._perp():w;var k=(w=w||E).add(E);0===k.x&&0===k.y||k._unit();var T=k.x*E.x+k.y*E.y,C=0!==T?1/T:1/0,P=T<wa&&b&&x;if(P&&S>c){var M=d.dist(b);if(M>2*p){var I=d.sub(d.sub(b)._mult(p/M)._round());this.distance+=I.dist(b),this.addCurrentVertex(I,this.distance,w.mult(1),0,0,!1,f,s),b=I}}var A=b&&x,O=A?n:x?v:g;if(A&&"round"===O&&(C<o?O="miter":C<=2&&(O="fakeround")),"miter"===O&&C>i&&(O="bevel"),"bevel"===O&&(C>2&&(O="flipbevel"),C<i&&(O="miter")),b&&(this.distance+=d.dist(b)),"miter"===O)k._mult(C),this.addCurrentVertex(d,this.distance,k,0,0,!1,f,s);else if("flipbevel"===O){if(C>100)k=E.clone().mult(-1);else{var z=w.x*E.y-w.y*E.x>0?-1:1,R=C*w.add(E).mag()/w.sub(E).mag();k._perp()._mult(R*z)}this.addCurrentVertex(d,this.distance,k,0,0,!1,f,s),this.addCurrentVertex(d,this.distance,k.mult(-1),0,0,!1,f,s)}else if("bevel"===O||"fakeround"===O){var L=w.x*E.y-w.y*E.x>0,D=-Math.sqrt(C*C-1);if(L?(m=0,y=D):(y=0,m=D),_||this.addCurrentVertex(d,this.distance,w,y,m,!1,f,s),"fakeround"===O){for(var j=Math.floor(8*(.5-(T-.5))),B=void 0,F=0;F<j;F++)B=E.mult((F+1)/(j+1))._add(w)._unit(),this.addPieSliceVertex(d,this.distance,B,L,f,s);this.addPieSliceVertex(d,this.distance,k,L,f,s);for(var N=j-1;N>=0;N--)B=w.mult((N+1)/(j+1))._add(E)._unit(),this.addPieSliceVertex(d,this.distance,B,L,f,s)}x&&this.addCurrentVertex(d,this.distance,E,-y,-m,!1,f,s)}else"butt"===O?(_||this.addCurrentVertex(d,this.distance,w,0,0,!1,f,s),x&&this.addCurrentVertex(d,this.distance,E,0,0,!1,f,s)):"square"===O?(_||(this.addCurrentVertex(d,this.distance,w,1,1,!1,f,s),this.e1=this.e2=-1),x&&this.addCurrentVertex(d,this.distance,E,-1,-1,!1,f,s)):"round"===O&&(_||(this.addCurrentVertex(d,this.distance,w,0,0,!1,f,s),this.addCurrentVertex(d,this.distance,w,1,1,!0,f,s),this.e1=this.e2=-1),x&&(this.addCurrentVertex(d,this.distance,E,-1,-1,!0,f,s),this.addCurrentVertex(d,this.distance,E,0,0,!1,f,s)));if(P&&S<l-1){var V=d.dist(x);if(V>2*p){var U=d.add(x.sub(d)._mult(p/V)._round());this.distance+=U.dist(d),this.addCurrentVertex(U,this.distance,E.mult(1),0,0,!1,f,s),d=U}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a)}},ka.prototype.addCurrentVertex=function(t,e,n,r,i,o,a,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(e=_n(e,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),gn(l,t,u,o,!1,r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),gn(l,t,u,o,!0,-i,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>Sa/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,r,i,o,a))},ka.prototype.addPieSliceVertex=function(t,e,n,r,i,o){n=n.mult(r?-1:1);var a=this.layoutVertexArray,s=this.indexArray;o&&(e=_n(e,o)),gn(a,t,n,!1,r,0,e),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},$t("LineBucket",ka,{omit:["layers"]});var Ta=new Ki({"line-cap":new Hi(yr.layout_line["line-cap"]),"line-join":new Gi(yr.layout_line["line-join"]),"line-miter-limit":new Hi(yr.layout_line["line-miter-limit"]),"line-round-limit":new Hi(yr.layout_line["line-round-limit"])}),Ca={paint:new Ki({"line-opacity":new Gi(yr.paint_line["line-opacity"]),"line-color":new Gi(yr.paint_line["line-color"]),"line-translate":new Hi(yr.paint_line["line-translate"]),"line-translate-anchor":new Hi(yr.paint_line["line-translate-anchor"]),"line-width":new Gi(yr.paint_line["line-width"]),"line-gap-width":new Gi(yr.paint_line["line-gap-width"]),"line-offset":new Gi(yr.paint_line["line-offset"]),"line-blur":new Gi(yr.paint_line["line-blur"]),"line-dasharray":new Xi(yr.paint_line["line-dasharray"]),"line-pattern":new Xi(yr.paint_line["line-pattern"]),"line-gradient":new Yi(yr.paint_line["line-gradient"])}),layout:Ta},Pa=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Bi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=u({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Gi))(Ca.paint.properties["line-width"].specification);Pa.useIntegerZoom=!0;var Ma=function(t){function e(e){t.call(this,e,Ca)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=ze(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=Pa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ka(t)},e.prototype.queryRadius=function(t){var e=t,n=bn(ye("line-width",this,e),ye("line-gap-width",this,e)),r=ye("line-offset",this,e);return n/2+Math.abs(r)+me(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=ve(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*bn(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(r=function(t,e){for(var n=[],r=new or(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s-1],l=o[s],c=o[s+1],p=0===s?r:l.sub(u)._unit()._perp(),h=s===o.length-1?r:c.sub(l)._unit()._perp(),f=p._add(h)._unit(),d=f.x*h.x+f.y*h.y;f._mult(1/d),a.push(f._mult(e)._add(l))}n.push(a)}return n}(r,l*a)),se(s,r,u)},e}(Ji),Ia=Qt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Aa=Qt([{name:"a_projected_pos",components:3,type:"Float32"}],4),Oa=(Qt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qt([{name:"a_placed",components:2,type:"Uint8"}],4)),za=(Qt([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ra=Qt([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);Qt([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),Qt([{type:"Float32",name:"offsetX"}]),Qt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var La={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Da=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(or);$t("Anchor",Da);var ja=_a.VectorTileFeature.types,Ba=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Fa=function(t){this.layoutVertexArray=new ao,this.indexArray=new vo,this.programConfigurations=t,this.segments=new Oo,this.dynamicLayoutVertexArray=new so,this.opacityVertexArray=new uo,this.placedSymbolArray=new So};Fa.prototype.upload=function(t,e,n,r){n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ia.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Aa.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ba,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t)},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},$t("SymbolBuffers",Fa);var Na=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Oo,this.collisionVertexArray=new po};Na.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Oa.members,!0)},Na.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},$t("CollisionBuffers",Na);var Va=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wn(this.zoom,e["text-size"]),this.iconSizeData=wn(this.zoom,e["icon-size"]);var n=this.layers[0].layout;this.sortFeaturesByY=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sourceID=t.sourceID};Va.prototype.createArrays=function(){this.text=new Fa(new Bo(Ia.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Fa(new Bo(Ia.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Na(co,za.members,go),this.collisionCircle=new Na(co,Ra.members,vo),this.glyphOffsetArray=new To,this.lineVertexArray=new Po},Va.prototype.populate=function(t,e){var n=this.layers[0],r=n.layout,i=r.get("text-font"),o=r.get("text-field"),a=r.get("icon-image"),s=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==a.value.kind||a.value.value&&a.value.value.length>0;if(this.features=[],s||u){for(var l=e.iconDependencies,c=e.glyphDependencies,p=new Bi(this.zoom),h=0,f=t;h<f.length;h+=1){var d=f[h],y=d.feature,m=d.index,v=d.sourceLayerIndex;if(n._featureFilter(p,y)){var g=void 0;s&&(g=xn(g=n.getValueAndResolveTokens("text-field",y),n,y));var _=void 0;if(u&&(_=n.getValueAndResolveTokens("icon-image",y)),g||_){var b={text:g,icon:_,index:m,sourceLayerIndex:v,geometry:re(y),properties:y.properties,type:ja[y.type]};if(void 0!==y.id&&(b.id=y.id),this.features.push(b),_&&(l[_]=!0),g)for(var x=i.evaluate(y,{}).join(","),w=c[x]=c[x]||{},E="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),S=Gt(g),k=0;k<g.length;k++)if(w[g.charCodeAt(k)]=!0,E&&S){var T=La[g.charAt(k)];T&&(w[T.charCodeAt(0)]=!0)}}}}"line"===r.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.text;if(h){var f=i(h,p),d=i(h,p,!0);if(f in a&&d in o&&a[f]!==o[d]){var y=r(f,d,p),m=n(f,d,s[y].geometry);delete o[f],delete a[d],a[i(h,s[m].geometry,!0)]=m,s[y].geometry=null}else f in a?n(f,d,p):d in o?r(f,d,p):(e(l),o[f]=u-1,a[d]=u-1)}else e(l)}return s.filter(function(t){return t.geometry})}(this.features))}},Va.prototype.update=function(t,e){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers))},Va.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Va.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Va.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Va.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Va.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Va.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l){for(var c=t.indexArray,p=t.layoutVertexArray,h=t.dynamicLayoutVertexArray,f=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray),d=this.glyphOffsetArray.length,y=f.vertexLength,m=0,v=e;m<v.length;m+=1){var g=v[m],_=g.tl,b=g.tr,x=g.bl,w=g.br,E=g.tex,S=f.vertexLength,k=g.glyphOffset[1];En(p,s.x,s.y,_.x,k+_.y,E.x,E.y,n),En(p,s.x,s.y,b.x,k+b.y,E.x+E.w,E.y,n),En(p,s.x,s.y,x.x,k+x.y,E.x,E.y+E.h,n),En(p,s.x,s.y,w.x,k+w.y,E.x+E.w,E.y+E.h,n),Sn(h,s,0),c.emplaceBack(S,S+1,S+2),c.emplaceBack(S+1,S+2,S+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,y,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,!1),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,o,o.index)},Va.prototype._addCollisionDebugVertex=function(t,e,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},Va.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a,s){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=u.vertexLength,c=i.layoutVertexArray,p=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,p,o,a.anchor,new or(t,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(n,e)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(n,r)),this._addCollisionDebugVertex(c,p,o,a.anchor,new or(t,r)),u.vertexLength+=4,s){var h=i.indexArray;h.emplaceBack(l,l+1,l+2),h.emplaceBack(l,l+2,l+3),u.primitiveLength+=2}else{var f=i.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),u.primitiveLength+=4}},Va.prototype.generateCollisionDebugBuffers=function(){for(var t=0,e=this.symbolInstances;t<e.length;t+=1){var n=e[t];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var r=0;r<2;r++){var i=n[0===r?"textCollisionFeature":"iconCollisionFeature"];if(i)for(var o=i.boxStartIndex;o<i.boxEndIndex;o++){var a=this.collisionBoxArray.get(o),s=a.x1,u=a.y1,l=a.x2,c=a.y2,p=a.radius>0;this.addCollisionDebugVertices(s,u,l,c,p?this.collisionCircle:this.collisionBox,a.anchorPoint,n,p)}}}},Va.prototype.deserializeCollisionBoxes=function(t,e,n,r,i){for(var o={},a=e;a<n;a++){var s=t.get(a);if(0===s.radius){o.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},o.textFeatureIndex=s.featureIndex;break}o.textCircles||(o.textCircles=[],o.textFeatureIndex=s.featureIndex),o.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=t.get(u);if(0===l.radius){o.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},o.iconFeatureIndex=l.featureIndex;break}}return o},Va.prototype.hasTextData=function(){return this.text.segments.get().length>0},Va.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Va.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Va.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Va.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&(this.sortedAngle=t,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(t),o=Math.cos(t);n.sort(function(t,n){var r=e.symbolInstances[t],a=e.symbolInstances[n];return(0|Math.round(i*r.anchor.x+o*r.anchor.y))-(0|Math.round(i*a.anchor.x+o*a.anchor.y))||a.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var a=0,s=n;a<s.length;a+=1){var u=s[a],l=e.symbolInstances[u];e.featureSortOrder.push(l.featureIndex);for(var c=0,p=l.placedTextSymbolIndices;c<p.length;c+=1)for(var h=p[c],f=e.text.placedSymbolArray.get(h),d=f.vertexStartIndex+4*f.numGlyphs,y=f.vertexStartIndex;y<d;y+=4)e.text.indexArray.emplaceBack(y,y+1,y+2),e.text.indexArray.emplaceBack(y+1,y+2,y+3);var m=e.icon.placedSymbolArray.get(u);if(m.numGlyphs){var v=m.vertexStartIndex;e.icon.indexArray.emplaceBack(v,v+1,v+2),e.icon.indexArray.emplaceBack(v+1,v+2,v+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},$t("SymbolBucket",Va,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),Va.MAX_GLYPHS=65535,Va.addDynamicAttributes=Sn;var Ua=new Ki({"symbol-placement":new Hi(yr.layout_symbol["symbol-placement"]),"symbol-spacing":new Hi(yr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Hi(yr.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new Hi(yr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Hi(yr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Hi(yr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Hi(yr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gi(yr.layout_symbol["icon-size"]),"icon-text-fit":new Hi(yr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Hi(yr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gi(yr.layout_symbol["icon-image"]),"icon-rotate":new Gi(yr.layout_symbol["icon-rotate"]),"icon-padding":new Hi(yr.layout_symbol["icon-padding"]),"icon-keep-upright":new Hi(yr.layout_symbol["icon-keep-upright"]),"icon-offset":new Gi(yr.layout_symbol["icon-offset"]),"icon-anchor":new Gi(yr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Hi(yr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Hi(yr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Hi(yr.layout_symbol["text-rotation-alignment"]),"text-field":new Gi(yr.layout_symbol["text-field"]),"text-font":new Gi(yr.layout_symbol["text-font"]),"text-size":new Gi(yr.layout_symbol["text-size"]),"text-max-width":new Gi(yr.layout_symbol["text-max-width"]),"text-line-height":new Hi(yr.layout_symbol["text-line-height"]),"text-letter-spacing":new Gi(yr.layout_symbol["text-letter-spacing"]),"text-justify":new Gi(yr.layout_symbol["text-justify"]),"text-anchor":new Gi(yr.layout_symbol["text-anchor"]),"text-max-angle":new Hi(yr.layout_symbol["text-max-angle"]),"text-rotate":new Gi(yr.layout_symbol["text-rotate"]),"text-padding":new Hi(yr.layout_symbol["text-padding"]),"text-keep-upright":new Hi(yr.layout_symbol["text-keep-upright"]),"text-transform":new Gi(yr.layout_symbol["text-transform"]),"text-offset":new Gi(yr.layout_symbol["text-offset"]),"text-allow-overlap":new Hi(yr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Hi(yr.layout_symbol["text-ignore-placement"]),"text-optional":new Hi(yr.layout_symbol["text-optional"])}),qa={paint:new Ki({"icon-opacity":new Gi(yr.paint_symbol["icon-opacity"]),"icon-color":new Gi(yr.paint_symbol["icon-color"]),"icon-halo-color":new Gi(yr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gi(yr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gi(yr.paint_symbol["icon-halo-blur"]),"icon-translate":new Hi(yr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Hi(yr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gi(yr.paint_symbol["text-opacity"]),"text-color":new Gi(yr.paint_symbol["text-color"]),"text-halo-color":new Gi(yr.paint_symbol["text-halo-color"]),"text-halo-width":new Gi(yr.paint_symbol["text-halo-width"]),"text-halo-blur":new Gi(yr.paint_symbol["text-halo-blur"]),"text-translate":new Hi(yr.paint_symbol["text-translate"]),"text-translate-anchor":new Hi(yr.paint_symbol["text-translate-anchor"])}),layout:Ua},Za=function(t){function e(e){t.call(this,e,qa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var n,r=this.layout.get(t).evaluate(e,{}),i=this._unevaluatedLayout._values[t];return i.isDataDriven()||ht(i.value)?r:(n=e.properties,r.replace(/{([^{}]+)}/g,function(t,e){return e in n?String(n[e]):""}))},e.prototype.createBucket=function(t){return new Va(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(Ji),$a={paint:new Ki({"background-color":new Hi(yr.paint_background["background-color"]),"background-pattern":new Xi(yr.paint_background["background-pattern"]),"background-opacity":new Hi(yr.paint_background["background-opacity"])})},Wa=function(t){function e(e){t.call(this,e,$a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ji),Ha={paint:new Ki({"raster-opacity":new Hi(yr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Hi(yr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Hi(yr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Hi(yr.paint_raster["raster-brightness-max"]),"raster-saturation":new Hi(yr.paint_raster["raster-saturation"]),"raster-contrast":new Hi(yr.paint_raster["raster-contrast"]),"raster-resampling":new Hi(yr.paint_raster["raster-resampling"]),"raster-fade-duration":new Hi(yr.paint_raster["raster-fade-duration"])})},Ga={circle:Xo,heatmap:ta,hillshade:na,fill:ca,"fill-extrusion":ya,line:Ma,symbol:Za,background:Wa,raster:function(t){function e(e){t.call(this,e,Ha)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ji)},Xa=n(function(t,e){t.exports=function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o,a=[],s=0;s<t.length;s++)if(n=t[s].w||t[s].width,r=t[s].h||t[s].height,i=t[s].id,n&&r){if(!(o=this.packOne(n,r,i)))continue;e.inPlace&&(t[s].x=o.x,t[s].y=o.y,t[s].id=o.id),a.push(o)}return this.shrink(),a},t.prototype.packOne=function(t,n,r){var i,o,a,s,u,l,c,p,h={freebin:-1,shelf:-1,waste:1/0},f=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(n===(i=this.freebins[s]).maxh&&t===i.maxw)return this.allocFreebin(s,t,n,r);n>i.maxh||t>i.maxw||n<=i.maxh&&t<=i.maxw&&(a=i.maxw*i.maxh-t*n)<h.waste&&(h.waste=a,h.freebin=s)}for(s=0;s<this.shelves.length;s++)if(f+=(o=this.shelves[s]).h,!(t>o.free)){if(n===o.h)return this.allocShelf(s,t,n,r);n>o.h||n<o.h&&(a=(o.h-n)*t)<h.waste&&(h.freebin=-1,h.waste=a,h.shelf=s)}return-1!==h.freebin?this.allocFreebin(h.freebin,t,n,r):-1!==h.shelf?this.allocShelf(h.shelf,t,n,r):n<=this.h-f&&t<=this.w?(o=new e(f,this.w,n),this.allocShelf(this.shelves.push(o)-1,t,n,r)):this.autoResize?(u=l=this.h,((c=p=this.w)<=u||t>c)&&(p=2*Math.max(t,c)),(u<c||n>u)&&(l=2*Math.max(n,u)),this.resize(p,l),this.packOne(t,n,r)):null},t.prototype.allocFreebin=function(t,e,n,r){var i=this.freebins.splice(t,1)[0];return i.id=r,i.w=e,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},t.prototype.allocShelf=function(t,e,n,r){var i=this.shelves[t].alloc(e,n,r);return this.bins[r]=i,this.ref(i),i},t.prototype.shrink=function(){if(this.shelves.length>0){for(var t=0,e=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];e+=r.h,t=Math.max(r.w-r.free,t)}this.resize(t,e)}},t.prototype.getBin=function(t){return this.bins[t]},t.prototype.ref=function(t){if(1==++t.refcount){var e=t.h;this.stats[e]=1+(0|this.stats[e])}return t.refcount},t.prototype.unref=function(t){return 0===t.refcount?0:(0==--t.refcount&&(this.stats[t.h]--,delete this.bins[t.id],this.freebins.push(t)),t.refcount)},t.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e,n){if(t>this.free||e>this.h)return null;var r=this.x;return this.x+=t,this.free-=t,new function(t,e,n,r,i,o,a){this.id=t,this.x=e,this.y=n,this.w=r,this.h=i,this.maxw=o||r,this.maxh=a||i,this.refcount=0}(n,r,this.y,t,e,t,this.h)},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t}()}),Ya=function(t,e){var n=e.pixelRatio;this.paddedRect=t,this.pixelRatio=n},Ka={tl:{configurable:!0},br:{configurable:!0},displaySize:{configurable:!0}};Ka.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ka.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ka.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ya.prototype,Ka);var Ja=function(t){var e=new Jo({width:0,height:0}),n={},r=new Xa(0,0,{autoResize:!0});for(var i in t){var o=t[i],a=r.packOne(o.data.width+2,o.data.height+2);e.resize({width:r.w,height:r.h}),Jo.copy(o.data,e,{x:0,y:0},{x:a.x+1,y:a.y+1},o.data),n[i]=new Ya(a,o)}r.shrink(),e.resize({width:r.w,height:r.h}),this.image=e,this.positions=n};$t("ImagePosition",Ya),$t("ImageAtlas",Ja);var Qa=self.HTMLImageElement,ts=self.HTMLCanvasElement,es=self.HTMLVideoElement,ns=self.ImageData,rs=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};rs.prototype.update=function(t,e){var n=t.width,r=t.height,i=!this.size||this.size[0]!==n||this.size[1]!==r,o=this.context,a=o.gl;this.useMipmap=Boolean(e&&e.useMipmap),a.bindTexture(a.TEXTURE_2D,this.texture),i?(this.size=[n,r],o.pixelStoreUnpack.set(1),this.format!==a.RGBA||e&&!1===e.premultiply||o.pixelStoreUnpackPremultiplyAlpha.set(!0),t instanceof Qa||t instanceof ts||t instanceof es||t instanceof ns?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,n,r,0,this.format,a.UNSIGNED_BYTE,t.data)):t instanceof Qa||t instanceof ts||t instanceof es||t instanceof ns?a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,0,0,n,r,a.RGBA,a.UNSIGNED_BYTE,t.data),this.useMipmap&&this.isSizePowerOfTwo()&&a.generateMipmap(a.TEXTURE_2D)},rs.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},rs.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},rs.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var is=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},os=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+p>=1?h/u:h*Math.pow(2,1-p))*u>=2&&(a++,u/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*u-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=d,a/=256,l-=8);t[n+f-d]|=128*y},as=kn;kn.Varint=0,kn.Fixed64=1,kn.Bytes=2,kn.Fixed32=5,kn.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Bn(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Nn(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Bn(this.buf,this.pos)+4294967296*Bn(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=Bn(this.buf,this.pos)+4294967296*Nn(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=is(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=is(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return Cn(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return Cn(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=Tn(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Tn(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===kn.Varint)for(;this.buf[this.pos++]>127;);else if(e===kn.Bytes)this.pos=this.readVarint()+this.pos;else if(e===kn.Fixed32)this.pos+=4;else{if(e!==kn.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Fn(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Fn(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Fn(this.buf,-1&t,this.pos),Fn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Fn(this.buf,-1&t,this.pos),Fn(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Pn(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),os(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),os(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Pn(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,kn.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,Mn,e)},writePackedSVarint:function(t,e){this.writeMessage(t,In,e)},writePackedBoolean:function(t,e){this.writeMessage(t,zn,e)},writePackedFloat:function(t,e){this.writeMessage(t,An,e)},writePackedDouble:function(t,e){this.writeMessage(t,On,e)},writePackedFixed32:function(t,e){this.writeMessage(t,Rn,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,Ln,e)},writePackedFixed64:function(t,e){this.writeMessage(t,Dn,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,jn,e)},writeBytesField:function(t,e){this.writeTag(t,kn.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,kn.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,kn.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,kn.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,kn.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,kn.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,kn.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,kn.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,kn.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,kn.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var ss=3,us=ss,ls=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,c(["receive"],this),this.target.addEventListener("message",this.receive,!1)};ls.prototype.send=function(t,e,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:t,id:String(i),data:Wt(e,o)},o)},ls.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?Wt(t):null,data:Wt(e,r)},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&r.error?e(Ht(r.error)):e&&e(null,Ht(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,Ht(r.data),o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=Ht(r.data);this.parent.getWorkerSource(r.sourceMapId,a[0],s.source)[a[1]](s,o)}else this.parent[r.type](Ht(r.data))}},ls.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var cs=n(function(t,e){!function(t){function e(t,e,r){e=Math.pow(2,r)-e-1;var i=n(256*t,256*e,r),o=n(256*(t+1),256*(e+1),r);return i[0]+","+i[1]+","+o[0]+","+o[1]}function n(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=function(t,n,r,i,o,a){return a=a||{},t+"?"+["bbox="+e(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+n].join("&")},t.getTileBBox=e,t.getMercCoords=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)});e(cs);var ps=cs.getTileBBox,hs=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Zn(0,t,e,n)};hs.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},hs.prototype.url=function(t,e){var n=ps(this.x,this.y,this.z),r=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var fs=function(t,e){this.wrap=t,this.canonical=e,this.key=Zn(t,e.z,e.x,e.y)},ds=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new hs(n,+r,+i),this.key=Zn(e,t,r,i)};ds.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},ds.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new ds(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},ds.prototype.isChildOf=function(t){var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},ds.prototype.children=function(t){if(this.overscaledZ>=t)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new ds(e,this.wrap,e,n,r),new ds(e,this.wrap,e,n+1,r),new ds(e,this.wrap,e,n,r+1),new ds(e,this.wrap,e,n+1,r+1)]},ds.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},ds.prototype.wrapped=function(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.unwrapTo=function(t){return new ds(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},ds.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ds.prototype.toUnwrapped=function(){return new fs(this.wrap,this.canonical)},ds.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ds.prototype.toCoordinate=function(){return new ir(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},$t("CanonicalTileID",hs),$t("OverscaledTileID",ds,{omit:["posMatrix"]});var ys=function(t,e,n){if(t<=0)throw new RangeError("Level must have positive dimension");this.dim=t,this.border=e,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};ys.prototype.set=function(t,e,n){this.data[this._idx(t,e)]=n+65536},ys.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},ys.prototype._idx=function(t,e){if(t<-this.border||t>=this.dim+this.border||e<-this.border||e>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(e+this.border)*this.stride+(t+this.border)},$t("Level",ys);var ms=function(t,e,n){this.uid=t,this.scale=e||1,this.level=n||new ys(256,512),this.loaded=!!n};ms.prototype.loadFromImage=function(t,e){if(t.height!==t.width)throw new RangeError("DEM tiles must be square");if(e&&"mapbox"!==e&&"terrarium"!==e)return y('"'+e+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.level=new ys(t.width,t.width/2),r=t.data;this._unpackData(n,r,e||"mapbox");for(var i=0;i<n.dim;i++)n.set(-1,i,n.get(0,i)),n.set(n.dim,i,n.get(n.dim-1,i)),n.set(i,-1,n.get(i,0)),n.set(i,n.dim,n.get(i,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},ms.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},ms.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},ms.prototype._unpackData=function(t,e,n){for(var r={mapbox:this._unpackMapbox,terrarium:this._unpackTerrarium}[n],i=0;i<t.dim;i++)for(var o=0;o<t.dim;o++){var a=4*(i*t.dim+o);t.set(o,i,this.scale*r(e[a],e[a+1],e[a+2]))}},ms.prototype.getPixels=function(){return new Jo({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},ms.prototype.backfillBorder=function(t,e,n){var r=this.level,i=t.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var o=e*r.dim,a=e*r.dim+r.dim,u=n*r.dim,l=n*r.dim+r.dim;switch(e){case-1:o=a-1;break;case 1:a=o+1}switch(n){case-1:u=l-1;break;case 1:l=u+1}for(var c=s(o,-r.border,r.dim+r.border),p=s(a,-r.border,r.dim+r.border),h=s(u,-r.border,r.dim+r.border),f=s(l,-r.border,r.dim+r.border),d=-e*r.dim,y=-n*r.dim,m=h;m<f;m++)for(var v=c;v<p;v++)r.set(v,m,i.get(v+d,m+y))},$t("DEMData",ms);var vs=Qt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),gs=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};gs.prototype.encode=function(t){return this._stringToNumber[t]},gs.prototype.decode=function(t){return this._numberToString[t]};var _s=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},bs={geometry:{configurable:!0}};bs.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},bs.geometry.set=function(t){this._geometry=t},_s.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(_s.prototype,bs);var xs=function(){this.state={},this.stateChanges={}};xs.prototype.updateState=function(t,e,n){e=String(e),this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][e]=this.stateChanges[t][e]||{},u(this.stateChanges[t][e],n)},xs.prototype.getState=function(t,e){return e=String(e),u({},(this.state[t]||{})[e],(this.stateChanges[t]||{})[e])},xs.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},xs.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),u(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}if(this.stateChanges={},0!==Object.keys(n).length)for(var a in t)t[a].setFeatureState(n,e)};var ws=function(t,e,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new ki(No,16,0),this.featureIndexArray=n||new Io};ws.prototype.insert=function(t,e,n,r,i){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var a=0;a<e.length;a++){for(var s=e[a],u=[1/0,1/0,-1/0,-1/0],l=0;l<s.length;l++){var c=s[l];u[0]=Math.min(u[0],c.x),u[1]=Math.min(u[1],c.y),u[2]=Math.max(u[2],c.x),u[3]=Math.max(u[3],c.y)}u[0]<No&&u[1]<No&&u[2]>=0&&u[3]>=0&&this.grid.insert(o,u[0],u[1],u[2],u[3])}},ws.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _a.VectorTile(new as(this.rawTileData)).layers,this.sourceLayerCoder=new gs(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ws.prototype.query=function(t,e,n){var r=this;this.loadVTLayers();for(var i=t.params||{},o=No/t.tileSize/t.scale,a=Et(i.filter),s=t.queryGeometry,u=t.queryPadding*o,l=1/0,c=1/0,p=-1/0,h=-1/0,f=0;f<s.length;f++)for(var d=s[f],y=0;y<d.length;y++){var m=d[y];l=Math.min(l,m.x),c=Math.min(c,m.y),p=Math.max(p,m.x),h=Math.max(h,m.y)}var v=this.grid.query(l-u,c-u,p+u,h+u);v.sort($n);for(var g,_={},b=0;b<v.length;b++)!function(u){var l=v[u];if(l!==g){g=l;var c=r.featureIndexArray.get(l),p=null;r.loadMatchingFeature(_,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,a,i.layers,e,function(e,i){p||(p=re(e));var a={};return e.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",String(e.id))),i.queryIntersectsFeature(s,e,a,p,r.z,t.transform,o,t.posMatrix)})}}(b);return _},ws.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s){var u=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new Bi(this.tileID.overscaledZ),c))for(var p=0;p<u.length;p++){var h=u[p];if(!(o&&o.indexOf(h)<0)){var f=a[h];if(f&&(!s||s(c,f))){var d=new _s(c,this.z,this.x,this.y);d.layer=f.serialize();var y=t[h];void 0===y&&(y=t[h]=[]),y.push({featureIndex:r,feature:d})}}}}},ws.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o){var a={};this.loadVTLayers();for(var s=Et(r),u=0,l=t;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(a,e,n,c,s,i,o)}return a},ws.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},$t("FeatureIndex",ws,{omit:["rawTileData","sourceLayerCoder"]});var Es=function(t,e){this.tileID=t,this.uid=l(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.expiredRequestCount=0,this.state="loading"};Es.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<er.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Es.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Es.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){if(t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==a.length){o.layers=a,o.stateDependentLayers=a.filter(function(t){return t.isStateDependent()});for(var s=0,u=a;s<u.length;s+=1)n[u[s].id]=o}}return n}(t.buckets,e.style),n)for(var r in this.buckets){var i=this.buckets[r];i instanceof Va&&(i.justReloaded=!0)}for(var o in this.queryPadding=0,this.buckets){var a=this.buckets[o];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(a.layerIds[0]).queryRadius(a))}t.iconAtlasImage&&(this.iconAtlasImage=t.iconAtlasImage),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new wo},Es.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Es.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Es.prototype.getBucket=function(t){return this.buckets[t.id]},Es.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new rs(t,this.iconAtlasImage,r.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new rs(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Es.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,scale:r,tileSize:this.tileSize,posMatrix:s,transform:o,params:i,queryPadding:this.queryPadding*a},t,e):{}},Es.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=e?e.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var o=Et(e&&e.filter),a={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},s=0;s<i.length;s++){var u=i.feature(s);if(o(new Bi(this.tileID.overscaledZ),u)){var l=new _s(u,a.z,a.x,a.y);l.tile=a,t.push(l)}}}},Es.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Es.prototype.setMask=function(t,e){if(!o(this.mask,t)&&(this.mask=t,this.clearMask(),!o(t,{0:!0}))){var n=new ro,r=new vo;this.segments=new Oo,this.segments.prepareSegment(0,n,r);for(var i=Object.keys(t),a=0;a<i.length;a++){var s=t[i[a]],u=No>>s.z,l=new or(s.x*u,s.y*u),c=new or(l.x+u,l.y+u),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(l.x,l.y,l.x,l.y),n.emplaceBack(c.x,l.y,c.x,l.y),n.emplaceBack(l.x,c.y,l.x,c.y),n.emplaceBack(c.x,c.y,c.x,c.y);var h=p.vertexLength;r.emplaceBack(h,h+1,h+2),r.emplaceBack(h+1,h+2,h+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(n,vs.members),this.maskedIndexBuffer=e.createIndexBuffer(r)}},Es.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Es.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Es.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Es.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i.layerIds[0]).queryRadius(i))))}}};var Ss={horizontal:1,vertical:2,horizontalOnly:3},ks={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ts={};Ts[10]=!0,Ts[32]=!0,Ts[38]=!0,Ts[40]=!0,Ts[41]=!0,Ts[43]=!0,Ts[45]=!0,Ts[47]=!0,Ts[173]=!0,Ts[183]=!0,Ts[8203]=!0,Ts[8208]=!0,Ts[8211]=!0,Ts[8231]=!0,t.unwrapExports=e,t.createCommonjsModule=n,t.default=or,t.default$1=self,t.default$2=er,t.getJSON=function(t,e){var n=g(t);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var r;try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r)}else e(401===n.status&&t.url.match(/mapbox.com/)?new cr(n.statusText+": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens",n.status,t.url):new cr(n.statusText,n.status,t.url))},n.send(),{cancel:function(){return n.abort()}}},t.getImage=function(t,e){return pr(t,function(t,n){if(t)e(t);else if(n){var r=new self.Image,i=self.URL||self.webkitURL;r.onload=function(){e(null,r),i.revokeObjectURL(r.src)};var o=new self.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},t.ResourceType=lr,t.RGBAImage=Jo,t.default$3=Xa,t.ImagePosition=Ya,t.default$4=rs,t.getArrayBuffer=pr,t.default$5=function(t){return new as(t).readFields(Vn,[])},t.default$6=Oi,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.AlphaImage=Ko,t.default$7=yr,t.endsWith=p,t.extend=u,t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.Evented=dr,t.validateStyle=xi,t.validateLight=wi,t.emitValidationErrors=qt,t.default$8=Mr,t.number=R,t.Properties=Ki,t.Transitionable=Vi,t.Transitioning=qi,t.PossiblyEvaluated=Wi,t.DataConstantProperty=Hi,t.warnOnce=y,t.uniqueId=l,t.default$9=ls,t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},t.clamp=s,t.Event=hr,t.ErrorEvent=fr,t.OverscaledTileID=ds,t.default$10=No,t.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<t.length;o++)e=Math.min(e,t[o].column),n=Math.min(n,t[o].row),r=Math.max(r,t[o].column),i=Math.max(i,t[o].row);var a=r-e,s=i-n,u=Math.max(a,s),l=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new ir((e+r)/2,(n+i)/2,0).zoomTo(l)},t.CanonicalTileID=hs,t.RasterBoundsArray=ro,t.default$11=vs,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.default$12=mr,t.bindAll=c,t.default$13=o,t.default$14=Es,t.default$15=ir,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.default$16=xs,t.default$17=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.create=function(){var t=new Zo(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],p=e[9],h=e[10],f=e[11],d=e[12],y=e[13],m=e[14],v=e[15],g=n*s-r*a,_=n*u-i*a,b=n*l-o*a,x=r*u-i*s,w=r*l-o*s,E=i*l-o*u,S=c*y-p*d,k=c*m-h*d,T=c*v-f*d,C=p*m-h*y,P=p*v-f*y,M=h*v-f*m,I=g*M-_*P+b*C+x*T-w*k+E*S;return I?(I=1/I,t[0]=(s*M-u*P+l*C)*I,t[1]=(i*P-r*M-o*C)*I,t[2]=(y*E-m*w+v*x)*I,t[3]=(h*w-p*E-f*x)*I,t[4]=(u*T-a*M-l*k)*I,t[5]=(n*M-i*T+o*k)*I,t[6]=(m*b-d*E-v*_)*I,t[7]=(c*E-h*b+f*_)*I,t[8]=(a*P-s*T+l*S)*I,t[9]=(r*T-n*P-o*S)*I,t[10]=(d*w-y*b+v*g)*I,t[11]=(p*b-c*w-f*g)*I,t[12]=(s*k-a*C-u*S)*I,t[13]=(n*C-r*k+i*S)*I,t[14]=(y*_-d*x-m*g)*I,t[15]=(c*x-p*_+h*g)*I,t):null},t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],y=e[12],m=e[13],v=e[14],g=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*p+w*y,t[1]=_*i+b*u+x*h+w*m,t[2]=_*o+b*l+x*f+w*v,t[3]=_*a+b*c+x*d+w*g,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*p+w*y,t[5]=_*i+b*u+x*h+w*m,t[6]=_*o+b*l+x*f+w*v,t[7]=_*a+b*c+x*d+w*g,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*p+w*y,t[9]=_*i+b*u+x*h+w*m,t[10]=_*o+b*l+x*f+w*v,t[11]=_*a+b*c+x*d+w*g,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*p+w*y,t[13]=_*i+b*u+x*h+w*m,t[14]=_*o+b*l+x*f+w*v,t[15]=_*a+b*c+x*d+w*g,t},t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,p,h,f,d,y=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*v+e[12],t[13]=e[1]*y+e[5]*m+e[9]*v+e[13],t[14]=e[2]*y+e[6]*m+e[10]*v+e[14],t[15]=e[3]*y+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],h=e[9],f=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=p,t[9]=h,t[10]=f,t[11]=d,t[12]=r*y+s*m+p*v+e[12],t[13]=i*y+u*m+h*v+e[13],t[14]=o*y+l*m+f*v+e[14],t[15]=a*y+c*m+d*v+e[15]),t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+p*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=p*i-s*r,t[11]=h*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+p*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=p*i-s*r,t[7]=h*i-u*r,t},t.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.create$1=ke,t.normalize=Te,t.transformMat4=Ce,t.forEach=Go,t.getSizeData=wn,t.evaluateSizeForFeature=function(t,e,n){var r=e;return"source"===t.functionType?n.lowerSize/10:"composite"===t.functionType?R(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize},t.evaluateSizeForZoom=function(t,e,n){if("constant"===t.functionType)return{uSizeT:0,uSize:t.layoutSize};if("source"===t.functionType)return{uSizeT:0,uSize:0};if("camera"===t.functionType){var r=t.propertyValue,i=t.zoomRange,o=t.sizeRange,a=s(yt(r,n.specification).interpolationFactor(e,i.min,i.max),0,1);return{uSizeT:0,uSize:o.min+a*(o.max-o.min)}}var u=t.propertyValue,l=t.zoomRange;return{uSizeT:s(yt(u,n.specification).interpolationFactor(e,l.min,l.max),0,1),uSize:0}},t.addDynamicAttributes=Sn,t.default$18=qa,t.WritingMode=Ss,t.multiPolygonIntersectsBufferedPoint=oe,t.multiPolygonIntersectsMultiPolygon=ae,t.multiPolygonIntersectsBufferedMultiLine=se,t.polygonIntersectsPolygon=function(t,e){for(var n=0;n<t.length;n++)if(de(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(de(t,e[r]))return!0;return!!le(t,e)},t.distToSegmentSquared=he,t.default$19=Ji,t.default$20=function(t){return new Ga[t.type](t)},t.clone=d,t.filterObject=f,t.mapObject=h,t.registerForPluginAvailability=function(t){return Ri?t({pluginURL:Ri,completionCallback:Ai}):Di.once("pluginAvailable",t),t},t.evented=Di,t.default$21=Ii,t.createLayout=Qt,t.default$22=jo,t.create$2=ge,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.create$3=_e,t.length=be,t.fromValues=xe,t.normalize$1=we,t.dot=Ee,t.cross=Se,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.len=Wo,t.forEach$1=Ho,t.PosArray=no,t.UnwrappedTileID=fs,t.create$4=function(){var t=new Zo(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.ease=ar,t.bezier=a,t.default$23=Bi,t.setRTLTextPlugin=function(t,e){if(zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");zi=!0,Ri=er.resolveURL(t),Ai=function(t){t?(zi=!1,Ri=null,e&&e(t)):Li=!0},Di.fire(new hr("pluginAvailable",{pluginURL:Ri,completionCallback:Ai}))},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.default$24=Et,t.default$25=Da,t.register=$t,t.GLYPH_PBF_BORDER=us,t.shapeText=function(t,e,n,r,i,o,a,s,u,l){var c=t.trim();l===Ss.vertical&&(c=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;r&&Kt(r)&&!La[t[n+1]]||i&&Kt(i)&&!La[t[n-1]]||!La[t[n]]?e+=t[n]:e+=La[t[n]]}return e}(c));var p=[],h={positionedGlyphs:p,text:c,top:s[1],bottom:s[1],left:s[0],right:s[0],writingMode:l},f=ji.processBidirectionalText;return function(t,e,n,r,i,o,a,s,u){for(var l=0,c=-17,p=0,h=t.positionedGlyphs,f="right"===o?1:"left"===o?0:.5,d=0,y=n;d<y.length;d+=1){var m=y[d];if((m=m.trim()).length){for(var v=h.length,g=0;g<m.length;g++){var _=m.charCodeAt(g),b=e[_];b&&(Yt(_)&&a!==Ss.horizontal?(h.push({glyph:_,x:l,y:0,vertical:!0}),l+=u+s):(h.push({glyph:_,x:l,y:c,vertical:!1}),l+=b.metrics.advance+s))}if(h.length!==v){var x=l-s;p=Math.max(x,p),Kn(h,e,v,h.length-1,f)}l=0,c+=r}else c+=r}var w=Yn(i),E=w.horizontalAlign,S=w.verticalAlign;!function(t,e,n,r,i,o,a){for(var s=(e-n)*i,u=(-r*a+.5)*o,l=0;l<t.length;l++)t[l].x+=s,t[l].y+=u}(h,f,E,S,p,r,n.length);var k=n.length*r;t.top+=-S*k,t.bottom=t.top+k,t.left+=-E*p,t.right=t.left+p}(h,e,f?f(c,Xn(c,a,n,e)):function(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}(c,Xn(c,a,n,e)),r,i,o,l,a,u),!!p.length&&h},t.shapeIcon=function(t,e,n){var r=Yn(n),i=r.horizontalAlign,o=r.verticalAlign,a=e[0],s=e[1],u=a-t.displaySize[0]*i,l=u+t.displaySize[0],c=s-t.displaySize[1]*o;return{image:t,top:c,bottom:c+t.displaySize[1],left:u,right:l}},t.allowsVerticalWritingMode=Gt,t.allowsLetterSpacing=function(t){for(var e=0,n=t;e<n.length;e+=1)if(!Xt(n[e].charCodeAt(0)))return!1;return!0},t.default$26=sn,t.default$27=Va,t.default$28=ws,t.CollisionBoxArray=wo,t.default$29=gs,t.default$30=Ja,t.default$31=_a,t.default$32=as,t.default$33=ms,t.__moduleExports=_a,t.default$34=or,t.__moduleExports$1=as,t.plugin=ji}),t(["./chunk1.js"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.default$17;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}function r(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a-1],p=t[a],h=t[a+1];if(!h)return!1;var f=c.angleTo(p)-p.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=p.dist(h)}return!0}function i(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function o(t,e,n){return t?.6*e*n:0}function a(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function s(e,n,s,u,l,c){for(var p=o(s,l,c),h=a(s,u),f=0,d=i(e)/2,y=0;y<e.length-1;y++){var m=e[y],v=e[y+1],g=m.dist(v);if(f+g>d){var _=(d-f)/g,b=t.number(m.x,v.x,_),x=t.number(m.y,v.y,_),w=new t.default$25(b,x,v.angleTo(m),y);if(w._round(),p&&!r(e,w,h,p,n))return;return w}f+=g}}function u(e,n,s,u,l,c,p,h,f){var d=o(u,c,p),y=a(u,l),m=0===e[0].x||e[0].x===f||0===e[0].y||e[0].y===f;return n-y*p<n/4&&(n=y*p+n/4),function e(n,o,a,s,u,l,c,p,h){for(var f=l/2,d=i(n),y=0,m=o-a,v=[],g=0;g<n.length-1;g++){for(var _=n[g],b=n[g+1],x=_.dist(b),w=b.angleTo(_);m+a<y+x;){var E=((m+=a)-y)/x,S=t.number(_.x,b.x,E),k=t.number(_.y,b.y,E);if(S>=0&&S<h&&k>=0&&k<h&&m-f>=0&&m+f<=d){var T=new t.default$25(S,k,w,g);T._round(),s&&!r(n,T,l,s,u)||v.push(T)}}y+=x}return p||v.length||c||(v=e(n,y/2,a,s,u,l,c,!0,h)),v}(e,m?n/2*h%n:(y/2+2*c)*p*h%n,n,d,s,y*p,m,!1,f)}function l(t,e){if(!(this instanceof l))return new l(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||c,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function c(t,e){return t<e?-1:t>e?1:0}function p(e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);for(var i=1/0,o=1/0,a=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<i)&&(i=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var p=a-i,d=s-o,y=Math.min(p,d),m=y/2,v=new Mt(null,h);if(0===y)return new t.default(i,o);for(var g=i;g<a;g+=y)for(var _=o;_<s;_+=y)v.push(new f(g+m,_+m,m,e));for(var b=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new f(n/e,r/e,0,t)}(e),x=v.length;v.length;){var w=v.pop();(w.d>b.d||!b.d)&&(b=w,r&&console.log("found best %d after %d probes",Math.round(1e4*w.d)/1e4,x)),w.max-b.d<=n||(m=w.h/2,v.push(new f(w.p.x-m,w.p.y-m,m,e)),v.push(new f(w.p.x+m,w.p.y-m,m,e)),v.push(new f(w.p.x-m,w.p.y+m,m,e)),v.push(new f(w.p.x+m,w.p.y+m,m,e)),x+=4)}return r&&(console.log("num probes: "+x),console.log("best distance: "+b.d)),b.p}function h(t,e){return e.max-t.max}function f(e,n,r,i){this.p=new t.default(e,n),this.h=r,this.d=function(e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,l=u-1;s<u;l=s++){var c=a[s],p=a[l];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(r=!r),i=Math.min(i,t.distToSegmentSquared(e,c,p))}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}function d(e,n,r,i,o,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=t.default$10/s,e.compareText={},e.iconsNeedLinear=!1;var u=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var p=e.textSizeData.zoomRange,h=p.min,f=p.max;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new t.default$23(h)),l["text-size"].possiblyEvaluate(new t.default$23(f))]}if("composite"===e.iconSizeData.functionType){var d=e.iconSizeData.zoomRange,m=d.min,v=d.max;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new t.default$23(m)),l["icon-size"].possiblyEvaluate(new t.default$23(v))]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new t.default$23(e.zoom+1)),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new t.default$23(e.zoom+1)),c.textMaxSize=l["text-size"].possiblyEvaluate(new t.default$23(18));for(var g=24*u.get("text-line-height"),_="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),b=u.get("text-keep-upright"),x=0,w=e.features;x<w.length;x+=1){var E=w[x],S=u.get("text-font").evaluate(E,{}).join(","),k=n[S]||{},T=r[S]||{},C={},P=E.text;if(P){var M=u.get("text-offset").evaluate(E,{}).map(function(t){return 24*t}),I=24*u.get("text-letter-spacing").evaluate(E,{}),A=t.allowsLetterSpacing(P)?I:0,O=u.get("text-anchor").evaluate(E,{}),z=u.get("text-justify").evaluate(E,{}),R="point"===u.get("symbol-placement")?24*u.get("text-max-width").evaluate(E,{}):0;C.horizontal=t.shapeText(P,k,R,g,O,z,A,M,24,t.WritingMode.horizontal),t.allowsVerticalWritingMode(P)&&_&&b&&(C.vertical=t.shapeText(P,k,R,g,O,z,A,M,24,t.WritingMode.vertical))}var L=void 0;if(E.icon){var D=i[E.icon];D&&(L=t.shapeIcon(o[E.icon],u.get("icon-offset").evaluate(E,{}),u.get("icon-anchor").evaluate(E,{})),void 0===e.sdfIcons?e.sdfIcons=D.sdf:e.sdfIcons!==D.sdf&&t.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),D.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==u.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(C.horizontal||L)&&y(e,E,C,L,T,c)}a&&e.generateCollisionDebugBuffers()}function y(e,n,r,i,o,a){var l=a.layoutTextSize.evaluate(n,{}),c=a.layoutIconSize.evaluate(n,{}),h=a.textMaxSize.evaluate(n,{});void 0===h&&(h=l);var f=e.layers[0].layout,d=f.get("text-offset").evaluate(n,{}),y=f.get("icon-offset").evaluate(n,{}),g=l/24,_=e.tilePixelRatio*g,b=e.tilePixelRatio*h/24,x=e.tilePixelRatio*c,w=e.tilePixelRatio*f.get("symbol-spacing"),E=f.get("text-padding")*e.tilePixelRatio,S=f.get("icon-padding")*e.tilePixelRatio,k=f.get("text-max-angle")/180*Math.PI,T="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),C="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),P=f.get("symbol-placement"),M=w/2,I=function(s,u){u.x<0||u.x>=t.default$10||u.y<0||u.y>=t.default$10||e.symbolInstances.push(function(e,n,r,i,o,a,s,u,l,c,p,h,f,d,y,v,g,_,b,x,w){var E,S,k=e.addToLineVertexArray(n,r),T=0,C=0,P=0,M=i.horizontal?i.horizontal.text:"",I=[];if(i.horizontal){var A=a.layout.get("text-rotate").evaluate(b,{});E=new Pt(s,r,n,u,l,c,i.horizontal,p,h,f,e.overscaling,A),C+=m(e,n,i.horizontal,a,f,b,d,k,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,I,x,w),i.vertical&&(P+=m(e,n,i.vertical,a,f,b,d,k,t.WritingMode.vertical,I,x,w))}var O=E?E.boxStartIndex:e.collisionBoxArray.length,z=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var R=function(e,n,r,i,o,a){var s,u,l,c,p=n.image,h=r.layout,f=n.top-1/p.pixelRatio,d=n.left-1/p.pixelRatio,y=n.bottom+1/p.pixelRatio,m=n.right+1/p.pixelRatio;if("none"!==h.get("icon-text-fit")&&o){var v=m-d,g=y-f,_=h.get("text-size").evaluate(a,{})/24,b=o.left*_,x=o.right*_,w=o.top*_,E=x-b,S=o.bottom*_-w,k=h.get("icon-text-fit-padding")[0],T=h.get("icon-text-fit-padding")[1],C=h.get("icon-text-fit-padding")[2],P=h.get("icon-text-fit-padding")[3],M="width"===h.get("icon-text-fit")?.5*(S-g):0,I="height"===h.get("icon-text-fit")?.5*(E-v):0,A="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?E:v,O="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?S:g;s=new t.default(b+I-P,w+M-k),u=new t.default(b+I+T+A,w+M-k),l=new t.default(b+I+T+A,w+M+C+O),c=new t.default(b+I-P,w+M+C+O)}else s=new t.default(d,f),u=new t.default(m,f),l=new t.default(m,y),c=new t.default(d,y);var z=r.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(z){var R=Math.sin(z),L=Math.cos(z),D=[L,-R,R,L];s._matMult(D),u._matMult(D),c._matMult(D),l._matMult(D)}return[{tl:s,tr:u,bl:c,br:l,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,o,a,0,i.horizontal,b),L=a.layout.get("icon-rotate").evaluate(b,{});S=new Pt(s,r,n,u,l,c,o,y,v,!1,e.overscaling,L),T=4*R.length;var D=e.iconSizeData,j=null;"source"===D.functionType?j=[10*a.layout.get("icon-size").evaluate(b,{})]:"composite"===D.functionType&&(j=[10*w.compositeIconSizes[0].evaluate(b,{}),10*w.compositeIconSizes[1].evaluate(b,{})]),e.addSymbols(e.icon,R,j,_,g,b,!1,n,k.lineStartIndex,k.lineLength)}var B=S?S.boxStartIndex:e.collisionBoxArray.length,F=S?S.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=t.default$27.MAX_GLYPHS&&t.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:M,textBoxStartIndex:O,textBoxEndIndex:z,iconBoxStartIndex:B,iconBoxEndIndex:F,textOffset:d,iconOffset:_,anchor:n,line:r,featureIndex:u,feature:b,numGlyphVertices:C,numVerticalGlyphVertices:P,numIconVertices:T,textOpacityState:new Ct,iconOpacityState:new Ct,isDuplicate:!1,placedTextSymbolIndices:I,crossTileID:0}}(e,u,s,r,i,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,_,E,T,d,x,S,C,y,n,o,a))};if("line"===P)for(var A=0,O=function(e,n,r,i,o){for(var a=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var p=u[c],h=u[c+1];p.x<0&&h.x<0||(p.x<0?p=new t.default(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round():h.x<0&&(h=new t.default(0,p.y+(h.y-p.y)*((0-p.x)/(h.x-p.x)))._round()),p.y<0&&h.y<0||(p.y<0?p=new t.default(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round():h.y<0&&(h=new t.default(p.x+(h.x-p.x)*((0-p.y)/(h.y-p.y)),0)._round()),p.x>=i&&h.x>=i||(p.x>=i?p=new t.default(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round():h.x>=i&&(h=new t.default(i,p.y+(h.y-p.y)*((i-p.x)/(h.x-p.x)))._round()),p.y>=o&&h.y>=o||(p.y>=o?p=new t.default(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round():h.y>=o&&(h=new t.default(p.x+(h.x-p.x)*((o-p.y)/(h.y-p.y)),o)._round()),l&&p.equals(l[l.length-1])||(l=[p],a.push(l)),l.push(h)))))}return a}(n.geometry,0,0,t.default$10,t.default$10);A<O.length;A+=1)for(var z=O[A],R=0,L=u(z,w,k,r.vertical||r.horizontal,i,24,b,e.overscaling,t.default$10);R<L.length;R+=1){var D=L[R],j=r.horizontal;j&&v(e,j.text,M,D)||I(z,D)}else if("line-center"===P)for(var B=0,F=n.geometry;B<F.length;B+=1){var N=F[B];if(N.length>1){var V=s(N,k,r.vertical||r.horizontal,i,24,b);V&&I(N,V)}}else if("Polygon"===n.type)for(var U=0,q=t.default$26(n.geometry,0);U<q.length;U+=1){var Z=q[U],$=p(Z,16);I(Z[0],new t.default$25($.x,$.y,0))}else if("LineString"===n.type)for(var W=0,H=n.geometry;W<H.length;W+=1){var G=H[W];I(G,new t.default$25(G[0].x,G[0].y,0))}else if("Point"===n.type)for(var X=0,Y=n.geometry;X<Y.length;X+=1)for(var K=0,J=Y[X];K<J.length;K+=1){var Q=J[K];I([Q],new t.default$25(Q.x,Q.y,0))}}function m(e,n,r,i,o,a,s,u,l,c,p,h){var f=function(e,n,r,i,o,a){for(var s=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=r.layout.get("text-offset").evaluate(o,{}).map(function(t){return 24*t}),l=n.positionedGlyphs,c=[],p=0;p<l.length;p++){var h=l[p],f=a[h.glyph];if(f){var d=f.rect;if(d){var y=t.GLYPH_PBF_BORDER+1,m=f.metrics.advance/2,v=i?[h.x+m,h.y]:[0,0],g=i?[0,0]:[h.x+m+u[0],h.y+u[1]],_=f.metrics.left-y-m+g[0],b=-f.metrics.top-y+g[1],x=_+d.w,w=b+d.h,E=new t.default(_,b),S=new t.default(x,b),k=new t.default(_,w),T=new t.default(x,w);if(i&&h.vertical){var C=new t.default(-m,m),P=-Math.PI/2,M=new t.default(5,0);E._rotateAround(P,C)._add(M),S._rotateAround(P,C)._add(M),k._rotateAround(P,C)._add(M),T._rotateAround(P,C)._add(M)}if(s){var I=Math.sin(s),A=Math.cos(s),O=[A,-I,I,A];E._matMult(O),S._matMult(O),k._matMult(O),T._matMult(O)}c.push({tl:E,tr:S,bl:k,br:T,tex:d,writingMode:n.writingMode,glyphOffset:v})}}}return c}(0,r,i,o,a,p),d=e.textSizeData,y=null;return"source"===d.functionType?y=[10*i.layout.get("text-size").evaluate(a,{})]:"composite"===d.functionType&&(y=[10*h.compositeTextSizes[0].evaluate(a,{}),10*h.compositeTextSizes[1].evaluate(a,{})]),e.addSymbols(e.text,f,y,s,o,a,l,n,u.lineStartIndex,u.lineLength),c.push(e.text.placedSymbolArray.length-1),4*f.length}function v(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function g(e,n){for(var r=new t.default$23(n),i=0,o=e;i<o.length;i+=1)o[i].recalculate(r)}function _(e,n){var r=t.getArrayBuffer(e.request,function(e,r){e?n(e):r&&n(null,{vectorTile:new t.default$31.VectorTile(new t.default$32(r.data)),rawData:r.data,cacheControl:r.cacheControl,expires:r.expires})});return function(){r.cancel(),n()}}function b(t){var e=0;if(t&&t.length>0){e+=Math.abs(x(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(x(t[n]))}return e}function x(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(w(t[o][0])-w(e[0]))*Math.sin(w(n[1]));s=s*Bt.RADIUS*Bt.RADIUS/2}return s}function w(t){return t*Math.PI/180}function E(t,e){return function(n){return t(n,e)}}function S(t,e){e=!!e,t[0]=k(t[0],e);for(var n=1;n<t.length;n++)t[n]=k(t[n],!e);return t}function k(t,e){return function(t){return Ft.ring(t)>=0}(t)===e?t:t.reverse()}function T(t,e){this.options=e||{},this.features=t,this.length=t.length}function C(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function P(e){var n=new t.__moduleExports$1;return function(t,e){for(var n in t.layers)e.writeMessage(3,M,t.layers[n])}(e,n),n.finish()}function M(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,I,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,L,o[n])}function I(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,A,t),e.writeVarintField(3,n.type),e.writeMessage(4,R,n)}function A(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),u=r.length-1,o[s]=u),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var p=c+":"+l,h=a[p];void 0===h&&(i.push(l),h=i.length-1,a[p]=h),e.writeVarint(h)}}function O(t,e){return(e<<3)+(7&t)}function z(t){return t<<1^t>>31}function R(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(O(1,l));for(var c=3===r?u.length-1:u.length,p=0;p<c;p++){1===p&&1!==r&&e.writeVarint(O(2,c-1));var h=u[p].x-i,f=u[p].y-o;e.writeVarint(z(h)),e.writeVarint(z(f)),i+=h,o+=f}3===r&&e.writeVarint(O(7,0))}}function L(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function D(t,e,n,r,i,o){if(!(i-r<=n)){var a=Math.floor((r+i)/2);!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+p)),Math.min(o,Math.floor(r+(s-u)*c/s+p)),a)}var h=n[2*r+a],f=i,d=o;for(j(e,n,i,r),n[2*o+a]>h&&j(e,n,i,o);f<d;){for(j(e,n,f,d),f++,d--;n[2*f+a]<h;)f++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?j(e,n,i,d):j(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,e,a,r,i,o%2),D(t,e,n,r,a-1,o+1),D(t,e,n,a+1,i,o+1)}}function j(t,e,n,r){B(t,n,r),B(e,2*n,2*r),B(e,2*n+1,2*r+1)}function B(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function F(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function N(t,e,n,r,i){return new V(t,e,n,r,i)}function V(t,e,n,r,i){e=e||U,n=n||q,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var o=0;o<t.length;o++)this.ids[o]=o,this.coords[2*o]=e(t[o]),this.coords[2*o+1]=n(t[o]);D(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function U(t){return t[0]}function q(t){return t[1]}function Z(t){this.options=Y(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function $(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function W(t){return{type:"Feature",properties:H(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function H(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return Y(Y({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function G(t){return t/360+.5}function X(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function Y(t,e){for(var n in e)t[n]=e[n];return t}function K(t){return t.x}function J(t){return t.y}function Q(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function tt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)et(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)et(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)et(t,e[r][i])}(i),i}function et(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function nt(t,e,n){if(e.geometry){var r=e.geometry.coordinates,i=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),a=[];if("Point"===i)rt(r,a);else if("MultiPoint"===i)for(var s=0;s<r.length;s++)rt(r[s],a);else if("LineString"===i)it(r,a,o,!1);else if("MultiLineString"===i){if(n.lineMetrics){for(s=0;s<r.length;s++)a=[],it(r[s],a,o,!1),t.push(tt(e.id,"LineString",a,e.properties));return}ot(r,a,o,!1)}else if("Polygon"===i)ot(r,a,o,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(s=0;s<e.geometry.geometries.length;s++)nt(t,{id:e.id,geometry:e.geometry.geometries[s],properties:e.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(s=0;s<r.length;s++){var u=[];ot(r[s],u,o,!0),a.push(u)}}t.push(tt(e.id,i,a,e.properties))}}function rt(t,e){e.push(at(t[0])),e.push(st(t[1])),e.push(0)}function it(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=at(t[s][0]),l=st(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],p=e[r],h=e[r+1],f=n+3;f<r;f+=3){var d=Q(e[f],e[f+1],l,c,p,h);if(d>a)o=f,a=d;else if(d===a){var y=Math.abs(f-s);y<u&&(o=f,u=y)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function ot(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];it(t[i],o,n,r),e.push(o)}}function at(t){return t/360+.5}function st(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ut(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],p=c.geometry,h=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var y=[];if("Point"===h||"MultiPoint"===h)lt(p,y,n,r,i);else if("LineString"===h)ct(p,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)ht(p,y,n,r,i,!1);else if("Polygon"===h)ht(p,y,n,r,i,!0);else if("MultiPolygon"===h)for(var m=0;m<p.length;m++){var v=[];ht(p[m],v,n,r,i,!0),v.length&&y.push(v)}if(y.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<y.length;m++)u.push(tt(c.id,h,y[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===y.length?(h="LineString",y=y[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===y.length?"Point":"MultiPoint"),u.push(tt(c.id,h,y,c.tags))}}}return u.length?u:null}function lt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ct(t,e,n,r,i,o,a){for(var s,u,l=pt(t),c=0===i?dt:yt,p=t.start,h=0;h<t.length-3;h+=3){var f=t[h],d=t[h+1],y=t[h+2],m=t[h+3],v=t[h+4],g=0===i?f:d,_=0===i?m:v,b=!1;a&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-v,2))),g<n?_>=n&&(u=c(l,f,d,m,v,n),a&&(l.start=p+s*u)):g>=r?_<r&&(u=c(l,f,d,m,v,r),a&&(l.start=p+s*u)):ft(l,f,d,y),_<n&&g>=n&&(u=c(l,f,d,m,v,n),b=!0),_>r&&g<=r&&(u=c(l,f,d,m,v,r),b=!0),!o&&b&&(a&&(l.end=p+s*u),e.push(l),l=pt(t)),a&&(p+=s)}var x=t.length-3;f=t[x],d=t[x+1],y=t[x+2],(g=0===i?f:d)>=n&&g<=r&&ft(l,f,d,y),x=l.length-3,o&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&ft(l,l[0],l[1],l[2]),l.length&&e.push(l)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,r,i,o){for(var a=0;a<t.length;a++)ct(t[a],e,n,r,i,o,!1)}function ft(t,e,n,r){t.push(e),t.push(n),t.push(r)}function dt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function yt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function mt(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=vt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(vt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(vt(o.geometry[s][l],e));i.push(u)}n.push(tt(o.id,a,i,o.tags))}return n}function vt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function gt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(_t(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var p=[];for(i=0;i<l[r].length;i+=2)p.push(_t(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(p)}}return t.transformed=!0,t}function _t(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function bt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,xt(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,p=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function xt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)wt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)wt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)wt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function wt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Et(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)nt(n,t.features[r],e);else"Feature"===t.type?nt(n,t,e):nt(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=ut(t,1,-1-n,n,0,-1,2,e),o=ut(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=ut(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=mt(i,1).concat(r)),o&&(r=r.concat(mt(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function St(t,e,n){return 32*((1<<t)*n+e)+t}function kt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new qt(r.features),o=Wt(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var Tt=function(t){t&&this.replace(t)};Tt.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},Tt.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];i._layerConfigs[s.id]=s;var u=i._layers[s.id]=t.default$20(s);u._featureFilter=t.default$24(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var p=c[l];delete i._layerConfigs[p],delete i._layers[p]}this.familiesBySource={};for(var h=0,f=function(t){for(var e={},r=0;r<t.length;r++){var i=n(t[r]),o=e[i];o||(o=e[i]=[]),o.push(t[r])}var a=[];for(var s in e)a.push(e[s]);return a}(t.values(this._layerConfigs));h<f.length;h+=1){var d=f[h].map(function(t){return i._layers[t.id]}),y=d[0];if("none"!==y.visibility){var m=y.source||"",v=i.familiesBySource[m];v||(v=i.familiesBySource[m]={});var g=y.sourceLayer||"_geojsonTileLayer",_=v[g];_||(_=v[g]=[]),_.push(d)}}};var Ct=function(){this.opacity=0,this.targetOpacity=0,this.time=0};Ct.prototype.clone=function(){var t=new Ct;return t.opacity=this.opacity,t.targetOpacity=this.targetOpacity,t.time=this.time,t},t.register("OpacityState",Ct);var Pt=function(e,n,r,i,o,a,s,u,l,c,p,h){var f=s.top*u-l,d=s.bottom*u+l,y=s.left*u-l,m=s.right*u+l;if(this.boxStartIndex=e.length,c){var v=d-f,g=m-y;v>0&&(v=Math.max(10*u,v),this._addLineCollisionCircles(e,n,r,r.segment,g,v,i,o,a,p))}else{if(h){var _=new t.default(y,f),b=new t.default(m,f),x=new t.default(y,d),w=new t.default(m,d),E=h*Math.PI/180;_._rotate(E),b._rotate(E),x._rotate(E),w._rotate(E),y=Math.min(_.x,b.x,x.x,w.x),m=Math.max(_.x,b.x,x.x,w.x),f=Math.min(_.y,b.y,x.y,w.y),d=Math.max(_.y,b.y,x.y,w.y)}e.emplaceBack(r.x,r.y,y,f,m,d,i,o,a,0,0)}this.boxEndIndex=e.length};Pt.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,p=Math.floor(i/c),h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(p*h/2),d=-o/2,y=n,m=r+1,v=d,g=-i/2,_=g-i/4;do{if(--m<0){if(v>g)return;m=0;break}v-=e[m].dist(y),y=e[m]}while(v>_);for(var b=e[m].dist(e[m+1]),x=-f;x<p+f;x++){var w=x*c,E=g+w;if(w<0&&(E+=w),w>i&&(E+=w-i),!(E<v)){for(;v+b<E;){if(v+=b,++m+1>=e.length)return;b=e[m].dist(e[m+1])}var S=E-v,k=e[m],T=e[m+1].sub(k)._unit()._mult(S)._add(k)._round(),C=Math.abs(E-d)<c?0:.8*(E-d);t.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,C)}}};var Mt=l,It=l;l.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Mt.default=It;var At=function(e){var n=new t.AlphaImage({width:0,height:0}),r={},i=new t.default$3(0,0,{autoResize:!0});for(var o in e){var a=e[o],s=r[o]={};for(var u in a){var l=a[+u];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c=i.packOne(l.bitmap.width+2,l.bitmap.height+2);n.resize({width:i.w,height:i.h}),t.AlphaImage.copy(l.bitmap,n,{x:0,y:0},{x:c.x+1,y:c.y+1},l.bitmap),s[u]={rect:c,metrics:l.metrics}}}}i.shrink(),n.resize({width:i.w,height:i.h}),this.image=n,this.positions=r};t.register("GlyphAtlas",At);var Ot=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};Ot.prototype.parse=function(e,n,r,i){function o(){if(l)return i(l);if(c&&p){var e=new At(c),n=new t.default$30(p);for(var r in h){var o=h[r];o instanceof t.default$27&&(g(o.layers,this.zoom),d(o,c,e.positions,p,n.positions,this.showCollisionBoxes))}this.status="done",i(null,{buckets:t.values(h).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,iconAtlasImage:n.image})}}var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var s=new t.default$29(Object.keys(e.layers).sort()),u=new t.default$28(this.tileID);u.bucketLayerIDs=[];var l,c,p,h={},f={featureIndex:u,iconDependencies:{},glyphDependencies:{}},y=n.familiesBySource[this.source];for(var m in y){var v=e.layers[m];if(v){1===v.version&&t.warnOnce('Vector tile source "'+a.source+'" layer "'+m+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _=s.encode(m),b=[],x=0;x<v.length;x++){var w=v.feature(x);b.push({feature:w,index:x,sourceLayerIndex:_})}for(var E=0,S=y[m];E<S.length;E+=1){var k=S[E],T=k[0];T.minzoom&&a.zoom<Math.floor(T.minzoom)||T.maxzoom&&a.zoom>=T.maxzoom||"none"!==T.visibility&&(g(k,a.zoom),(h[T.id]=T.createBucket({index:u.bucketLayerIDs.length,layers:k,zoom:a.zoom,pixelRatio:a.pixelRatio,overscaling:a.overscaling,collisionBoxArray:a.collisionBoxArray,sourceLayerIndex:_,sourceID:a.source})).populate(b,f),u.bucketLayerIDs.push(k.map(function(t){return t.id})))}}}var C=t.mapObject(f.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(C).length?r.send("getGlyphs",{uid:this.uid,stacks:C},function(t,e){l||(l=t,c=e,o.call(a))}):c={};var P=Object.keys(f.iconDependencies);P.length?r.send("getImages",{icons:P},function(t,e){l||(l=t,p=e,o.call(a))}):p={},o.call(this)};var zt="undefined"!=typeof performance,Rt={getEntriesByName:function(t){return!!(zt&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(zt&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,n){return!!(zt&&performance&&performance.measure)&&performance.measure(t,e,n)},clearMarks:function(t){return!!(zt&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(zt&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},Lt=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},Rt.mark(this._marks.start)};Lt.prototype.finish=function(){Rt.mark(this._marks.end);var t=Rt.getEntriesByName(this._marks.measure);return 0===t.length&&(Rt.measure(this._marks.measure,this._marks.start,this._marks.end),t=Rt.getEntriesByName(this._marks.measure),Rt.clearMarks(this._marks.start),Rt.clearMarks(this._marks.end),Rt.clearMeasures(this._marks.measure)),t},Rt.Performance=Lt;var Dt=function(t,e,n){this.actor=t,this.layerIndex=e,this.loadVectorData=n||_,this.loading={},this.loaded={}};Dt.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new Rt.Performance(e.request),a=this.loading[i]=new Ot(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return n(e);var u=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))}),r.loaded=r.loaded||{},r.loaded[i]=a})},Dt.prototype.reloadTile=function(t,e){var n=this.loaded,r=t.uid,i=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,a)}},Dt.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},Dt.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var jt=function(){this.loading={},this.loaded={}};jt.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=new t.default$33(r);this.loading[r]=o,o.loadFromImage(e.rawImageData,i),delete this.loading[r],this.loaded=this.loaded||{},this.loaded[r]=o,n(null,o)},jt.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var Bt={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142},Ft={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return b(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=b(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:x},Nt=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(E(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=S(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(E(S,e))),t}(e,n);default:return e}},Vt=t.default$31.VectorTileFeature.prototype.toGeoJSON,Ut=function(e){this._feature=e,this.extent=t.default$10,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};Ut.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.default(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var p=c[l];u.push(new t.default(p[0],p[1]))}o.push(u)}return o},Ut.prototype.toGeoJSON=function(t,e,n){return Vt.call(this,t,e,n)};var qt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.default$10,this.length=e.length,this._features=e};qt.prototype.feature=function(t){return new Ut(this._features[t])};var Zt=t.__moduleExports.VectorTileFeature,$t=T;T.prototype.feature=function(t){return new C(this.features[t],this.options.extent)},C.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.default$34(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},C.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},C.prototype.toGeoJSON=Zt.prototype.toGeoJSON;var Wt=P,Ht=P,Gt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new $t(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return P({layers:n})},Xt=$t;Wt.fromVectorTileJs=Ht,Wt.fromGeojsonVt=Gt,Wt.GeoJSONWrapper=Xt,V.prototype={range:function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var p=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var d=f;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[d]);else{var y=Math.floor((f+h)/2);s=e[2*y],u=e[2*y+1],s>=n&&s<=i&&u>=r&&u<=o&&c.push(t[y]);var m=(p+1)%2;(0===p?n<=s:r<=u)&&(l.push(f),l.push(y-1),l.push(m)),(0===p?i>=s:o>=u)&&(l.push(y+1),l.push(h),l.push(m))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),p=a.pop();if(c-p<=o)for(var h=p;h<=c;h++)F(e[2*h],e[2*h+1],n,r)<=u&&s.push(t[h]);else{var f=Math.floor((p+c)/2),d=e[2*f],y=e[2*f+1];F(d,y,n,r)<=u&&s.push(t[f]);var m=(l+1)%2;(0===l?n-i<=d:r-i<=y)&&(a.push(p),a.push(f-1),a.push(m)),(0===l?n+i>=d:r+i>=y)&&(a.push(f+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}},Z.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;for(var r,i,o,a=[],s=0;s<t.length;s++)t[s].geometry&&a.push((r=t[s],i=s,{x:G((o=r.geometry.coordinates)[0]),y:X(o[1]),zoom:1/0,id:i,parentId:-1}));this.trees[this.options.maxZoom+1]=N(a,K,J,this.options.nodeSize,Float32Array),e&&console.timeEnd(n);for(var u=this.options.maxZoom;u>=this.options.minZoom;u--){var l=+Date.now();a=this._cluster(a,u),this.trees[u]=N(a,K,J,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",u,a.length,+Date.now()-l)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=u.range(G(n),X(o),G(i),X(r)),c=[],p=0;p<l.length;p++){var h=u.points[l[p]];c.push(h.numPoints?W(h):this.points[h.id])}return c},getChildren:function(t){var e=t>>5,n=t%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],l=0;l<s.length;l++){var c=i.points[s[l]];c.parentId===t&&u.push(c.numPoints?W(c):this.points[c.id])}if(0===u.length)throw new Error(r);return u},getLeaves:function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius/o,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i){for(var o=this.getChildren(e),a=0;a<o.length;a++){var s=o[a].properties;if(s&&s.cluster?i+s.point_count<=r?i+=s.point_count:i=this._appendLeaves(t,s.cluster_id,n,r,i):i<r?i++:t.push(o[a]),t.length===n)break}return i},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?H(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var o=t[i];if(!(o.zoom<=e)){o.zoom=e;var a=this.trees[e+1],s=a.within(o.x,o.y,r),u=o.numPoints||1,l=o.x*u,c=o.y*u,p=null;this.options.reduce&&(p=this.options.initial(),this._accumulate(p,o));for(var h=(i<<5)+(e+1),f=0;f<s.length;f++){var d=a.points[s[f]];if(!(d.zoom<=e)){d.zoom=e;var y=d.numPoints||1;l+=d.x*y,c+=d.y*y,u+=y,d.parentId=h,this.options.reduce&&this._accumulate(p,d)}}1===u?n.push(o):(o.parentId=h,n.push($(l/u,c/u,h,u,p)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}},Et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,debug:0},Et.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=St(e,n,r),h=this.tiles[p];if(!h&&(l>1&&console.time("creation"),h=this.tiles[p]=bt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var y,m,v,g,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;y=m=v=g=null,_=ut(t,c,n-x,n+E,0,h.minX,h.maxX,u),b=ut(t,c,n+w,n+S,0,h.minX,h.maxX,u),t=null,_&&(y=ut(_,c,r-x,r+E,1,h.minY,h.maxY,u),m=ut(_,c,r+w,r+S,1,h.minY,h.maxY,u),_=null),b&&(v=ut(b,c,r-x,r+E,1,h.minY,h.maxY,u),g=ut(b,c,r+w,r+S,1,h.minY,h.maxY,u),b=null),l>1&&console.timeEnd("clipping"),s.push(y||[],e+1,2*n,2*r),s.push(m||[],e+1,2*n,2*r+1),s.push(v||[],e+1,2*n+1,2*r),s.push(g||[],e+1,2*n+1,2*r+1)}}},Et.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=St(t,e=(e%a+a)%a,n);if(this.tiles[s])return gt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,p=n;!u&&l>0;)l--,c=Math.floor(c/2),p=Math.floor(p/2),u=this.tiles[St(l,c,p)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,p),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,p,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?gt(this.tiles[s],i):null):null};var Yt=function(e){function n(t,n,r){e.call(this,t,n,kt),r&&(this.loadGeoJSON=r)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var e=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new Rt.Performance(n.request);this.loadGeoJSON(n,function(i,o){if(i||!o)return e(i);if("object"!=typeof o)return e(new Error("Input data is not a valid GeoJSON object."));Nt(o,!0);try{t._geoJSONIndex=n.cluster?(a=n.superclusterOptions,new Z(a)).load(o.features):function(t,e){return new Et(t,e)}(o,n.geojsonVtOptions)}catch(i){return e(i)}t.loaded={};var a,s={};if(r){var u=r.finish();u&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}e(null,s)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded,i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},n.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},n.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},n}(Dt),Kt=function(e){var n=this;this.self=e,this.actor=new t.default$9(e,this),this.layerIndexes={},this.workerSourceTypes={vector:Dt,geojson:Yt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText}};return Kt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},Kt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},Kt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},Kt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},Kt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},Kt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},Kt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},Kt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},Kt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},Kt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},Kt.prototype.loadRTLTextPlugin=function(e,n,r){try{t.plugin.isLoaded()||(this.self.importScripts(n),r(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(t){r(t.toString())}},Kt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new Tt),e},Kt.prototype.getWorkerSource=function(t,e,n){var r=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){var i={send:function(e,n,i){r.actor.send(e,n,i,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t))}return this.workerSources[t][e][n]},Kt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new jt),this.demWorkerSources[t][e]},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&new Kt(self),Kt}),t(["./chunk1.js"],function(t){function e(t){if(!yt)return null;for(var e=0;e<t.length;e++)if(t[e]in yt)return t[e];return t[0]}function n(t,e){var n=i(xt.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"/"!==n.path&&(t.path=""+n.path+t.path),!xt.REQUIRE_ACCESS_TOKEN)return o(t);if(!(e=e||xt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+wt);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+wt);return t.params.push("access_token="+e),o(t)}function r(t){return 0===t.indexOf("mapbox:")}function i(t){var e=t.match(Pt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function o(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function a(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function s(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var l=0;l<n;l++)r[l]=t[l*e+s];for(u(r,i,o,a,n),l=0;l<n;l++)t[l*e+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<e;s++)r[s]=t[l*e+s];for(u(r,i,o,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(i[s])}}function u(t,e,n,r,i){n[0]=0,r[0]=-At,r[1]=+At;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+At}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function l(e,n,r){var i=function(e,n){if(e)return r(e);if(n){var i=t.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),r(null,i)}};return e.url?t.getJSON(n(St(e.url),t.ResourceType.Source),i):t.default$2.frame(function(){return i(null,e)})}function c(t,e,n,r,i){var o=i.maxPitchScaleFactor(),a=t.tilesIn(n,o);a.sort(p);for(var s=[],u=0,l=a;u<l.length;u+=1){var c=l[u];s.push({wrappedTileID:c.tileID.wrapped().key,queryResults:c.tile.queryRenderedFeatures(e,t._state,c.queryGeometry,c.scale,r,i,o,t.transform.calculatePosMatrix(c.tileID.toUnwrapped()))})}var h=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],p=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,d=c;f<d.length;f+=1){var y=d[f];p[y.featureIndex]||(p[y.featureIndex]=!0,h.push(y.feature))}}return e}(s);for(var f in h)h[f].forEach(function(e){var n=t.getFeatureState(e.layer["source-layer"],e.id);e.source=e.layer.source,e.layer["source-layer"]&&(e.sourceLayer=e.layer["source-layer"]),e.state=n});return h}function p(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function h(e,n){var r=n.zoomTo(e.canonical.z);return new t.default((r.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*t.default$10,(r.row-e.canonical.y)*t.default$10)}function f(t){return"raster"===t||"image"===t||"video"===t}function d(){return new t.default$1.Worker(pr.workerUrl)}function y(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.default$17.forEach(function(t){t in n&&(r[t]=n[t])}),r}function m(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=y(t[r],e[t[r].ref]));return t}function v(t,e,n){n.push({command:Be.addSource,args:[t,e[t]]})}function g(t,e,n){e.push({command:Be.removeSource,args:[t]}),n[t]=!0}function _(t,e,n,r){g(t,n,r),v(t,e,n)}function b(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.default$13(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.default$13(e[r][i],n[r][i]))return!1;return!0}function x(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.default$13(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.default$13(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function w(t){return t.id}function E(t,e){return t[e.id]=e,t}function S(e,n){if(!e)return[{command:Be.setStyle,args:[n]}];var r=[];try{if(!t.default$13(e.version,n.version))return[{command:Be.setStyle,args:[n]}];t.default$13(e.center,n.center)||r.push({command:Be.setCenter,args:[n.center]}),t.default$13(e.zoom,n.zoom)||r.push({command:Be.setZoom,args:[n.zoom]}),t.default$13(e.bearing,n.bearing)||r.push({command:Be.setBearing,args:[n.bearing]}),t.default$13(e.pitch,n.pitch)||r.push({command:Be.setPitch,args:[n.pitch]}),t.default$13(e.sprite,n.sprite)||r.push({command:Be.setSprite,args:[n.sprite]}),t.default$13(e.glyphs,n.glyphs)||r.push({command:Be.setGlyphs,args:[n.glyphs]}),t.default$13(e.transition,n.transition)||r.push({command:Be.setTransition,args:[n.transition]}),t.default$13(e.light,n.light)||r.push({command:Be.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||g(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.default$13(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&b(e,n,o)?r.push({command:Be.setGeoJSONSourceData,args:[o,n[o].data]}):_(o,n,r,i)):v(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Be.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,p=(e=e||[]).map(w),h=n.map(w),f=e.reduce(E,{}),d=n.reduce(E,{}),y=p.slice(),m=Object.create(null);for(i=0,o=0;i<p.length;i++)a=p[i],d.hasOwnProperty(a)?o++:(r.push({command:Be.removeLayer,args:[a]}),y.splice(y.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)a=h[h.length-1-i],y[y.length-1-i]!==a&&(f.hasOwnProperty(a)?(r.push({command:Be.removeLayer,args:[a]}),y.splice(y.lastIndexOf(a,y.length-o),1)):o++,l=y[y.length-i],r.push({command:Be.addLayer,args:[d[a],l]}),y.splice(y.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],u=d[a],!m[a]&&!t.default$13(s,u))if(t.default$13(s.source,u.source)&&t.default$13(s["source-layer"],u["source-layer"])&&t.default$13(s.type,u.type)){for(c in x(s.layout,u.layout,r,a,null,Be.setLayoutProperty),x(s.paint,u.paint,r,a,null,Be.setPaintProperty),t.default$13(s.filter,u.filter)||r.push({command:Be.setFilter,args:[a,u.filter]}),t.default$13(s.minzoom,u.minzoom)&&t.default$13(s.maxzoom,u.maxzoom)||r.push({command:Be.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),Be.setPaintProperty):t.default$13(s[c],u[c])||r.push({command:Be.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?x(s[c],u[c],r,a,c.slice(6),Be.setPaintProperty):t.default$13(s[c],u[c])||r.push({command:Be.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:Be.removeLayer,args:[a]}),l=y[y.lastIndexOf(a)+1],r.push({command:Be.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Be.setStyle,args:[n]}]}return r}function k(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.identity(a),t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):(t.scale(a,a,[i.width/2,-i.height/2,1]),t.translate(a,a,[1,-1,0]),t.multiply(a,a,e)),a}function T(e,n,r,i,o){var a=t.identity(new Float32Array(16));return n?(t.multiply(a,a,e),t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle)):(t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/i.width,2/i.height,1])),a}function C(e,n){var r=[e.x,e.y,0,1];D(r,r,n);var i=r[3];return{point:new t.default(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function P(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function M(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom,Ne.properties[i?"text-size":"icon-size"]),p=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height,m=!1,v=0;v<d.length;v++){var g=d.get(v);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!m)L(g.numGlyphs,h);else{m=!1;var _=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(_,_,n),P(_,p)){var b=.5+_[3]/r.transform.cameraToCenterDistance*.5,x=t.evaluateSizeForFeature(l,c,g),w=s?x*b:x/b,E=new t.default(g.anchorX,g.anchorY),S=C(E,o).point,k={},T=O(g,w,!1,u,n,o,a,e.glyphOffsetArray,f,h,S,E,k,y);m=T.useVertical,(T.notEnoughRoom||m||T.needsFlipping&&O(g,w,!0,u,n,o,a,e.glyphOffsetArray,f,h,S,E,k,y).notEnoughRoom)&&L(g.numGlyphs,h)}else L(g.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function I(t,e,n,r,i,o,a,s,u,l,c,p){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),m=e.getoffsetX(h-1),v=R(t*y,n,r,i,o,a,s.segment,f,d,u,l,c,p);if(!v)return null;var g=R(t*m,n,r,i,o,a,s.segment,f,d,u,l,c,p);return g?{first:v,last:g}:null}function A(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function O(e,n,r,i,o,a,s,u,l,c,p,h,f,d){var y,m=n/24,v=e.lineOffsetX*n,g=e.lineOffsetY*n;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=I(m,u,v,g,r,p,h,e,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var E=C(w.first.point,s).point,S=C(w.last.point,s).point;if(i&&!r){var k=A(e.writingMode,E,S,d);if(k)return k}y=[w.first];for(var T=e.glyphStartIndex+1;T<_-1;T++)y.push(R(m*u.getoffsetX(T),v,g,r,p,h,e.segment,b,x,l,a,f,!1));y.push(w.last)}else{if(i&&!r){var P=C(h,o).point,M=e.lineStartIndex+e.segment+1,O=new t.default(l.getx(M),l.gety(M)),L=C(O,o),D=L.signedDistanceFromCamera>0?L.point:z(h,O,P,1,o),j=A(e.writingMode,P,D,d);if(j)return j}var B=R(m*u.getoffsetX(e.glyphStartIndex),v,g,r,p,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!B)return{notEnoughRoom:!0};y=[B]}for(var F=0,N=y;F<N.length;F+=1){var V=N[F];t.addDynamicAttributes(c,V.point,V.angle)}return{}}function z(t,e,n,r,i){var o=C(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function R(e,n,r,i,o,a,s,u,l,c,p,h,f){var d=i?e-n:e+n,y=d>0?1:-1,m=0;i&&(y*=-1,m=Math.PI),y<0&&(m+=Math.PI);for(var v=y>0?u+s:u+s+1,g=v,_=o,b=o,x=0,w=0,E=Math.abs(d);x+w<=E;){if((v+=y)<u||v>=l)return null;if(b=_,void 0===(_=h[v])){var S=new t.default(c.getx(v),c.gety(v)),k=C(S,p);if(k.signedDistanceFromCamera>0)_=h[v]=k.point;else{var T=v-y;_=z(0===x?a:new t.default(c.getx(T),c.gety(T)),S,b,E-x+1,p)}}x+=w,w=b.dist(_)}var P=(E-x)/w,M=_.sub(b),I=M.mult(P)._add(b);return I._add(M._unit()._perp()._mult(r*y)),{point:I,angle:m+Math.atan2(_.y-b.y,_.x-b.x),tileDistance:f?{prevTileDistance:v-y===g?0:c.gettileUnitDistanceFromAnchor(v-y),lastSegmentViewportDistance:E-x}:null}}function L(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Ve,3*r)}}function D(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function j(t,e,n){t[e+4]=n?1:0}function B(e,n,r){return n*(t.default$10/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function F(t,e,n){t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0),t.emplaceBack(e?1:0,n?1:0)}function N(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Xe+e*Ye+n*Ke+e*Je+n*Qe+e*tn+n*en+e}function V(e,n,r,i,o){for(var a=0;a<r.length;a++){var s=r[a];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)V(e,u[l],r.slice(a),i,o);return}}var c=n.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,n.canonical.x-(e.canonical.x<<c),n.canonical.y-(e.canonical.y<<c));o[p.key]=o[p.key]||p}function U(t,e,n,r,i){var o=t.context,a=o.gl,s=i?t.useProgram("collisionCircle"):t.useProgram("collisionBox");o.setDepthMode(Ae.disabled),o.setStencilMode(Oe.disabled),o.setColorMode(t.colorModeForRenderPass());for(var u=0;u<r.length;u++){var l=r[u],c=e.getTile(l),p=c.getBucket(n);if(p){var h=i?p.collisionCircle:p.collisionBox;if(h){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,l.posMatrix),a.uniform1f(s.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance);var f=B(c,1,t.transform.zoom),d=Math.pow(2,t.transform.zoom-c.tileID.overscaledZ);a.uniform1f(s.uniforms.u_pixels_to_tile_units,f),a.uniform2f(s.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits[0]/(f*d),t.transform.pixelsToGLUnits[1]/(f*d)),a.uniform1f(s.uniforms.u_overscale_factor,c.tileID.overscaleFactor()),s.draw(o,i?a.TRIANGLES:a.LINES,n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,null,h.collisionVertexBuffer,null)}}}}function q(t,e,n,r,i,o,a,s,u,l){var c,p=t.context,h=p.gl,f=t.transform,d="map"===s,y="map"===u,m=d&&"point"!==n.layout.get("symbol-placement"),v=d&&!y&&!m,g=y;p.setDepthMode(g?t.depthModeForSublayer(0,Ae.ReadOnly):Ae.disabled);for(var _=0,b=r;_<b.length;_+=1){var x=b[_],w=e.getTile(x),E=w.getBucket(n);if(E){var S=i?E.text:E.icon;if(S&&S.segments.get().length){var C=S.programConfigurations.get(n.id),P=i||E.sdfIcons,I=i?E.textSizeData:E.iconSizeData;if(c||(c=t.useProgram(P?"symbolSDF":"symbolIcon",C),C.setUniforms(t.context,c,n.paint,{zoom:t.transform.zoom}),Z(c,t,n,i,v,y,I)),p.activeTexture.set(h.TEXTURE0),h.uniform1i(c.uniforms.u_texture,0),i)w.glyphAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.uniform2fv(c.uniforms.u_texsize,w.glyphAtlasTexture.size);else{var A=1!==n.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,O=y||0!==f.pitch;w.iconAtlasTexture.bind(P||t.options.rotating||t.options.zooming||A||O?h.LINEAR:h.NEAREST,h.CLAMP_TO_EDGE),h.uniform2fv(c.uniforms.u_texsize,w.iconAtlasTexture.size)}h.uniformMatrix4fv(c.uniforms.u_matrix,!1,t.translatePosMatrix(x.posMatrix,w,o,a));var z=B(w,1,t.transform.zoom),R=k(x.posMatrix,y,d,t.transform,z),L=T(x.posMatrix,y,d,t.transform,z);h.uniformMatrix4fv(c.uniforms.u_gl_coord_matrix,!1,t.translatePosMatrix(L,w,o,a,!0)),m?(h.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,bn),M(E,x.posMatrix,t,i,R,L,y,l)):h.uniformMatrix4fv(c.uniforms.u_label_plane_matrix,!1,R),h.uniform1f(c.uniforms.u_fade_change,t.options.fadeDuration?t.symbolFadeChange:1),$(c,C,t,n,w,S,i,P,y)}}}}function Z(e,n,r,i,o,a,s){var u=n.context.gl,l=n.transform;u.uniform1i(e.uniforms.u_pitch_with_map,a?1:0),u.uniform1f(e.uniforms.u_is_text,i?1:0),u.uniform1f(e.uniforms.u_pitch,l.pitch/360*2*Math.PI);var c="constant"===s.functionType||"source"===s.functionType,p="constant"===s.functionType||"camera"===s.functionType;u.uniform1i(e.uniforms.u_is_size_zoom_constant,c?1:0),u.uniform1i(e.uniforms.u_is_size_feature_constant,p?1:0),u.uniform1f(e.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var h=t.evaluateSizeForZoom(s,l.zoom,xn.properties[i?"text-size":"icon-size"]);void 0!==h.uSizeT&&u.uniform1f(e.uniforms.u_size_t,h.uSizeT),void 0!==h.uSize&&u.uniform1f(e.uniforms.u_size,h.uSize),u.uniform1f(e.uniforms.u_aspect_ratio,l.width/l.height),u.uniform1i(e.uniforms.u_rotate_symbol,o?1:0)}function $(t,e,n,r,i,o,a,s,u){var l=n.context,c=l.gl,p=n.transform;if(s){var h=0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),f=u?Math.cos(p._pitch)*p.cameraToCenterDistance:1;c.uniform1f(t.uniforms.u_gamma_scale,f),h&&(c.uniform1f(t.uniforms.u_is_halo,1),W(o,r,l,t)),c.uniform1f(t.uniforms.u_is_halo,0)}W(o,r,l,t)}function W(t,e,n,r){r.draw(n,n.gl.TRIANGLES,e.id,t.layoutVertexBuffer,t.indexBuffer,t.segments,t.programConfigurations.get(e.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function H(e,n,r,i,o,a,s,u,l){var c,p,h,f,d=n.context,y=d.gl,m=o.paint.get("line-dasharray"),v=o.paint.get("line-pattern");if(u||l){var g=1/B(r,1,n.transform.tileZoom);if(m){c=n.lineAtlas.getDash(m.from,"round"===o.layout.get("line-cap")),p=n.lineAtlas.getDash(m.to,"round"===o.layout.get("line-cap"));var _=c.width*m.fromScale,b=p.width*m.toScale;y.uniform2f(e.uniforms.u_patternscale_a,g/_,-c.height/2),y.uniform2f(e.uniforms.u_patternscale_b,g/b,-p.height/2),y.uniform1f(e.uniforms.u_sdfgamma,n.lineAtlas.width/(256*Math.min(_,b)*t.default$2.devicePixelRatio)/2)}else if(v){if(h=n.imageManager.getPattern(v.from),f=n.imageManager.getPattern(v.to),!h||!f)return;y.uniform2f(e.uniforms.u_pattern_size_a,h.displaySize[0]*v.fromScale/g,h.displaySize[1]),y.uniform2f(e.uniforms.u_pattern_size_b,f.displaySize[0]*v.toScale/g,f.displaySize[1]);var x=n.imageManager.getPixelSize(),w=x.width,E=x.height;y.uniform2fv(e.uniforms.u_texsize,[w,E])}y.uniform2f(e.uniforms.u_gl_units_to_pixels,1/n.transform.pixelsToGLUnits[0],1/n.transform.pixelsToGLUnits[1])}u&&(m?(y.uniform1i(e.uniforms.u_image,0),d.activeTexture.set(y.TEXTURE0),n.lineAtlas.bind(d),y.uniform1f(e.uniforms.u_tex_y_a,c.y),y.uniform1f(e.uniforms.u_tex_y_b,p.y),y.uniform1f(e.uniforms.u_mix,m.t)):v&&(y.uniform1i(e.uniforms.u_image,0),d.activeTexture.set(y.TEXTURE0),n.imageManager.bind(d),y.uniform2fv(e.uniforms.u_pattern_tl_a,h.tl),y.uniform2fv(e.uniforms.u_pattern_br_a,h.br),y.uniform2fv(e.uniforms.u_pattern_tl_b,f.tl),y.uniform2fv(e.uniforms.u_pattern_br_b,f.br),y.uniform1f(e.uniforms.u_fade,v.t))),d.setStencilMode(n.stencilModeForClipping(a));var S=n.translatePosMatrix(a.posMatrix,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"));if(y.uniformMatrix4fv(e.uniforms.u_matrix,!1,S),y.uniform1f(e.uniforms.u_ratio,1/B(r,1,n.transform.zoom)),o.paint.get("line-gradient")){d.activeTexture.set(y.TEXTURE0);var k=o.gradientTexture;if(!o.gradient)return;k||(k=o.gradientTexture=new t.default$4(d,o.gradient,y.RGBA)),k.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.uniform1i(e.uniforms.u_image,0)}e.draw(d,y.TRIANGLES,o.id,i.layoutVertexBuffer,i.indexBuffer,i.segments,s)}function G(t,e,n,r,i){if(!wn(n.paint.get("fill-pattern"),t))for(var o=!0,a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u),c=l.getBucket(n);c&&(t.context.setStencilMode(t.stencilModeForClipping(u)),i(t,e,n,l,u,c,o),o=!1)}}function X(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id);K("fill",n.paint.get("fill-pattern"),t,u,n,r,i,a).draw(t.context,s.TRIANGLES,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,u)}function Y(t,e,n,r,i,o,a){var s=t.context.gl,u=o.programConfigurations.get(n.id),l=K("fillOutline",n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),t,u,n,r,i,a);s.uniform2f(l.uniforms.u_world,s.drawingBufferWidth,s.drawingBufferHeight),l.draw(t.context,s.LINES,n.id,o.layoutVertexBuffer,o.indexBuffer2,o.segments2,u)}function K(t,e,n,r,i,o,a,s){var u,l=n.context.program.get();return e?(u=n.useProgram(t+"Pattern",r),(s||u.program!==l)&&(r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom}),En(e,n,u)),Sn(o,n,u)):(u=n.useProgram(t,r),(s||u.program!==l)&&r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),u}function J(e,n,r,i,o,a,s){var u=e.context,l=u.gl,c=r.paint.get("fill-extrusion-pattern"),p=e.context.program.get(),h=a.programConfigurations.get(r.id),f=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",h);if((s||f.program!==p)&&h.setUniforms(u,f,r.paint,{zoom:e.transform.zoom}),c){if(wn(c,e))return;En(c,e,f),Sn(i,e,f),l.uniform1f(f.uniforms.u_height_factor,-Math.pow(2,o.overscaledZ)/i.tileSize/8)}e.context.gl.uniformMatrix4fv(f.uniforms.u_matrix,!1,e.translatePosMatrix(o.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor"))),function(e,n){var r=n.context.gl,i=n.style.light,o=i.properties.get("position"),a=[o.x,o.y,o.z],s=t.create$2();"viewport"===i.properties.get("anchor")&&t.fromRotation(s,-n.transform.angle),t.transformMat3(a,a,s);var u=i.properties.get("color");r.uniform3fv(e.uniforms.u_lightpos,a),r.uniform1f(e.uniforms.u_lightintensity,i.properties.get("intensity")),r.uniform3f(e.uniforms.u_lightcolor,u.r,u.g,u.b)}(f,e),f.draw(u,l.TRIANGLES,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,h)}function Q(e,n,r){var i=e.context,o=i.gl,a=n.fbo;if(a){var s=e.useProgram("hillshade"),u=e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),!0);!function(t,e,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=e.transform.angle),e.context.gl.uniform2f(t.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}(s,e,r);var l=function(e,n){var r=n.toCoordinate(),i=new t.default$15(r.column,r.row+1,r.zoom);return[e.transform.coordinateLocation(r).lat,e.transform.coordinateLocation(i).lat]}(e,n.tileID);i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,a.colorAttachment.get()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,u),o.uniform2fv(s.uniforms.u_latrange,l),o.uniform1i(s.uniforms.u_image,0);var c=r.paint.get("hillshade-shadow-color");o.uniform4f(s.uniforms.u_shadow,c.r,c.g,c.b,c.a);var p=r.paint.get("hillshade-highlight-color");o.uniform4f(s.uniforms.u_highlight,p.r,p.g,p.b,p.a);var h=r.paint.get("hillshade-accent-color");if(o.uniform4f(s.uniforms.u_accent,h.r,h.g,h.b,h.a),n.maskedBoundsBuffer&&n.maskedIndexBuffer&&n.segments)s.draw(i,o.TRIANGLES,r.id,n.maskedBoundsBuffer,n.maskedIndexBuffer,n.segments);else{var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,s,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length)}}}function tt(e,n,r){var i=e.context,o=i.gl;if(n.dem&&n.dem.level){var a=n.dem.level.dim,s=n.dem.getPixels();if(i.activeTexture.set(o.TEXTURE1),i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(n.tileSize),n.demTexture){var u=n.demTexture;u.update(s,{premultiply:!1}),u.bind(o.NEAREST,o.CLAMP_TO_EDGE)}else n.demTexture=new t.default$4(i,s,o.RGBA,{premultiply:!1}),n.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE);i.activeTexture.set(o.TEXTURE0);var l=n.fbo;if(!l){var c=new t.default$4(i,{width:a,height:a,data:null},o.RGBA);c.bind(o.LINEAR,o.CLAMP_TO_EDGE),(l=n.fbo=i.createFramebuffer(a,a)).colorAttachment.set(c.texture)}i.bindFramebuffer.set(l.framebuffer),i.viewport.set([0,0,a,a]);var p=t.create();t.ortho(p,0,t.default$10,-t.default$10,0,0,1),t.translate(p,p,[0,-t.default$10,0]);var h=e.useProgram("hillshadePrepare");o.uniformMatrix4fv(h.uniforms.u_matrix,!1,p),o.uniform1f(h.uniforms.u_zoom,n.tileID.overscaledZ),o.uniform2fv(h.uniforms.u_dimension,[2*a,2*a]),o.uniform1i(h.uniforms.u_image,1),o.uniform1f(h.uniforms.u_maxzoom,r);var f=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(i,h,f,[]),o.drawArrays(o.TRIANGLE_STRIP,0,f.length),n.needsHillshadePrepare=!1}}function et(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.default$2.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),f=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function nt(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug");i.setDepthMode(Ae.disabled),i.setStencilMode(Oe.disabled),i.setColorMode(e.colorModeForRenderPass()),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.uniform4f(s.uniforms.u_color,1,0,0,1),e.debugVAO.bind(i,s,e.debugBuffer,[]),o.drawArrays(o.LINE_STRIP,0,e.debugBuffer.length);for(var u=function(t,e,n,r){r=r||1;var i,o,a,s,u,l,c,p,h=[];for(i=0,o=t.length;i<o;i++)if(u=kn[t[i]]){for(p=null,a=0,s=u[1].length;a<s;a+=2)-1===u[1][a]&&-1===u[1][a+1]?p=null:(l=e+u[1][a]*r,c=200-u[1][a+1]*r,p&&h.push(p.x,p.y,l,c),p={x:l,y:c});e+=u[0]*r}return h}(r.toString(),50,0,5),l=new t.PosArray,c=0;c<u.length;c+=2)l.emplaceBack(u[c],u[c+1]);var p=i.createVertexBuffer(l,dn.members);(new $t).bind(i,s,p,[]),o.uniform4f(s.uniforms.u_color,1,1,1,1);for(var h=n.getTile(r).tileSize,f=t.default$10/(Math.pow(2,e.transform.zoom-r.overscaledZ)*h),d=[[-1,-1],[-1,1],[1,-1],[1,1]],y=0;y<d.length;y++){var m=d[y];o.uniformMatrix4fv(s.uniforms.u_matrix,!1,t.translate([],a,[f*m[0],f*m[1],0])),o.drawArrays(o.LINES,0,p.length)}o.uniform4f(s.uniforms.u_color,0,0,0,1),o.uniformMatrix4fv(s.uniforms.u_matrix,!1,a),o.drawArrays(o.LINES,0,p.length)}function rt(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function it(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,l=e.dx/e.dy,c=t.dx>0,p=e.dx<0,h=o;h<a;h++){var f=u*Math.max(0,Math.min(t.dy,h+c-t.y0))+t.x0,d=l*Math.max(0,Math.min(e.dy,h+p-e.y0))+e.x0;i(Math.floor(d),Math.ceil(f),h)}}function ot(t,e,n,r,i,o){var a,s=rt(t,e),u=rt(e,n),l=rt(n,t);s.dy>u.dy&&(a=s,s=u,u=a),s.dy>l.dy&&(a=s,s=l,l=a),u.dy>l.dy&&(a=u,u=l,l=a),s.dy&&it(l,s,r,i,o),u.dy&&it(l,u,r,i,o)}function at(t){return t*(2-t)}function st(t){t.parentNode&&t.parentNode.removeChild(t)}function ut(t,e,n){if(t=new Bt(t.lng,t.lat),e){var r=new Bt(t.lng-360,t.lat),i=new Bt(t.lng+360,t.lat),o=n.locationPoint(t).distSqr(e);n.locationPoint(r).distSqr(e)<o?t=r:n.locationPoint(i).distSqr(e)<o&&(t=i)}for(;Math.abs(t.lng-n.center.lng)>180;){var a=n.locationPoint(t);if(a.x>=0&&a.y>=0&&a.x<=n.width&&a.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}function lt(t,e,n){var r=t.classList;for(var i in nr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function ct(t,e,n){var r,i,o,a,s,u,l=n&&n.maxWidth||100,c=t._container.clientHeight/2,p=(r=t.unproject([0,c]),i=t.unproject([l,c]),o=Math.PI/180,a=r.lat*o,s=i.lat*o,u=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((i.lng-r.lng)*o),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var h=3.2808*p;h>5280?pt(e,l,h/5280,"mi"):pt(e,l,h,"ft")}else n&&"nautical"===n.unit?pt(e,l,p/1852,"nm"):pt(e,l,p,"m")}function pt(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:1)),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),t.style.width=e*u+"px",t.innerHTML=s+r}var ht,ft=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===n[t]&&(n[t]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t)),n[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),dt={create:function(e,n,r){var i=t.default$1.document.createElement(e);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.default$1.document.createElementNS(e,n)}},yt=t.default$1.document?t.default$1.document.documentElement.style:null,mt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);dt.disableDrag=function(){yt&&mt&&(ht=yt[mt],yt[mt]="none")},dt.enableDrag=function(){yt&&mt&&(yt[mt]=ht)};var vt=e(["transform","WebkitTransform"]);dt.setTransform=function(t,e){t.style[vt]=e};var gt=!1;try{var _t=Object.defineProperty({},"passive",{get:function(){gt=!0}});t.default$1.addEventListener("test",_t,_t),t.default$1.removeEventListener("test",_t,_t)}catch(t){gt=!1}dt.addEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&gt?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},dt.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),"passive"in r&&gt?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var bt=function(e){e.preventDefault(),e.stopPropagation(),t.default$1.removeEventListener("click",bt,!0)};dt.suppressClick=function(){t.default$1.addEventListener("click",bt,!0),t.default$1.setTimeout(function(){t.default$1.removeEventListener("click",bt,!0)},0)},dt.mousePos=function(e,n){var r=e.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new t.default(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},dt.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.default(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},dt.mouseButton=function(e){return void 0!==t.default$1.InstallTrigger&&2===e.button&&e.ctrlKey&&t.default$1.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},dt.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var xt={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null},wt="See https://www.mapbox.com/api-documentation/#access-tokens",Et=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/fonts/v1"+o.path,n(o,e)},St=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/v4/"+o.authority+".json",o.params.push("secure"),n(o,e)},kt=function(t,e,a,s){var u=i(t);return r(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+a,n(u,s)):(u.path+=""+e+a,o(u))},Tt=/(\.(png|jpg)\d*)(?=$)/,Ct=function(e,n,a){if(!n||!r(n))return e;var s=i(e),u=t.default$2.devicePixelRatio>=2||512===a?"@2x":"",l=t.default$2.supportsWebp?".webp":"$1";return s.path=s.path.replace(Tt,""+u+l),function(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(xt.ACCESS_TOKEN||""))}(s.params),o(s)},Pt=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,Mt=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new t.default$3(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new t.RGBAImage({width:64,height:64}),this.dirty=!0};Mt.prototype.isLoaded=function(){return this.loaded},Mt.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e],i=r.ids,o=r.callback;this._notify(i,o)}this.requestors=[]}},Mt.prototype.getImage=function(t){return this.images[t]},Mt.prototype.addImage=function(t,e){this.images[t]=e},Mt.prototype.removeImage=function(t){delete this.images[t];var e=this.patterns[t];e&&(this.shelfPack.unref(e.bin),delete this.patterns[t])},Mt.prototype.listImages=function(){return Object.keys(this.images)},Mt.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.images[o]||(n=!1)}this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},Mt.prototype._notify=function(t,e){for(var n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=this.images[o];a&&(n[o]={data:a.data.clone(),pixelRatio:a.pixelRatio,sdf:a.sdf})}e(null,n)},Mt.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},Mt.prototype.getPattern=function(e){var n=this.patterns[e];if(n)return n.position;var r=this.getImage(e);if(!r)return null;var i=r.data.width+2,o=r.data.height+2,a=this.shelfPack.packOne(i,o);if(!a)return null;this.atlasImage.resize(this.getPixelSize());var s=r.data,u=this.atlasImage,l=a.x+1,c=a.y+1,p=s.width,h=s.height;t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c},{width:p,height:h}),t.RGBAImage.copy(s,u,{x:0,y:h-1},{x:l,y:c-1},{width:p,height:1}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l,y:c+h},{width:p,height:1}),t.RGBAImage.copy(s,u,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:h}),t.RGBAImage.copy(s,u,{x:0,y:0},{x:l+p,y:c},{width:1,height:h}),this.dirty=!0;var f=new t.ImagePosition(a,r);return this.patterns[e]={bin:a,position:f},f},Mt.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.default$4(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)};var It=a,At=1e20;a.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?At:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?At:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(s(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),s(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var o=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(o/this.radius+this.cutoff))))}return n};var Ot=function(t,e){this.requestTransform=t,this.localIdeographFontFamily=e,this.entries={}};Ot.prototype.setURL=function(t){this.url=t},Ot.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1){var u=s[a];i.push({stack:o,id:u})}t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a)if(a=r._tinySDF(o,n,i))e(null,{stack:n,id:i,glyph:a});else{var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],Ot.loadGlyphRange(n,s,r.url,r.requestTransform,function(t,e){if(e)for(var n in e)o.glyphs[+n]=e[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}})},Ot.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&(t.default$6["CJK Unified Ideographs"](r)||t.default$6["Hangul Syllables"](r))){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new Ot.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Ot.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i(Et(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.default$5(n.data);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},Ot.TinySDF=It;var zt=function(){this.specification=t.default$7.light.position};zt.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},zt.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var Rt=new t.Properties({anchor:new t.DataConstantProperty(t.default$7.light.anchor),position:new zt,color:new t.DataConstantProperty(t.default$7.light.color),intensity:new t.DataConstantProperty(t.default$7.light.intensity)}),Lt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Rt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e){if(!this._validate(t.validateLight,e))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n){return t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.default$7})))},n}(t.Evented),Dt=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};Dt.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},Dt.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];for(var s=this.width/o,u=s/2,l=e.length%2==1,c=-r;c<=r;c++)for(var p=this.nextRow+r+c,h=this.width*p,f=l?-e[e.length-1]:0,d=e[0],y=1,m=0;m<this.width;m++){for(;d<m/s;)f=d,d+=e[y],l&&y===e.length-1&&(d+=e[0]),y++;var v=Math.abs(m-f*s),g=Math.abs(m-d*s),_=Math.min(v,g),b=y%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(b){var E=u-Math.abs(w);x=Math.sqrt(_*_+E*E)}else x=u-Math.sqrt(_*_+w*w)}else x=(b?1:-1)*_;this.data[3+4*(h+m)]=Math.max(0,Math.min(255,x+128))}var S={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,S},Dt.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var jt=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=i[o],s=new e.Actor(a,r,this.id);s.name="Worker "+o,this.actors.push(s)}};jt.prototype.broadcast=function(e,n,r){r=r||function(){},t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r)},jt.prototype.send=function(t,e,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n),r},jt.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},jt.Actor=t.default$9;var Bt=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Bt.prototype.wrap=function(){return new Bt(t.wrap(this.lng,-180,180),this.lat)},Bt.prototype.toArray=function(){return[this.lng,this.lat]},Bt.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Bt.prototype.toBounds=function(t){var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Ft(new Bt(this.lng-n,this.lat-e),new Bt(this.lng+n,this.lat+e))},Bt.convert=function(t){if(t instanceof Bt)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Bt(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Bt(Number(t.lng),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ft=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Ft.prototype.setNorthEast=function(t){return this._ne=t instanceof Bt?new Bt(t.lng,t.lat):Bt.convert(t),this},Ft.prototype.setSouthWest=function(t){return this._sw=t instanceof Bt?new Bt(t.lng,t.lat):Bt.convert(t),this},Ft.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof Bt)e=t,n=t;else{if(!(t instanceof Ft))return Array.isArray(t)?t.every(Array.isArray)?this.extend(Ft.convert(t)):this.extend(Bt.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Bt(e.lng,e.lat),this._ne=new Bt(n.lng,n.lat)),this},Ft.prototype.getCenter=function(){return new Bt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ft.prototype.getSouthWest=function(){return this._sw},Ft.prototype.getNorthEast=function(){return this._ne},Ft.prototype.getNorthWest=function(){return new Bt(this.getWest(),this.getNorth())},Ft.prototype.getSouthEast=function(){return new Bt(this.getEast(),this.getSouth())},Ft.prototype.getWest=function(){return this._sw.lng},Ft.prototype.getSouth=function(){return this._sw.lat},Ft.prototype.getEast=function(){return this._ne.lng},Ft.prototype.getNorth=function(){return this._ne.lat},Ft.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ft.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ft.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ft.convert=function(t){return!t||t instanceof Ft?t:new Ft(t)};var Nt=function(t,e,n){this.bounds=Ft.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24};Nt.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Nt.prototype.contains=function(t){var e=Math.floor(this.lngX(this.bounds.getWest(),t.z)),n=Math.floor(this.latY(this.bounds.getNorth(),t.z)),r=Math.ceil(this.lngX(this.bounds.getEast(),t.z)),i=Math.ceil(this.latY(this.bounds.getSouth(),t.z));return t.x>=e&&t.x<r&&t.y>=n&&t.y<i},Nt.prototype.lngX=function(t,e){return(t+180)*(Math.pow(2,e)/360)},Nt.prototype.latY=function(e,n){var r=t.clamp(Math.sin(Math.PI/180*e),-.9999,.9999),i=Math.pow(2,n)/(2*Math.PI);return Math.pow(2,n-1)+.5*Math.log((1+r)/(1-r))*-i};var Vt=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(r,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=l(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Nt(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function r(t,r){return e.aborted?n(null):t?n(t):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var i=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url),o={request:this.map._transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};o.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,r.bind(this)):"loading"===e.state?e.reloadCallback=n:this.dispatcher.send("reloadTile",o,r.bind(this),e.workerID)},n.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ut=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=l(this._options,this.map._transformRequest,function(n,r){e._tileJSONRequest=null,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Nt(r.bounds,e.minzoom,e.maxzoom)),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.default$4(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),qt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=Ct(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var o=t.default$2.getImageData(i),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:o,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},n}(Ut),Zt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var a=t.default$10/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.default$10,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.default$10,radius:(r.clusterRadius||50)*a,log:!1}},r.workerOptions)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(e){var n=this,r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(t.default$2.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),e(t))},this.workerID)},n.prototype.loadTile=function(e,n){var r=this,i=void 0===e.workerID?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.default$2.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(i,o,function(t,o){return e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))},this.workerID)},n.prototype.abortTile=function(t){t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),$t=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};$t.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,r,i,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},$t.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var p=u;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var d=0,y=n;d<y.length;d+=1){var m=y[d];m.bind(),m.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},$t.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Wt=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._transformRequest(this.url,t.ResourceType.Image),function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.image=t.default$2.getImageData(r),e._finishLoading())})},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){this.coordinates=e;var n=this.map,r=e.map(function(t){return n.transform.locationCoordinate(Bt.convert(t)).zoomTo(0)}),i=this.centerCoord=t.getCoordinatesCenter(r);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new t.CanonicalTileID(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var o=r.map(function(e){var n=e.zoomTo(i.zoom);return new t.default(Math.round((n.column-i.column)*t.default$10),Math.round((n.row-i.row)*t.default$10))});return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,t.default$10,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,t.default$10),this._boundsArray.emplaceBack(o[2].x,o[2].y,t.default$10,t.default$10),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new $t),this.texture||(this.texture=new t.default$4(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ht=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){var e=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var o=i[r];e.urls.push(e.map._transformRequest(o,t.ResourceType.Source).url)}t.getVideo(this.urls,function(n,r){n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new $t),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.default$4(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(Wt),Gt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.default$1.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.default$12("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.default$1.HTMLCanvasElement?this.options.canvas:t.default$1.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.default$11.members)),this.boundsVAO||(this.boundsVAO=new $t),this.texture?e?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new t.default$4(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE)),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(Wt),Xt={vector:Vt,raster:Ut,"raster-dem":qt,geojson:Zt,video:Ht,image:Wt,canvas:Gt},Yt=function(e,n,r,i){var o=new Xt[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o},Kt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Kt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Kt.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Kt.prototype.has=function(t){return t.wrapped().key in this.data},Kt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Kt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Kt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Kt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Kt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var Jt=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Jt.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},Jt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Jt.prototype.updateData=function(t){var e=this.context.gl;this.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Jt.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var Qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},te.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.enableVertexAttribArray(i)}},te.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[Qt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},te.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var ee=function(e){this.context=e,this.current=t.default$8.transparent};ee.prototype.get=function(){return this.current},ee.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t)};var ne=function(t){this.context=t,this.current=1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(t){this.current!==t&&(this.context.gl.clearDepth(t),this.current=t)};var re=function(t){this.context=t,this.current=0};re.prototype.get=function(){return this.current},re.prototype.set=function(t){this.current!==t&&(this.context.gl.clearStencil(t),this.current=t)};var ie=function(t){this.context=t,this.current=[!0,!0,!0,!0]};ie.prototype.get=function(){return this.current},ie.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t)};var oe=function(t){this.context=t,this.current=!0};oe.prototype.get=function(){return this.current},oe.prototype.set=function(t){this.current!==t&&(this.context.gl.depthMask(t),this.current=t)};var ae=function(t){this.context=t,this.current=255};ae.prototype.get=function(){return this.current},ae.prototype.set=function(t){this.current!==t&&(this.context.gl.stencilMask(t),this.current=t)};var se=function(t){this.context=t,this.current={func:t.gl.ALWAYS,ref:0,mask:255}};se.prototype.get=function(){return this.current},se.prototype.set=function(t){var e=this.current;t.func===e.func&&t.ref===e.ref&&t.mask===e.mask||(this.context.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t)};var ue=function(t){this.context=t;var e=this.context.gl;this.current=[e.KEEP,e.KEEP,e.KEEP]};ue.prototype.get=function(){return this.current},ue.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(this.context.gl.stencilOp(t[0],t[1],t[2]),this.current=t)};var le=function(t){this.context=t,this.current=!1};le.prototype.get=function(){return this.current},le.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t}};var ce=function(t){this.context=t,this.current=[0,1]};ce.prototype.get=function(){return this.current},ce.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.depthRange(t[0],t[1]),this.current=t)};var pe=function(t){this.context=t,this.current=!1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t}};var he=function(t){this.context=t,this.current=t.gl.LESS};he.prototype.get=function(){return this.current},he.prototype.set=function(t){this.current!==t&&(this.context.gl.depthFunc(t),this.current=t)};var fe=function(t){this.context=t,this.current=!1};fe.prototype.get=function(){return this.current},fe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t}};var de=function(t){this.context=t;var e=this.context.gl;this.current=[e.ONE,e.ZERO]};de.prototype.get=function(){return this.current},de.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]||(this.context.gl.blendFunc(t[0],t[1]),this.current=t)};var ye=function(e){this.context=e,this.current=t.default$8.transparent};ye.prototype.get=function(){return this.current},ye.prototype.set=function(t){var e=this.current;t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a||(this.context.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t)};var me=function(t){this.context=t,this.current=null};me.prototype.get=function(){return this.current},me.prototype.set=function(t){this.current!==t&&(this.context.gl.useProgram(t),this.current=t)};var ve=function(t){this.context=t,this.current=t.gl.TEXTURE0};ve.prototype.get=function(){return this.current},ve.prototype.set=function(t){this.current!==t&&(this.context.gl.activeTexture(t),this.current=t)};var ge=function(t){this.context=t;var e=this.context.gl;this.current=[0,0,e.drawingBufferWidth,e.drawingBufferHeight]};ge.prototype.get=function(){return this.current},ge.prototype.set=function(t){var e=this.current;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(this.context.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t)};var _e=function(t){this.context=t,this.current=null};_e.prototype.get=function(){return this.current},_e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t}};var be=function(t){this.context=t,this.current=null};be.prototype.get=function(){return this.current},be.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t}};var xe=function(t){this.context=t,this.current=null};xe.prototype.get=function(){return this.current},xe.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t}};var we=function(t){this.context=t,this.current=null};we.prototype.get=function(){return this.current},we.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t}};var Ee=function(t){this.context=t,this.current=null};Ee.prototype.get=function(){return this.current},Ee.prototype.set=function(t){var e=this.context.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t};var Se=function(t){this.context=t,this.current=null};Se.prototype.get=function(){return this.current},Se.prototype.set=function(t){this.current!==t&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(t),this.current=t)};var ke=function(t){this.context=t,this.current=4};ke.prototype.get=function(){return this.current},ke.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t}};var Te=function(t){this.context=t,this.current=!1};Te.prototype.get=function(){return this.current},Te.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t}};var Ce=function(t,e){this.context=t,this.current=null,this.parent=e};Ce.prototype.get=function(){return this.current};var Pe=function(t){function e(e,n){t.call(this,e,n),this.dirty=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.dirty||this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e.prototype.setDirty=function(){this.dirty=!0},e}(Ce),Me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(this.current!==t){var e=this.context.gl;this.context.bindFramebuffer.set(this.parent),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t}},e}(Ce),Ie=function(t,e,n){this.context=t,this.width=e,this.height=n;var r=t.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new Pe(t,i),this.depthAttachment=new Me(t,i)};Ie.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n),t.deleteFramebuffer(this.framebuffer)};var Ae=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ae.ReadOnly=!1,Ae.ReadWrite=!0,Ae.disabled=new Ae(519,Ae.ReadOnly,[0,1]);var Oe=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Oe.disabled=new Oe({func:519,mask:0},0,0,7680,7680,7680);var ze=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};ze.Replace=[1,0],ze.disabled=new ze(ze.Replace,t.default$8.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,t.default$8.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],t.default$8.transparent,[!0,!0,!0,!0]);var Re=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ee(this),this.clearDepth=new ne(this),this.clearStencil=new re(this),this.colorMask=new ie(this),this.depthMask=new oe(this),this.stencilMask=new ae(this),this.stencilFunc=new se(this),this.stencilOp=new ue(this),this.stencilTest=new le(this),this.depthRange=new ce(this),this.depthTest=new pe(this),this.depthFunc=new he(this),this.blend=new fe(this),this.blendFunc=new de(this),this.blendColor=new ye(this),this.program=new me(this),this.activeTexture=new ve(this),this.viewport=new ge(this),this.bindFramebuffer=new _e(this),this.bindRenderbuffer=new be(this),this.bindTexture=new xe(this),this.bindVertexBuffer=new we(this),this.bindElementBuffer=new Ee(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Se(this),this.pixelStoreUnpack=new ke(this),this.pixelStoreUnpackPremultiplyAlpha=new Te(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Re.prototype.createIndexBuffer=function(t,e){return new Jt(this,t,e)},Re.prototype.createVertexBuffer=function(t,e,n){return new te(this,t,e,n)},Re.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Re.prototype.createFramebuffer=function(t,e){return new Ie(this,t,e)},Re.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Re.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Re.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Re.prototype.setColorMode=function(e){t.default$13(e.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)};var Le=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=Yt(n,r,i,this),this._tiles={},this._cache=new Kt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={},this._state=new t.default$16}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles)this._tiles[e].upload(t)},n.prototype.getIds=function(){var e=this;return Object.keys(this._tiles).map(Number).sort(function(n,r){var i=e._tiles[n].tileID,o=e._tiles[r].tileID,a=new t.default(i.canonical.x,i.canonical.y).rotate(e.transform.angle),s=new t.default(o.canonical.x,o.canonical.y).rotate(e.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})},n.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0,{});return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.default$2.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID})),this.map&&(this.map.painter.tileExtentVAO.vao=null)},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},n.prototype._findLoadedChildren=function(t,e,n){var r=!1;for(var i in this._tiles){var o=this._tiles[i];if(!(n[i]||!o.hasData()||o.tileID.overscaledZ<=t.overscaledZ||o.tileID.overscaledZ>e)){var a=Math.pow(2,o.tileID.canonical.z-t.canonical.z);if(Math.floor(o.tileID.canonical.x/a)===t.canonical.x&&Math.floor(o.tileID.canonical.y/a)===t.canonical.y)for(n[i]=o.tileID,r=!0;o&&o.tileID.overscaledZ-1>t.overscaledZ;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!s)break;(o=this._tiles[s.key])&&o.hasData()&&(delete n[i],n[s.key]=s)}}}return r},n.prototype.findLoadedParent=function(t,e,n){for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r);if(!i)return;var o=String(i.key),a=this._tiles[o];if(a&&a.hasData())return n[o]=i,a;if(this._cache.has(i))return n[o]=i,this._cache.get(i)}},n.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),n=Math.floor(5*e),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){var r={};for(var i in this._tiles){var o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+n),r[o.tileID.key]=o}for(var a in this._tiles=r,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o,a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),s=Math.max(a-n.maxOverzooming,this._source.minzoom),u=Math.max(a+n.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(i,a),c={};if(f(this._source.type))for(var p=Object.keys(l),h=0;h<p.length;h++){var d=p[h],y=l[d],m=r._tiles[d];if(m&&(void 0===m.fadeEndTime||m.fadeEndTime>=t.default$2.now())){r._findLoadedChildren(y,u,l)&&(l[d]=y);var v=r.findLoadedParent(y,s,c);v&&r._addTile(v.tileID)}}for(o in c)l[o]||(r._coveredTiles[o]=!0);for(o in c)l[o]=c[o];for(var g=t.keysDifference(this._tiles,l),_=0;_<g.length;_++)r._removeTile(g[_])}},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s=0;s<t.length;s++){var u=t[s],l=this._addTile(u),c=!1;if(l.hasData())r[u.key]=u;else{c=l.wasRequested(),r[u.key]=u;var p=!0;if(e+1>this._source.maxzoom){var h=u.children(this._source.maxzoom)[0],f=this.getTile(h);f&&f.hasData()?r[h.key]=h:p=!1}else{this._findLoadedChildren(u,a,r);for(var d=u.children(this._source.maxzoom),y=0;y<d.length;y++)if(!r[d[y].key]){p=!1;break}}if(!p)for(var m=u.overscaledZ-1;m>=o;--m){var v=u.scaledTo(m);if(i[v.key])break;if(i[v.key]=!0,!(l=this.getTile(v))&&c&&(l=this._addTile(v)),l&&(r[v.key]=v,c=l.wasRequested(),l.hasData()))break}}}return r},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.default$14(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n){for(var r=[],i=this.getIds(),o=1/0,a=1/0,s=-1/0,u=-1/0,l=e[0].zoom,c=0;c<e.length;c++){var p=e[c];o=Math.min(o,p.column),a=Math.min(a,p.row),s=Math.max(s,p.column),u=Math.max(u,p.row)}for(var f=0;f<i.length;f++){var d=this._tiles[i[f]],y=d.tileID,m=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),v=n*d.queryPadding*t.default$10/d.tileSize/m,g=[h(y,new t.default$15(o,a,l)),h(y,new t.default$15(s,u,l))];if(g[0].x-v<t.default$10&&g[0].y-v<t.default$10&&g[1].x+v>=0&&g[1].y+v>=0){for(var _=[],b=0;b<e.length;b++)_.push(h(y,e[b]));r.push({tile:d,tileID:y,queryGeometry:[_],scale:m})}}return r},n.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(function(e){return t._tiles[e].tileID}),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i.toUnwrapped())}return e},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.default$2.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)},n.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},n}(t.Evented);Le.maxOverzooming=10,Le.maxUnderzooming=3;var De,je=function(){this.active={}};je.prototype.acquire=function(t){if(!this.workers){var e=pr.workerCount;for(this.workers=[];this.workers.length<e;)this.workers.push(new d)}return this.active[t]=!0,this.workers.slice()},je.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Be={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Fe=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Fe.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Fe.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Fe.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Fe.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Fe.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Fe.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],p=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-p,y1:c-p,x2:l+p,y2:c+p})}return o?a.filter(o):a}var h={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,r,this._queryCell,a,h,o),i?a.length>0:a},Fe.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,c,i),r?l.length>0:l},Fe.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Fe.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Fe.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Fe.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,p=0,h=l;p<h.length;p+=1){var f=h[p];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(t<=c[d+2]&&e<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var y=this.circleCells[i];if(null!==y)for(var m=this.circles,v=0,g=y;v<g.length;v+=1){var _=g[v];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],E=m[b+2];o.push({key:this.circleKeys[_],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Fe.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var p=this.bboxes,h=0,f=c;h<f.length;h+=1){var d=f[h];if(!l.box[d]){l.box[d]=!0;var y=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,p[y+0],p[y+1],p[y+2],p[y+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var v=this.circles,g=0,_=m;g<_.length;g+=1){var b=_[g];if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circlesCollide(v[x],v[x+1],v[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Fe.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),p=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=p;f++){var d=this.xCellCount*f+h;if(i.call(this,t,e,n,r,d,o,a,s))return}},Fe.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Fe.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Fe.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Fe.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var p=u-s,h=c-l;return p*p+h*h<=n*n};var Ne=t.default$18.layout,Ve=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ue=function(t,e,n){void 0===e&&(e=new Fe(t.width+200,t.height+200,25)),void 0===n&&(n=new Fe(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Ue.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},Ue.prototype.approximateTileDistance=function(t,e,n,r,i){var o=i?1:r/this.pitchfactor,a=t.lastSegmentViewportDistance*n;return t.prevTileDistance+a+(o-1)*a*Math.abs(Math.sin(e))},Ue.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,p,h,f,d){var y=[],m=this.projectAnchor(c,a.anchorX,a.anchorY),v=l/24,g=a.lineOffsetX*l,_=a.lineOffsetY*l,b=new t.default(a.anchorX,a.anchorY),x=I(v,u,g,_,!1,C(b,p).point,b,a,s,p,{},!0),w=!1,E=!1,S=!0,k=m.perspectiveRatio*i,T=1/(i*r),P=0,M=0;x&&(P=this.approximateTileDistance(x.first.tileDistance,x.first.angle,T,m.cameraDistance,f),M=this.approximateTileDistance(x.last.tileDistance,x.last.angle,T,m.cameraDistance,f));for(var A=0;A<e.length;A+=5){var O=e[A],z=e[A+1],R=e[A+2],L=e[A+3];if(!x||L<-P||L>M)j(e,A,!1);else{var D=this.projectPoint(c,O,z),B=R*k;if(y.length>0){var F=D.x-y[y.length-4],N=D.y-y[y.length-3];if(B*B*2>F*F+N*N&&A+8<e.length){var V=e[A+8];if(V>-P&&V<M){j(e,A,!1);continue}}}var U=A/5;y.push(D.x,D.y,B,U),j(e,A,!0);var q=D.x-B,Z=D.y-B,$=D.x+B,W=D.y+B;if(S=S&&this.isOffscreen(q,Z,$,W),E=E||this.isInsideGrid(q,Z,$,W),!n&&this.grid.hitTestCircle(D.x,D.y,B,d)){if(!h)return{circles:[],offscreen:!1};w=!0}}}return{circles:w||!E?[]:y,offscreen:S}},Ue.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.default(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var p={},h={},f=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<d.length;f+=1){var y=d[f],m=y.key;if(void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]={}),!p[m.bucketInstanceId][m.featureIndex]){var v=[new t.default(y.x1,y.y1),new t.default(y.x2,y.y1),new t.default(y.x2,y.y2),new t.default(y.x1,y.y2)];t.polygonIntersectsPolygon(n,v)&&(p[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},Ue.prototype.insertCollisionBox=function(t,e,n,r,i){var o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])},Ue.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Ue.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return D(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},Ue.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),new t.default((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},Ue.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return D(i,i,e),{point:new t.default((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Ue.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},Ue.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var qe=t.default$18.layout,Ze=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};Ze.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(t,e,n,r,i){this.text=new Ze(t?t.text:null,e,n,i),this.icon=new Ze(t?t.icon:null,e,r,i)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var We=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},He=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};He.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var Ge=function(t,e,n){this.transform=t.clone(),this.collisionIndex=new Ue(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new He(n)};Ge.prototype.placeLayerTile=function(e,n,r,i){var o=n.getBucket(e),a=n.latestFeatureIndex;if(o&&a&&e.id===o.layerIds[0]){var s=n.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/t.default$10,p=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h=k(p,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,B(n,1,this.transform.zoom)),f=k(p,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,B(n,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID),this.placeLayerBucket(o,p,h,f,l,c,r,i,s)}},Ge.prototype.placeLayerBucket=function(e,n,r,i,o,a,s,u,l){for(var c=e.layers[0].layout,p=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,qe.properties["text-size"]),h=!e.hasTextData()||c.get("text-optional"),f=!e.hasIconData()||c.get("icon-optional"),d=this.collisionGroups.get(e.sourceID),y=0,m=e.symbolInstances;y<m.length;y+=1){var v=m[y];if(!u[v.crossTileID]){var g=void 0!==v.feature.text,_=void 0!==v.feature.icon,b=!0,x=null,w=null,E=null,S=0,k=0;v.collisionArrays||(v.collisionArrays=e.deserializeCollisionBoxes(l,v.textBoxStartIndex,v.textBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex)),v.collisionArrays.textFeatureIndex&&(S=v.collisionArrays.textFeatureIndex),v.collisionArrays.textBox&&(g=(x=this.collisionIndex.placeCollisionBox(v.collisionArrays.textBox,c.get("text-allow-overlap"),a,n,d.predicate)).box.length>0,b=b&&x.offscreen);var T=v.collisionArrays.textCircles;if(T){var C=e.text.placedSymbolArray.get(v.placedTextSymbolIndices[0]),P=t.evaluateSizeForFeature(e.textSizeData,p,C);w=this.collisionIndex.placeCollisionCircles(T,c.get("text-allow-overlap"),o,a,v.key,C,e.lineVertexArray,e.glyphOffsetArray,P,n,r,s,"map"===c.get("text-pitch-alignment"),d.predicate),g=c.get("text-allow-overlap")||w.circles.length>0,b=b&&w.offscreen}v.collisionArrays.iconFeatureIndex&&(k=v.collisionArrays.iconFeatureIndex),v.collisionArrays.iconBox&&(_=(E=this.collisionIndex.placeCollisionBox(v.collisionArrays.iconBox,c.get("icon-allow-overlap"),a,n,d.predicate)).box.length>0,b=b&&E.offscreen),h||f?f?h||(_=_&&g):g=_&&g:_=g=_&&g,g&&x&&this.collisionIndex.insertCollisionBox(x.box,c.get("text-ignore-placement"),e.bucketInstanceId,S,d.ID),_&&E&&this.collisionIndex.insertCollisionBox(E.box,c.get("icon-ignore-placement"),e.bucketInstanceId,k,d.ID),g&&w&&this.collisionIndex.insertCollisionCircles(w.circles,c.get("text-ignore-placement"),e.bucketInstanceId,S,d.ID),this.placements[v.crossTileID]=new We(g,_,b||e.justReloaded),u[v.crossTileID]=!0}}e.justReloaded=!1},Ge.prototype.commit=function(t,e){this.commitTime=e;var n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{};for(var o in this.placements){var a=this.placements[o],s=i[o];s?(this.opacities[o]=new $e(s,r,a.text,a.icon),n=n||a.text!==s.text.placed||a.icon!==s.icon.placed):(this.opacities[o]=new $e(null,r,a.text,a.icon,a.skipFade),n=n||a.text||a.icon)}for(var u in i){var l=i[u];if(!this.opacities[u]){var c=new $e(l,r,!1,!1);c.isHidden()||(this.opacities[u]=c,n=n||l.text.placed||l.icon.placed)}}n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},Ge.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},Ge.prototype.updateBucketOpacities=function(t,e,n){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();for(var r=t.layers[0].layout,i=new $e(null,0,!1,!1,!0),o=new $e(null,0,r.get("text-allow-overlap"),r.get("icon-allow-overlap"),!0),a=0;a<t.symbolInstances.length;a++){var s=t.symbolInstances[a],u=e[s.crossTileID],l=this.opacities[s.crossTileID];u?l=i:l||(l=o,this.opacities[s.crossTileID]=l),e[s.crossTileID]=!0;var c=s.numGlyphVertices>0||s.numVerticalGlyphVertices>0,p=s.numIconVertices>0;if(c){for(var h=N(l.text),f=(s.numGlyphVertices+s.numVerticalGlyphVertices)/4,d=0;d<f;d++)t.text.opacityVertexArray.emplaceBack(h);for(var y=0,m=s.placedTextSymbolIndices;y<m.length;y+=1){var v=m[y];t.text.placedSymbolArray.get(v).hidden=l.text.isHidden()}}if(p){for(var g=N(l.icon),_=0;_<s.numIconVertices/4;_++)t.icon.opacityVertexArray.emplaceBack(g);t.icon.placedSymbolArray.get(a).hidden=l.icon.isHidden()}s.collisionArrays||(s.collisionArrays=t.deserializeCollisionBoxes(n,s.textBoxStartIndex,s.textBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex));var b=s.collisionArrays;if(b){b.textBox&&t.hasCollisionBoxData()&&F(t.collisionBox.collisionVertexArray,l.text.placed,!1),b.iconBox&&t.hasCollisionBoxData()&&F(t.collisionBox.collisionVertexArray,l.icon.placed,!1);var x=b.textCircles;if(x&&t.hasCollisionCircleData())for(var w=0;w<x.length;w+=5){var E=u||0===x[w+4];F(t.collisionCircle.collisionVertexArray,l.text.placed,E)}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},Ge.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},Ge.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},Ge.prototype.stillRecent=function(t){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>t},Ge.prototype.setStale=function(){this.stale=!0};var Xe=Math.pow(2,25),Ye=Math.pow(2,24),Ke=Math.pow(2,17),Je=Math.pow(2,16),Qe=Math.pow(2,9),tn=Math.pow(2,8),en=Math.pow(2,1),nn=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};nn.prototype.continuePlacement=function(t,e,n,r,i){for(;this._currentTileIndex<t.length;){var o=t[this._currentTileIndex];if(e.placeLayerTile(r,o,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var rn=function(t,e,n,r,i,o){this.placement=new Ge(t,i,o),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};rn.prototype.isDone=function(){return this._done},rn.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.default$2.now(),a=function(){var e=t.default$2.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[i._currentPlacementIndex]],u=i.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(i._inProgressLayer||(i._inProgressLayer=new nn),i._inProgressLayer.continuePlacement(r[s.source],i.placement,i._showCollisionBoxes,s,a))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},rn.prototype.commit=function(t,e){return this.placement.commit(t,e),this.placement};var on=512/t.default$10/2,an=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,t)})}};an.prototype.getScaledCoordinates=function(e,n){var r=n.canonical.z-this.tileID.canonical.z,i=on/Math.pow(2,r),o=e.anchor;return{x:Math.floor((n.canonical.x*t.default$10+o.x)*i),y:Math.floor((n.canonical.y*t.default$10+o.y)*i)}},an.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0,o=t;i<o.length;i+=1){var a=o[i];if(!a.crossTileID){var s=this.indexedSymbolInstances[a.key];if(s)for(var u=this.getScaledCoordinates(a,e),l=0,c=s;l<c.length;l+=1){var p=c[l];if(Math.abs(p.coord.x-u.x)<=r&&Math.abs(p.coord.y-u.y)<=r&&!n[p.crossTileID]){n[p.crossTileID]=!0,a.crossTileID=p.crossTileID;break}}}}};var sn=function(){this.maxCrossTileID=0};sn.prototype.generate=function(){return++this.maxCrossTileID};var un=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};un.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},un.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0,i=e.symbolInstances;r<i.length;r+=1)i[r].crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var o=this.usedCrossTileIDs[t.overscaledZ];for(var a in this.indexes){var s=this.indexes[a];if(Number(a)>t.overscaledZ)for(var u in s){var l=s[u];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,o)}else{var c=s[t.scaledTo(Number(a)).key];c&&c.findMatches(e.symbolInstances,t,o)}}for(var p=0,h=e.symbolInstances;p<h.length;p+=1){var f=h[p];f.crossTileID||(f.crossTileID=n.generate(),o[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new an(t,e.symbolInstances,e.bucketInstanceId),!0},un.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1){var o=i[r];delete this.usedCrossTileIDs[t][o.crossTileID]}},un.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var ln=function(){this.layerIndexes={},this.crossTileIDs=new sn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ln.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new un);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},ln.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var cn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},pn=t.pick(Be,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),hn=t.pick(Be,["setCenter","setZoom","setBearing","setPitch"]),fn=function(e){function o(n,r){var i=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new jt((De||(De=new je),De),this),this.imageManager=new Mt,this.glyphManager=new Ot(n._transformRequest,r.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new ln,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.default$21,this._loaded=!1,this._resetUpdates();var a=this;this._rtlTextPluginCallback=o.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in i._layers){var o=i._layers[r];o.source===n.id&&i._validateLayer(o)}}}})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.loadURL=function(e,o){var a=this;void 0===o&&(o={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var s="boolean"==typeof o.validate?o.validate:!r(e);e=function(t,e){if(!r(t))return t;var o=i(t);return o.path="/styles/v1"+o.path,n(o,e)}(e,o.accessToken);var u=this.map._transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(u,function(e,n){a._request=null,e?a.fire(new t.ErrorEvent(e)):n&&a._load(n,s)})},o.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.default$2.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},o.prototype._load=function(e,n){var r=this;if(!n||!cn(this,t.validateStyle(e))){for(var i in this._loaded=!0,this.stylesheet=e,e.sources)r.addSource(i,e.sources[i],{validate:!1});e.sprite?this._spriteRequest=function(e,n,r){function i(){if(s)r(s);else if(o&&a){var e=t.default$2.getImageData(a),n={};for(var i in o){var u=o[i],l=u.width,c=u.height,p=u.x,h=u.y,f=u.sdf,d=u.pixelRatio,y=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,y,{x:p,y:h},{x:0,y:0},{width:l,height:c}),n[i]={data:y,pixelRatio:d,sdf:f}}r(null,n)}}var o,a,s,u=t.default$2.devicePixelRatio>1?"@2x":"",l=t.getJSON(n(kt(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,s||(s=t,o=e,i())}),c=t.getImage(n(kt(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){c=null,s||(s=t,a=e,i())});return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e.sprite,this.map._transformRequest,function(e,n){if(r._spriteRequest=null,e)r.fire(new t.ErrorEvent(e));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=m(this.stylesheet.layers);this._order=o.map(function(t){return t.id}),this._layers={};for(var a=0,s=o;a<s.length;a+=1){var u=s[a];(u=t.default$20(u)).setEventedParent(r,{layer:{id:u.id}}),r._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Lt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},o.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(e){if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[i];"reload"===o?this._reloadSource(i):"clear"===o&&this._clearSource(i)}for(var a in this._updatedPaintProps)this._layers[a].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire(new t.Event("data",{dataType:"style"}))}for(var s in this.sourceCaches)this.sourceCaches[s].used=!1;for(var u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];p.recalculate(e),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},o.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},o.prototype.setState=function(e){var n=this;if(this._checkLoaded(),cn(this,t.validateStyle(e)))return!1;(e=t.clone(e)).layers=m(e.layers);var r=S(this.serialize(),e).filter(function(t){return!(t.command in hn)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in pn)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},o.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.getImage=function(t){return this.imageManager.getImage(t)},o.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},o.prototype.addSource=function(e,n,r){var i=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,n,null,r)){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Le(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},o.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},o.prototype.addLayer=function(e,n,r){this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone(e),e=t.extend(e,{source:i})),!this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r)){var o=t.default$20(e);this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}});var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o)}}},o.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(t){return this._layers[t]},o.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(e,n){this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.default$13(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",n)||(r.filter=t.clone(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(e){return t.clone(this.getLayer(e).filter)},o.prototype.setLayoutProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.default$13(i.getLayoutProperty(n),r)||(i.setLayoutProperty(n,r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},o.prototype.setPaintProperty=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?t.default$13(i.getPaintProperty(n),r)||(i.setPaintProperty(n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},o.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];void 0!==o?"vector"!==o.getSource().type||i?o.setFeatureState(i,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))):this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},o.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},o.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){var e=this;return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(t){return void 0!==t})},o.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},o.prototype._flattenRenderedFeatures=function(t){for(var e=[],n=this._order.length-1;n>=0;n--)for(var r=this._order[n],i=0,o=t;i<o.length;i+=1){var a=o[i][r];if(a)for(var s=0,u=a;s<u.length;s+=1){var l=u[s];e.push(l)}}return e},o.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var h in this.sourceCaches)n.layers&&!i[h]||l.push(c(this.sourceCaches[h],this._layers,e.worldCoordinate,n,r));return this.placement&&l.push(function(t,e,n,r,i,o){for(var a={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1){var h=c[l];u.push(o[h])}u.sort(p);for(var f=0,d=u;f<d.length;f+=1)!function(){var e=d[f],n=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,r.filter,r.layers,t);for(var i in n){var o=a[i]=a[i]||[],u=n[i];u.sort(function(t,n){var r=e.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-t.featureIndex});for(var l=0,c=u;l<c.length;l+=1){var p=c[l];o.push(p.feature)}}}();for(var y in a)!function(n){a[n].forEach(function(r){var i=t[n],o=e[i.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o})}(y);return a}(this._layers,this.sourceCaches,e.viewport,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenRenderedFeatures(l)},o.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},o.prototype.addSourceType=function(t,e,n){return o.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(o.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!t.default$13(e[i],n[i])){r=!0;break}if(r){var o={now:t.default$2.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(o)}},o.prototype._validate=function(e,n,r,i,o){return(!o||!1!==o.validate)&&cn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.default$7},i)))},o.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},o.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},o.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},o.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},o.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},o.prototype._updatePlacement=function(e,n,r,i){for(var o=!1,a=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var h=this.sourceCaches[p.source];s[p.source]=h.getRenderableIds().map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var f=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);o=o||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.default$2.now()))&&(this.pauseablePlacement=new rn(e,this._order,d,n,r,i),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,t.default$2.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(var y=0,m=this._order;y<m.length;y+=1){var v=m[y],g=this._layers[v];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.default$2.now())},o.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n)},o.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},o}(t.Evented);fn.getSourceType=function(t){return Xt[t]},fn.setSourceType=function(t,e){Xt[t]=e},fn.registerForPluginAvailability=t.registerForPluginAvailability;var dn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),yn={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"uniform float u_overscale_factor;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length / u_overscale_factor;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform float u_maxzoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - u_maxzoom) * a) where a is an arbitrary value\n    // Here we use a=0.3 which works out to the expression below. see \n    // nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - u_maxzoom) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_linesofar;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},lineGradient:{fragmentSource:"\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the entire line,\n    // scaled to [0, 2^15), and the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, vec2(v_lineprogress, 0.5));\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n// the attribute conveying progress along a line is scaled to [0, 2^15)\n#define MAX_LINE_DISTANCE 32767.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp float v_lineprogress;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    v_lineprogress = (floor(a_data.z / 4.0) + a_data.w * 64.0) * 2.0 / MAX_LINE_DISTANCE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n\n    // v_normal.y is 0 at the midpoint of the line, -1 at the lower edge, 1 at the upper edge\n    // we clamp the line width outset to be between 0 and half the pattern height plus padding (2.0)\n    // to ensure we don't sample outside the designated symbol on the sprite sheet.\n    // 0.5 is added to shift the component to be bounded between 0 and 1 for interpolation of\n    // the texture coordinate\n    float y_a = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_a.y + 2.0) / 2.0) / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * clamp(v_width2.s, 0.0, (u_pattern_size_b.y + 2.0) / 2.0) / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        4.0);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 32.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},mn=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var vn in yn)!function(t){var e=yn[t],n={};e.fragmentSource=e.fragmentSource.replace(mn,function(t,e,r,i,o){return n[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"}),e.vertexSource=e.vertexSource.replace(mn,function(t,e,r,i,o){var a="float"===i?"vec2":"vec4";return n[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\nvarying "+r+" "+i+" "+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float a_"+o+"_t;\nattribute "+r+" "+a+" a_"+o+";\n#else\nuniform "+r+" "+i+" u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+r+" "+i+" "+o+" = unpack_mix_"+a+"(a_"+o+", a_"+o+"_t);\n#else\n    "+r+" "+i+" "+o+" = u_"+o+";\n#endif\n"})}(vn);var gn=yn,_n=function(e,n,r,i){var o=e.gl;this.program=o.createProgram();var a=r.defines().concat("#define DEVICE_PIXEL_RATIO "+t.default$2.devicePixelRatio.toFixed(1));i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(gn.prelude.fragmentSource,n.fragmentSource).join("\n"),u=a.concat(gn.prelude.vertexSource,n.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(l,s),o.compileShader(l),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);for(var p=r.layoutAttributes||[],h=0;h<p.length;h++)o.bindAttribLocation(this.program,h,p[h].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var f=0;f<this.numAttributes;f++){var d=o.getActiveAttrib(this.program,f);d&&(this.attributes[d.name]=o.getAttribLocation(this.program,d.name))}for(var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),m=0;m<y;m++){var v=o.getActiveUniform(this.program,m);v&&(this.uniforms[v.name]=o.getUniformLocation(this.program,v.name))}};_n.prototype.draw=function(t,e,n,r,i,o,a,s,u){for(var l,c=t.gl,p=(l={},l[c.LINES]=2,l[c.TRIANGLES]=3,l)[e],h=0,f=o.get();h<f.length;h+=1){var d=f[h],y=d.vaos||(d.vaos={});(y[n]||(y[n]=new $t)).bind(t,this,r,a?a.getPaintVertexBuffers():[],i,d.vertexOffset,s,u),c.drawElements(e,d.primitiveLength*p,c.UNSIGNED_SHORT,d.primitiveOffset*p*2)}};var bn=t.identity(new Float32Array(16)),xn=t.default$18.layout,wn=function(t,e){if(!t)return!1;var n=e.imageManager.getPattern(t.from),r=e.imageManager.getPattern(t.to);return!n||!r},En=function(t,e,n){var r=e.context,i=r.gl,o=e.imageManager.getPattern(t.from),a=e.imageManager.getPattern(t.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,o.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,a.br);var s=e.imageManager.getPixelSize(),u=s.width,l=s.height;i.uniform2fv(n.uniforms.u_texsize,[u,l]),i.uniform1f(n.uniforms.u_mix,t.t),i.uniform2fv(n.uniforms.u_pattern_size_a,o.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,a.displaySize),i.uniform1f(n.uniforms.u_scale_a,t.fromScale),i.uniform1f(n.uniforms.u_scale_b,t.toScale),r.activeTexture.set(i.TEXTURE0),e.imageManager.bind(e.context)},Sn=function(t,e,n){var r=e.context.gl;r.uniform1f(n.uniforms.u_tile_units_to_pixels,1/B(t,1,e.transform.tileZoom));var i=Math.pow(2,t.tileID.overscaledZ),o=t.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(t.tileID.canonical.x+t.tileID.wrap*i),s=o*t.tileID.canonical.y;r.uniform2f(n.uniforms.u_pixel_coord_upper,a>>16,s>>16),r.uniform2f(n.uniforms.u_pixel_coord_lower,65535&a,65535&s)},kn={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},Tn={symbol:function(t,e,n,r){if("translucent"===t.renderPass){var i=t.context;i.setStencilMode(Oe.disabled),i.setColorMode(t.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&q(t,e,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&q(t,e,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),e.map.showCollisionBoxes&&function(t,e,n,r){U(t,e,n,r,!1),U(t,e,n,r,!0)}(t,e,n,r)}},circle:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),a=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=t.context,u=s.gl;s.setDepthMode(t.depthModeForSublayer(0,Ae.ReadOnly)),s.setStencilMode(Oe.disabled),s.setColorMode(t.colorModeForRenderPass());for(var l=!0,c=0;c<r.length;c++){var p=r[c],h=e.getTile(p),f=h.getBucket(n);if(f){var d=t.context.program.get(),y=f.programConfigurations.get(n.id),m=t.useProgram("circle",y);if((l||m.program!==d)&&(y.setUniforms(s,m,n.paint,{zoom:t.transform.zoom}),l=!1),u.uniform1f(m.uniforms.u_camera_to_center_distance,t.transform.cameraToCenterDistance),u.uniform1i(m.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){u.uniform1i(m.uniforms.u_pitch_with_map,1);var v=B(h,1,t.transform.zoom);u.uniform2f(m.uniforms.u_extrude_scale,v,v)}else u.uniform1i(m.uniforms.u_pitch_with_map,0),u.uniform2fv(m.uniforms.u_extrude_scale,t.transform.pixelsToGLUnits);u.uniformMatrix4fv(m.uniforms.u_matrix,!1,t.translatePosMatrix(p.posMatrix,h,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),m.draw(s,u.TRIANGLES,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,y)}}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl;o.setDepthMode(e.depthModeForSublayer(0,Ae.ReadOnly)),o.setStencilMode(Oe.disabled),function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.default$8.transparent}),o.setColorMode(new ze([a.ONE,a.ONE],t.default$8.transparent,[!0,!0,!0,!0]));for(var s=!0,u=0;u<i.length;u++){var l=i[u];if(!n.hasRenderableParent(l)){var c=n.getTile(l),p=c.getBucket(r);if(p){var h=e.context.program.get(),f=p.programConfigurations.get(r.id),d=e.useProgram("heatmap",f),y=e.transform.zoom;(s||d.program!==h)&&(f.setUniforms(e.context,d,r.paint,{zoom:y}),s=!1),a.uniform1f(d.uniforms.u_extrude_scale,B(c,1,y)),a.uniform1f(d.uniforms.u_intensity,r.paint.get("heatmap-intensity")),a.uniformMatrix4fv(d.uniforms.u_matrix,!1,l.posMatrix),d.draw(o,a.TRIANGLES,r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.default$4(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),r.setDepthMode(Ae.disabled),r.setStencilMode(Oe.disabled);var s=e.useProgram("heatmapTexture"),u=n.paint.get("heatmap-opacity");i.uniform1f(s.uniforms.u_opacity,u),i.uniform1i(s.uniforms.u_image,0),i.uniform1i(s.uniforms.u_color_ramp,1);var l=t.create();t.ortho(l,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(s.uniforms.u_matrix,!1,l),i.uniform2f(s.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(e.context,s,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}(e,r))},line:function(t,e,n,r){if("translucent"===t.renderPass){var i=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==o.constantOr(1)){var a=t.context;a.setDepthMode(t.depthModeForSublayer(0,Ae.ReadOnly)),a.setColorMode(t.colorModeForRenderPass());for(var s,u=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":n.paint.get("line-gradient")?"lineGradient":"line",l=!0,c=0,p=r;c<p.length;c+=1){var h=p[c],f=e.getTile(h),d=f.getBucket(n);if(d){var y=d.programConfigurations.get(n.id),m=t.context.program.get(),v=t.useProgram(u,y),g=l||v.program!==m,_=s!==f.tileID.overscaledZ;g&&y.setUniforms(t.context,v,n.paint,{zoom:t.transform.zoom}),H(v,t,f,d,n,h,y,g,_),s=f.tileID.overscaledZ,l=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.context;s.setColorMode(e.colorModeForRenderPass());var u=r.paint.get("fill-pattern")||1!==o.constantOr(t.default$8.transparent).a||1!==a.constantOr(0)?"translucent":"opaque";e.renderPass===u&&(s.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?Ae.ReadWrite:Ae.ReadOnly)),G(e,n,r,i,X)),"translucent"===e.renderPass&&r.paint.get("fill-antialias")&&(s.setDepthMode(e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ae.ReadOnly)),G(e,n,r,i,Y))}},"fill-extrusion":function(e,n,r,i){if(0!==r.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){!function(e,n){var r=e.context,i=r.gl,o=n.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!o){var a=new t.default$4(r,{width:e.width,height:e.height,data:null},i.RGBA);a.bind(i.LINEAR,i.CLAMP_TO_EDGE),(o=n.viewportFrame=r.createFramebuffer(e.width,e.height)).colorAttachment.set(a.texture)}r.bindFramebuffer.set(o.framebuffer),o.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(r.clear({depth:1}),e.depthRboNeedsClear=!1),r.clear({color:t.default$8.transparent}),r.setStencilMode(Oe.disabled),r.setDepthMode(new Ae(i.LEQUAL,Ae.ReadWrite,[0,1])),r.setColorMode(e.colorModeForRenderPass())}(e,r);for(var o=!0,a=0,s=i;a<s.length;a+=1){var u=s[a],l=n.getTile(u),c=l.getBucket(r);c&&(J(e,0,r,l,u,c,o),o=!1)}}else"translucent"===e.renderPass&&function(e,n){var r=n.viewportFrame;if(r){var i=e.context,o=i.gl,a=e.useProgram("extrusionTexture");i.setStencilMode(Oe.disabled),i.setDepthMode(Ae.disabled),i.setColorMode(e.colorModeForRenderPass()),i.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,r.colorAttachment.get()),o.uniform1f(a.uniforms.u_opacity,n.paint.get("fill-extrusion-opacity")),o.uniform1i(a.uniforms.u_image,0);var s=t.create();t.ortho(s,0,e.width,e.height,0,0,1),o.uniformMatrix4fv(a.uniforms.u_matrix,!1,s),o.uniform2f(a.uniforms.u_world,o.drawingBufferWidth,o.drawingBufferHeight),e.viewportVAO.bind(i,a,e.viewportBuffer,[]),o.drawArrays(o.TRIANGLE_STRIP,0,4)}}(e,r)},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var i=t.context,o=e.getSource().maxzoom;i.setDepthMode(t.depthModeForSublayer(0,Ae.ReadOnly)),i.setStencilMode(Oe.disabled),i.setColorMode(t.colorModeForRenderPass());for(var a=0,s=r;a<s.length;a+=1){var u=s[a],l=e.getTile(u);l.needsHillshadePrepare&&"offscreen"===t.renderPass?tt(t,l,o):"translucent"===t.renderPass&&Q(t,l,n)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")){var i,o,a=t.context,s=a.gl,u=e.getSource(),l=t.useProgram("raster");a.setStencilMode(Oe.disabled),a.setColorMode(t.colorModeForRenderPass()),s.uniform1f(l.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),s.uniform1f(l.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),s.uniform1f(l.uniforms.u_saturation_factor,(i=n.paint.get("raster-saturation"))>0?1-1/(1.001-i):-i),s.uniform1f(l.uniforms.u_contrast_factor,(o=n.paint.get("raster-contrast"))>0?1/(1-o):1+o),s.uniform3fv(l.uniforms.u_spin_weights,function(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}(n.paint.get("raster-hue-rotate"))),s.uniform1f(l.uniforms.u_buffer_scale,1),s.uniform1i(l.uniforms.u_image0,0),s.uniform1i(l.uniforms.u_image1,1);for(var c=r.length&&r[0].overscaledZ,p=0,h=r;p<h.length;p+=1){var f=h[p];a.setDepthMode(t.depthModeForSublayer(f.overscaledZ-c,1===n.paint.get("raster-opacity")?Ae.ReadWrite:Ae.ReadOnly,s.LESS));var d=e.getTile(f),y=t.transform.calculatePosMatrix(f.toUnwrapped(),!0);d.registerFadeDuration(n.paint.get("raster-fade-duration")),s.uniformMatrix4fv(l.uniforms.u_matrix,!1,y);var m=e.findLoadedParent(f,0,{}),v=et(d,m,e,n,t.transform),g=void 0,_=void 0,b="nearest"===n.paint.get("raster-resampling")?s.NEAREST:s.LINEAR;if(a.activeTexture.set(s.TEXTURE0),d.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(s.TEXTURE1),m?(m.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,m.tileID.overscaledZ-d.tileID.overscaledZ),_=[d.tileID.canonical.x*g%1,d.tileID.canonical.y*g%1]):d.texture.bind(b,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),s.uniform2fv(l.uniforms.u_tl_parent,_||[0,0]),s.uniform1f(l.uniforms.u_scale_parent,g||1),s.uniform1f(l.uniforms.u_fade_t,v.mix),s.uniform1f(l.uniforms.u_opacity,v.opacity*n.paint.get("raster-opacity")),u instanceof Wt){var x=u.boundsBuffer;u.boundsVAO.bind(a,l,x,[]),s.drawArrays(s.TRIANGLE_STRIP,0,x.length)}else if(d.maskedBoundsBuffer&&d.maskedIndexBuffer&&d.segments)l.draw(a,s.TRIANGLES,n.id,d.maskedBoundsBuffer,d.maskedIndexBuffer,d.segments);else{var w=t.rasterBoundsBuffer;t.rasterBoundsVAO.bind(a,l,w,[]),s.drawArrays(s.TRIANGLE_STRIP,0,w.length)}}}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern"),c=l||1!==r.a||1!==i?"translucent":"opaque";if(t.renderPass===c){var p;if(o.setStencilMode(Oe.disabled),o.setDepthMode(t.depthModeForSublayer(0,"opaque"===c?Ae.ReadWrite:Ae.ReadOnly)),o.setColorMode(t.colorModeForRenderPass()),l){if(wn(l,t))return;p=t.useProgram("backgroundPattern"),En(l,t,p),t.tileExtentPatternVAO.bind(o,p,t.tileExtentBuffer,[])}else p=t.useProgram("background"),a.uniform4fv(p.uniforms.u_color,[r.r,r.g,r.b,r.a]),t.tileExtentVAO.bind(o,p,t.tileExtentBuffer,[]);a.uniform1f(p.uniforms.u_opacity,i);for(var h=0,f=s.coveringTiles({tileSize:u});h<f.length;h+=1){var d=f[h];l&&Sn({tileID:d,tileSize:u},t,p),a.uniformMatrix4fv(p.uniforms.u_matrix,!1,t.transform.calculatePosMatrix(d.toUnwrapped())),a.drawArrays(a.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)nt(t,e,n[r])}},Cn=function(e,n){this.context=new Re(e),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Le.maxUnderzooming+Le.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.default$22,this.crossTileSymbolIndex=new ln};Cn.prototype.resize=function(e,n){var r=this.context.gl;if(this.width=e*t.default$2.devicePixelRatio,this.height=n*t.default$2.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,o=this.style._order;i<o.length;i+=1){var a=o[i];this.style._layers[a].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},Cn.prototype.setup=function(){var e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.default$10,0),n.emplaceBack(0,t.default$10),n.emplaceBack(t.default$10,t.default$10),this.tileExtentBuffer=e.createVertexBuffer(n,dn.members),this.tileExtentVAO=new $t,this.tileExtentPatternVAO=new $t;var r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.default$10,0),r.emplaceBack(t.default$10,t.default$10),r.emplaceBack(0,t.default$10),r.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(r,dn.members),this.debugVAO=new $t;var i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.default$10,0,t.default$10,0),i.emplaceBack(0,t.default$10,0,t.default$10),i.emplaceBack(t.default$10,t.default$10,t.default$10,t.default$10),this.rasterBoundsBuffer=e.createVertexBuffer(i,t.default$11.members),this.rasterBoundsVAO=new $t;var o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,dn.members),this.viewportVAO=new $t},Cn.prototype.clearStencil=function(){var e=this.context,n=e.gl;e.setColorMode(ze.disabled),e.setDepthMode(Ae.disabled),e.setStencilMode(new Oe({func:n.ALWAYS,mask:0},0,255,n.ZERO,n.ZERO,n.ZERO));var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]);var i=this.useProgram("clippingMask");n.uniformMatrix4fv(i.uniforms.u_matrix,!1,r),this.viewportVAO.bind(e,i,this.viewportBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,4)},Cn.prototype._renderTileClippingMasks=function(t){var e=this.context,n=e.gl;e.setColorMode(ze.disabled),e.setDepthMode(Ae.disabled);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=this._tileClippingMaskIDs[a.key]=r++;e.setStencilMode(new Oe({func:n.ALWAYS,mask:0},s,255,n.KEEP,n.KEEP,n.REPLACE));var u=this.useProgram("clippingMask");n.uniformMatrix4fv(u.uniforms.u_matrix,!1,a.posMatrix),this.tileExtentVAO.bind(this.context,u,this.tileExtentBuffer,[]),n.drawArrays(n.TRIANGLE_STRIP,0,this.tileExtentBuffer.length)}},Cn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Oe({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Cn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new ze([e.CONSTANT_COLOR,e.ONE],new t.default$8(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},Cn.prototype.depthModeForSublayer=function(t,e,n){var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,i=r-1+this.depthRange;return new Ae(n||this.context.gl.LEQUAL,e,[i,r])},Cn.prototype.render=function(e,n){var r=this;for(var i in this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.default$2.now()),e.sourceCaches){var o=r.style.sourceCaches[i];o.used&&o.prepare(r.context)}var a=this.style._order,s=t.filterObject(this.style.sourceCaches,function(t){return"raster"===t.getSource().type||"raster-dem"===t.getSource().type});for(var u in s)!function(e){var n=s[e];!function(e,n){for(var r=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),i=0;i<r.length;i++){var o={},a=r[i],s=r.slice(i+1);V(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),o),a.setMask(o,n)}}(n.getVisibleCoordinates().map(function(t){return n.getTile(t)}),r.context)}(u);this.renderPass="offscreen";var l,c=[];this.depthRboNeedsClear=!0;for(var p=0;p<a.length;p++){var h=r.style._layers[a[p]];h.hasOffscreenPass()&&!h.isHidden(r.transform.zoom)&&(h.source!==(l&&l.id)&&(c=[],(l=r.style.sourceCaches[h.source])&&(c=l.getVisibleCoordinates()).reverse()),c.length&&r.renderLayer(r,l,h,c))}this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.default$8.black:t.default$8.transparent,depth:1}),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var f,d=[];for(this.currentLayer=a.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var y=r.style._layers[a[r.currentLayer]];y.source!==(f&&f.id)&&(d=[],(f=r.style.sourceCaches[y.source])&&(r.clearStencil(),d=f.getVisibleCoordinates(),f.getSource().isTileClipped&&r._renderTileClippingMasks(d))),r.renderLayer(r,f,y,d)}this.renderPass="translucent";var m,v=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<a.length;this.currentLayer++){var g=r.style._layers[a[r.currentLayer]];g.source!==(m&&m.id)&&(v=[],(m=r.style.sourceCaches[g.source])&&(r.clearStencil(),v=m.getVisibleCoordinates(),m.getSource().isTileClipped&&r._renderTileClippingMasks(v)),v.reverse()),r.renderLayer(r,m,g,v)}if(this.options.showTileBoundaries){var _=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];_&&Tn.debug(this,_,_.getVisibleCoordinates())}},Cn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},Cn.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,Tn[n.type](t,e,n,r))},Cn.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:B(n,r[0],this.transform.zoom),o?r[1]:B(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},Cn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Cn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Cn.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _n(this.context,gn[t],e,this._showOverdrawInspector)),this.cache[n]},Cn.prototype.useProgram=function(t,e){var n=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.context.program.set(n.program),n};var Pn=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new Bt(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},Mn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},x:{configurable:!0},y:{configurable:!0},point:{configurable:!0}};Pn.prototype.clone=function(){var t=new Pn(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},Mn.minZoom.get=function(){return this._minZoom},Mn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},Mn.maxZoom.get=function(){return this._maxZoom},Mn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},Mn.renderWorldCopies.get=function(){return this._renderWorldCopies},Mn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},Mn.worldSize.get=function(){return this.tileSize*this.scale},Mn.centerPoint.get=function(){return this.size._div(2)},Mn.size.get=function(){return new t.default(this.width,this.height)},Mn.bearing.get=function(){return-this.angle/Math.PI*180},Mn.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$4(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mn.pitch.get=function(){return this._pitch/Math.PI*180},Mn.pitch.set=function(e){var n=t.clamp(e,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},Mn.fov.get=function(){return this._fov/Math.PI*180},Mn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},Mn.zoom.get=function(){return this._zoom},Mn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},Mn.center.get=function(){return this._center},Mn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},Pn.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},Pn.prototype.getVisibleUnwrappedCoordinates=function(e){var n=this.pointCoordinate(new t.default(0,0),0),r=this.pointCoordinate(new t.default(this.width,0),0),i=Math.floor(n.column),o=Math.floor(r.column),a=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var s=i;s<=o;s++)0!==s&&a.push(new t.UnwrappedTileID(s,e));return a},Pn.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=this.pointCoordinate(this.centerPoint,n),o=new t.default(i.column-.5,i.row-.5);return function(e,n,r,i){function o(n,o,u){var l,c,p,h;if(u>=0&&u<=a)for(l=n;l<o;l++)c=Math.floor(l/a),p=(l%a+a)%a,0!==c&&!0!==i||(h=new t.OverscaledTileID(r,c,e,p,u),s[h.key]=h)}void 0===i&&(i=!0);var a=1<<e,s={};return ot(n[0],n[1],n[2],0,a,o),ot(n[2],n[3],n[0],0,a,o),Object.keys(s).map(function(t){return s[t]})}(n,[this.pointCoordinate(new t.default(0,0),n),this.pointCoordinate(new t.default(this.width,0),n),this.pointCoordinate(new t.default(this.width,this.height),n),this.pointCoordinate(new t.default(0,this.height),n)],e.reparseOverscaled?r:n,this._renderWorldCopies).sort(function(t,e){return o.dist(t.canonical)-o.dist(e.canonical)})},Pn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},Mn.unmodified.get=function(){return this._unmodified},Pn.prototype.zoomScale=function(t){return Math.pow(2,t)},Pn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Pn.prototype.project=function(e){return new t.default(this.lngX(e.lng),this.latY(e.lat))},Pn.prototype.unproject=function(t){return new Bt(this.xLng(t.x),this.yLat(t.y))},Mn.x.get=function(){return this.lngX(this.center.lng)},Mn.y.get=function(){return this.latY(this.center.lat)},Mn.point.get=function(){return new t.default(this.x,this.y)},Pn.prototype.lngX=function(t){return(180+t)*this.worldSize/360},Pn.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},Pn.prototype.xLng=function(t){return 360*t/this.worldSize-180},Pn.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},Pn.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},Pn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Pn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Pn.prototype.locationCoordinate=function(e){return new t.default$15(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},Pn.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new Bt(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},Pn.prototype.pointCoordinate=function(e,n){void 0===n&&(n=this.tileZoom);var r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);var o=r[3],a=i[3],s=r[0]/o,u=i[0]/a,l=r[1]/o,c=i[1]/a,p=r[2]/o,h=i[2]/a,f=p===h?0:(0-p)/(h-p);return new t.default$15(t.number(s,u,f)/this.tileSize,t.number(l,c,f)/this.tileSize,this.zoom)._zoomTo(n)},Pn.prototype.coordinatePoint=function(e){var n=e.zoomTo(this.zoom),r=[n.column*this.tileSize,n.row*this.tileSize,0,1];return t.transformMat4(r,r,this.pixelMatrix),new t.default(r[0]/r[3],r[1]/r[3])},Pn.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.default$10,a/t.default$10,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Pn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;o=this.latY(p[1]),e=(a=this.latY(p[0]))-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=this.lngX(h[0]),n=(u=this.lngX(h[1]))-s<l.x?l.x/(u-s):0}var f=Math.max(n||0,e||0);if(f)return this.center=this.unproject(new t.default(n?(u+s)/2:this.x,e?(a+o)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var d=this.y,y=l.y/2;d-y<o&&(i=o+y),d+y>a&&(i=a-y)}if(this.lngRange){var m=this.x,v=l.x/2;m-v<s&&(r=s+v),m+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.default(void 0!==r?r:this.x,void 0!==i?i:this.y))),this._unmodified=c,this._constraining=!1}},Pn.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-n-e),i=this.x,o=this.y,a=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),s=new Float64Array(16);t.perspective(s,this._fov,this.width/this.height,1,a),t.scale(s,s,[1,-1,1]),t.translate(s,s,[0,0,-this.cameraToCenterDistance]),t.rotateX(s,s,this._pitch),t.rotateZ(s,s,this.angle),t.translate(s,s,[-i,-o,0]);var u=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));t.scale(s,s,[1,1,u,1]),this.projMatrix=s;var l=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),h=Math.sin(this.angle),f=i-Math.round(i)+p*l+h*c,d=o-Math.round(o)+p*c+h*l,y=new Float64Array(s);if(t.translate(y,y,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=y,s=t.create(),t.scale(s,s,[this.width/2,-this.height/2,1]),t.translate(s,s,[1,-1,0]),this.pixelMatrix=t.multiply(new Float64Array(16),s,this.projMatrix),!(s=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Pn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.default(0,0)).zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Object.defineProperties(Pn.prototype,Mn);var In=function(){var e,n,r,i,o;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),n=300,r=!1,i=0,o=function(){i=0,r&&(e(),i=setTimeout(o,n),r=!1)},function(){return r=!0,i||o(),i})};In.prototype.addTo=function(e){return this._map=e,t.default$1.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},In.prototype.remove=function(){return t.default$1.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},In.prototype.getHashString=function(t){var e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=t?"#/"+o+"/"+a+"/"+n:"#"+n+"/"+a+"/"+o,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},In.prototype._onHashChange=function(){var e=t.default$1.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},In.prototype._updateHashUnthrottled=function(){var e=this.getHashString();t.default$1.history.replaceState(t.default$1.history.state,"",e)};var An=function(e){function n(n,r,i,o){void 0===o&&(o={});var a=dt.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),On=function(e){function n(n,r,i){var o=dt.touchPos(r.getCanvasContainer(),i),a=o.map(function(t){return r.unproject(t)}),s=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.default(0,0)),u=r.unproject(s);e.call(this,n,{points:o,point:s,lngLats:a,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),zn=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Rn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Rn.prototype.isEnabled=function(){return!!this._enabled},Rn.prototype.isActive=function(){return!!this._active},Rn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},Rn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Rn.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.default$1.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.default$2.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},Rn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},Rn.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e})),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=dt.mousePos(this._el,e);this._around=Bt.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},Rn.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.default$2.now()-this._lastWheelEventTime)/200,1),p=u(c);n.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},Rn.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.default$2.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.default$2.now(),duration:e,easing:n},n};var Ln=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Ln.prototype.isEnabled=function(){return!!this._enabled},Ln.prototype.isActive=function(){return!!this._active},Ln.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ln.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ln.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.default$1.document.addEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.addEventListener("keydown",this._onKeyDown,!1),t.default$1.document.addEventListener("mouseup",this._onMouseUp,!1),dt.disableDrag(),this._startPos=this._lastPos=dt.mousePos(this._el,e),this._active=!0)},Ln.prototype._onMouseMove=function(t){var e=dt.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=dt.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(n.x,e.x),i=Math.max(n.x,e.x),o=Math.min(n.y,e.y),a=Math.max(n.y,e.y);dt.setTransform(this._box,"translate("+r+"px,"+o+"px)"),this._box.style.width=i-r+"px",this._box.style.height=a-o+"px"}},Ln.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=dt.mousePos(this._el,e),i=(new Ft).extend(this._map.unproject(n)).extend(this._map.unproject(r));this._finish(),dt.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(i,{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e,boxZoomBounds:i}))}},Ln.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Ln.prototype._finish=function(){this._active=!1,t.default$1.document.removeEventListener("mousemove",this._onMouseMove,!1),t.default$1.document.removeEventListener("keydown",this._onKeyDown,!1),t.default$1.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(dt.remove(this._box),this._box=null),dt.enableDrag(),delete this._startPos,delete this._lastPos},Ln.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Dn=t.bezier(0,0,.25,1),jn=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};jn.prototype.isEnabled=function(){return"disabled"!==this._state},jn.prototype.isActive=function(){return"active"===this._state},jn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},jn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},jn.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=dt.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==dt.mouseButton(e))return;this._eventButton=0}dt.disableDrag(),t.default$1.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.addEventListener("mouseup",this._onMouseUp),t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.default$2.now(),this._map.getBearing()]],this._startPos=this._lastPos=dt.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},jn.prototype._onMouseMove=function(t){var e=dt.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},jn.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._startPos,i=this._lastPos,o=.8*(r.x-i.x),a=-.5*(r.y-i.y),s=n.bearing-o,u=n.pitch-a,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([t.default$2.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),n.pitch=u),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},jn.prototype._onMouseUp=function(t){if(dt.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",dt.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},jn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},jn.prototype._unbind=function(){t.default$1.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.default$1.document.removeEventListener("mouseup",this._onMouseUp),t.default$1.removeEventListener("blur",this._onBlur),dt.enableDrag()},jn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},jn.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-a[1],p=c<0?-1:1,h=(s[0]-a[0])/1e3;if(0!==c&&0!==h){var f=Math.abs(c*(.25/h));f>180&&(f=180);var d=f/180;l+=p*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:Dn,noMoveStart:!0},{originalEvent:t})}else o()}},jn.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},jn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Bn=t.bezier(0,0,.3,1),Fn=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Fn.prototype.isEnabled=function(){return"disabled"!==this._state},Fn.prototype.isActive=function(){return"active"===this._state},Fn.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},Fn.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Fn.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==dt.mouseButton(e)||(dt.addEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),dt.addEventListener(t.default$1.document,"mouseup",this._onMouseUp),this._start(e)))},Fn.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(dt.addEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),dt.addEventListener(t.default$1.document,"touchend",this._onTouchEnd),this._start(e)))},Fn.prototype._start=function(e){t.default$1.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=dt.mousePos(this._el,e),this._inertia=[[t.default$2.now(),this._startPos]]},Fn.prototype._onMove=function(e){e.preventDefault();var n=dt.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Fn.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},Fn.prototype._onMouseUp=function(t){if(0===dt.mouseButton(t))switch(this._state){case"active":this._state="enabled",dt.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Fn.prototype._unbind=function(){dt.removeEventListener(t.default$1.document,"touchmove",this._onMove,{capture:!0,passive:!1}),dt.removeEventListener(t.default$1.document,"touchend",this._onTouchEnd),dt.removeEventListener(t.default$1.document,"mousemove",this._onMove,{capture:!0}),dt.removeEventListener(t.default$1.document,"mouseup",this._onMouseUp),dt.removeEventListener(t.default$1,"blur",this._onBlur)},Fn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},Fn.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=i.mult(.3/o),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var u=s/750,l=a.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:Bn,noMoveStart:!0},{originalEvent:t})}}},Fn.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Fn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Nn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};Nn.prototype.isEnabled=function(){return!!this._enabled},Nn.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Nn.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Nn.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:at,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Vn=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Vn.prototype.isEnabled=function(){return!!this._enabled},Vn.prototype.isActive=function(){return!!this._active},Vn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vn.prototype.onTouchStart=function(t){var e=this;this.isEnabled()&&(t.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(t)):this._tapped=setTimeout(function(){e._tapped=null},300)))},Vn.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Vn.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Vn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Un=t.bezier(0,0,.15,1),qn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};qn.prototype.isEnabled=function(){return!!this._enabled},qn.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},qn.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},qn.prototype.disableRotation=function(){this._rotationDisabled=!0},qn.prototype.enableRotation=function(){this._rotationDisabled=!1},qn.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=dt.mousePos(this._el,e.touches[0]),r=dt.mousePos(this._el,e.touches[1]);this._startVec=n.sub(r),this._gestureIntent=void 0,this._inertia=[],dt.addEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),dt.addEventListener(t.default$1.document,"touchend",this._onEnd)}},qn.prototype._getTouchEventData=function(t){var e=dt.mousePos(this._el,t.touches[0]),n=dt.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},qn.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},qn.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(s,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.default$2.now(),a,i])}},qn.prototype._onEnd=function(e){dt.removeEventListener(t.default$1.document,"touchmove",this._onMove,{passive:!1}),dt.removeEventListener(t.default$1.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,o=this._map;if(i.length<2)o.snapToNorth({},{originalEvent:e});else{var a=i[i.length-1],s=i[0],u=o.transform.scaleZoom(r*a[1]),l=o.transform.scaleZoom(r*s[1]),c=u-l,p=(a[0]-s[0])/1e3,h=a[2];if(0!==p&&u!==l){var f=.15*c/p;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),y=u+f*d/2e3;y<0&&(y=0),o.easeTo({zoom:y,duration:d,easing:Un,around:this._aroundCenter?o.getCenter():o.unproject(h),noMoveStart:!0},{originalEvent:e})}else o.snapToNorth({},{originalEvent:e})}}},qn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.default$2.now();e.length>2&&n-e[0][0]>160;)e.shift()};var Zn={scrollZoom:Rn,boxZoom:Ln,dragRotate:jn,dragPan:Fn,keyboard:Nn,doubleClickZoom:Vn,touchZoomRotate:qn},$n=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return this.transform.center},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.default.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){if("number"==typeof(n=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var r=n.padding;n.padding={top:r,bottom:r,right:r,left:r}}if(t.default$13(Object.keys(n.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){e=Ft.convert(e);var i=[(n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2],o=Math.min(n.padding.right,n.padding.left),a=Math.min(n.padding.top,n.padding.bottom);n.offset=[n.offset[0]+i[0],n.offset[1]+i[1]];var s=t.default.convert(n.offset),u=this.transform,l=u.project(e.getNorthWest()),c=u.project(e.getSouthEast()),p=c.sub(l),h=(u.width-2*o-2*Math.abs(s.x))/p.x,f=(u.height-2*a-2*Math.abs(s.y))/p.y;if(!(f<0||h<0))return n.center=u.unproject(l.add(c).div(2)),n.zoom=Math.min(u.scaleZoom(u.scale*Math.min(h,f)),n.maxZoom),n.bearing=0,n;t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(e,n,r){var i=this.cameraForBounds(e,n);return i?(n=t.extend(i,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=Bt.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=i.centerPoint.add(t.default.convert(e.offset)),h=i.pointLocation(p),f=Bt.convert(e.center||h);this._normalizeCenter(f);var d,y,m=i.project(h),v=i.project(f).sub(m),g=i.zoomScale(u-o);return e.around&&(d=Bt.convert(e.around),y=i.locationPoint(d)),this._zooming=u!==o,this._rotating=a!==l,this._pitching=c!==s,this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,u,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,c,e)),d)i.setLocationAtPoint(d,y);else{var h=i.zoomScale(i.zoom-o),f=u>o?Math.min(2,g):Math.max(.5,g),_=Math.pow(f,1-e),b=i.unproject(m.add(v.mult(e*_)).mult(h));i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,p)}r._fireMoveEvents(n)},function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout(function(){return r._afterEase(n)},e.delayEndEvents):r._afterEase(n)},e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){function r(t){var e=(w*w-x*x+(t?-1:1)*T*T*E*E)/(2*(t?w:x)*T*E);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}var a=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var s=this.transform,u=this.getZoom(),l=this.getBearing(),c=this.getPitch(),p="zoom"in e?t.clamp(+e.zoom,s.minZoom,s.maxZoom):u,h="bearing"in e?this._normalizeBearing(e.bearing,l):l,f="pitch"in e?+e.pitch:c,d=s.zoomScale(p-u),y=s.centerPoint.add(t.default.convert(e.offset)),m=s.pointLocation(y),v=Bt.convert(e.center||m);this._normalizeCenter(v);var g=s.project(m),_=s.project(v).sub(g),b=e.curve,x=Math.max(s.width,s.height),w=x/d,E=_.mag();if("minZoom"in e){var S=t.clamp(Math.min(e.minZoom,u,p),s.minZoom,s.maxZoom),k=x/s.zoomScale(S-u);b=Math.sqrt(k/E*2)}var T=b*b,C=r(0),P=function(t){return o(C)/o(C+b*t)},M=function(t){return x*((o(C)*(i(e=C+b*t)/o(e))-i(C))/T)/E;var e},I=(r(1)-C)/b;if(Math.abs(E)<1e-6||!isFinite(I)){if(Math.abs(x-w)<1e-6)return this.easeTo(e,n);var A=w<x?-1:1;I=Math.abs(Math.log(w/x))/b,M=function(){return 0},P=function(t){return Math.exp(A*b*t)}}if("duration"in e)e.duration=+e.duration;else{var O="screenSpeed"in e?+e.screenSpeed/b:+e.speed;e.duration=1e3*I/O}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==h,this._pitching=f!==c,this._prepareEase(n,!1),this._ease(function(e){var r=e*I,i=1/P(r);s.zoom=1===e?p:u+s.scaleZoom(i),a._rotating&&(s.bearing=t.number(l,h,e)),a._pitching&&(s.pitch=t.number(c,f,e));var o=s.unproject(g.add(_.mult(M(r))).mult(i));s.setLocationAtPoint(s.renderWorldCopies?o.wrap():o,y),a._fireMoveEvents(n)},function(){return a._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.default$2.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.default$2.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Wn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Wn.prototype.getDefaultPosition=function(){return"bottom-right"},Wn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Wn.prototype.onRemove=function(){dt.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Wn.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var e=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:xt.ACCESS_TOKEN}];if(t){var n=e.reduce(function(t,n,r){return n.value&&(t+=n.key+"="+n.value+(r<e.length-1?"&":"")),t},"?");t.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},Wn.prototype._updateData=function(t){t&&"metadata"===t.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},Wn.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}t.sort(function(t,e){return t.length-e.length}),(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).length?(this._container.innerHTML=t.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Wn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Hn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Hn.prototype.onAdd=function(t){this._map=t,this._container=dt.create("div","mapboxgl-ctrl");var e=dt.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Hn.prototype.onRemove=function(){dt.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Hn.prototype.getDefaultPosition=function(){return"bottom-left"},Hn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Hn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Hn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Gn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Gn.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Gn.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Gn.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Gn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Xn=t.default$1.HTMLImageElement,Yn=t.default$1.HTMLElement,Kn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Jn=function(e){function n(n){if(null!=(n=t.extend({},Kn,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new Pn(n.minZoom,n.maxZoom,n.renderWorldCopies);e.call(this,r,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new Gn;var i=n.transformRequest;if(this._transformRequest=i?function(t,e){return i(t,e)||{url:t}}:function(t){return{url:t}},"string"==typeof n.container){var o=t.default$1.document.getElementById(n.container);if(!o)throw new Error("Container '"+n.container+"' not found.");this._container=o}else{if(!(n.container instanceof Yn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==t.default$1&&(t.default$1.addEventListener("online",this._onWindowOnline,!1),t.default$1.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),r=null,i=!1,o=null;for(var a in Zn)t[a]=new Zn[a](t,e),e.interactive&&e[a]&&t[a].enable(e[a]);dt.addEventListener(n,"mouseout",function(e){t.fire(new An("mouseout",t,e))}),dt.addEventListener(n,"mousedown",function(r){i=!0,o=dt.mousePos(n,r);var a=new An("mousedown",t,r);t.fire(a),a.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),dt.addEventListener(n,"mouseup",function(e){var n=t.dragRotate.isActive();r&&!n&&t.fire(new An("contextmenu",t,r)),r=null,i=!1,t.fire(new An("mouseup",t,e))}),dt.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new An("mousemove",t,e))}}),dt.addEventListener(n,"mouseover",function(e){for(var r=e.target;r&&r!==n;)r=r.parentNode;r===n&&t.fire(new An("mouseover",t,e))}),dt.addEventListener(n,"touchstart",function(n){var r=new On("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))},{passive:!1}),dt.addEventListener(n,"touchmove",function(e){t.fire(new On("touchmove",t,e))},{passive:!1}),dt.addEventListener(n,"touchend",function(e){t.fire(new On("touchend",t,e))}),dt.addEventListener(n,"touchcancel",function(e){t.fire(new On("touchcancel",t,e))}),dt.addEventListener(n,"click",function(r){var i=dt.mousePos(n,r);(i.equals(o)||i.dist(o)<e.clickTolerance)&&t.fire(new An("click",t,r))}),dt.addEventListener(n,"dblclick",function(e){var n=new An("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)}),dt.addEventListener(n,"contextmenu",function(e){var n=t.dragRotate.isActive();i||n?i&&(r=e):t.fire(new An("contextmenu",t,e)),e.preventDefault()}),dt.addEventListener(n,"wheel",function(n){e.interactive&&t.stop();var r=new zn("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)},{passive:!1})}(this,n),this._hash=n.hash&&(new In).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),this.resize(),n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Wn),this.addControl(new Hn,n.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return n.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return-1!==e.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},n.prototype.removeControl=function(t){return t.onRemove(this),this},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return(new Ft).extend(this.transform.pointLocation(new t.default(0,0))).extend(this.transform.pointLocation(new t.default(this.transform.width,0))).extend(this.transform.pointLocation(new t.default(this.transform.width,this.transform.height))).extend(this.transform.pointLocation(new t.default(0,this.transform.height)))},n.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new Ft([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},n.prototype.setMaxBounds=function(t){if(t){var e=Ft.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null==t&&(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},n.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update(),this},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.project=function(t){return this.transform.locationPoint(Bt.convert(t))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.default.convert(e))},n.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},n.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isActive()},n.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},n.prototype.on=function(t,n,r){var i,o=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(i){var a=o.getLayer(n)?o.queryRenderedFeatures(i.point,{layers:[n]}):[];a.length?e||(e=!0,r.call(o,new An(t,o,i.originalEvent,{features:a}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(o.getLayer(n)?o.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?a=!0:a&&(a=!1,r.call(o,new An(t,o,e.originalEvent)))},mouseout:function(e){a&&(a=!1,r.call(o,new An(t,o,e.originalEvent)))}}}}return{layer:n,listener:r,delegates:(i={},i[t]=function(t){var e=o.getLayer(n)?o.queryRenderedFeatures(t.point,{layers:[n]}):[];e.length&&(t.features=e,r.call(o,t),delete t.features)},i)}}();for(var s in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)o.on(s,a.delegates[s]);return this},n.prototype.off=function(t,n,r){if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],o=0;o<i.length;o++){var a=i[o];if(a.layer===n&&a.listener===r){for(var s in a.delegates)this.off(s,a.delegates[s]);return i.splice(o,1),this}}return this},n.prototype.queryRenderedFeatures=function(e,n){var r;return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&((r=arguments[0])instanceof t.default||Array.isArray(r))?(e=arguments[0],n={}):1===arguments.length?(e=void 0,n=arguments[0]):(e=void 0,n={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform):[]},n.prototype._makeQueryGeometry=function(e){var n,r=this;if(void 0===e&&(e=[t.default.convert([0,0]),t.default.convert([this.transform.width,this.transform.height])]),e instanceof t.default||"number"==typeof e[0])n=[t.default.convert(e)];else{var i=[t.default.convert(e[0]),t.default.convert(e[1])];n=[i[0],new t.default(i[1].x,i[0].y),i[1],new t.default(i[0].x,i[1].y),i[0]]}return{viewport:n,worldCoordinate:n.map(function(t){return r.transform.pointCoordinate(t)})}},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){if((!n||!1!==n.diff&&!n.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){t.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new fn(this,n||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;if(void 0===o&&(o=!1),n instanceof Xn){var a=t.default$2.getImageData(n),s=a.width,u=a.height,l=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:o})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,p=n.height,h=n.data;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(h)),pixelRatio:i,sdf:o})}},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n){return this.style.setPaintProperty(t,e,n),this._update(!0),this},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){this.style.setFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.default$1.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=dt.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=dt.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=dt.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=dt.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=dt.create("div","mapboxgl-ctrl-"+t,r)})},n.prototype._resizeCanvas=function(e,n){var r=t.default$1.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},ft.webGLContextAttributes),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?this.painter=new Cn(n,this.transform):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},n.prototype._update=function(t){this.style&&(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender())},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(){this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=t.default$2.now();this.style.zoomHistory.update(n,r);var i=new t.default$23(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(e=!0,this._crossFadingFactor=o),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},n.prototype.remove=function(){this._hash&&this._hash.remove(),this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.default$1&&(t.default$1.removeEventListener("resize",this._onWindowResize,!1),t.default$1.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),st(this._canvasContainer),st(this._controlContainer),st(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},n.prototype._rerender=function(){var e=this;this.style&&!this._frame&&(this._frame=t.default$2.frame(function(){e._frame=null,e._render()}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint=t,this._update()},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(new t.Event(e.dataType+"data",e))},n.prototype._onDataLoading=function(e){this.fire(new t.Event(e.dataType+"dataloading",e))},Object.defineProperties(n.prototype,r),n}($n),Qn={showCompass:!0,showZoom:!0},tr=function(e){var n=this;this.options=t.extend({},Qn,e),this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return n._map.resetNorth()}),this._compassArrow=dt.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};tr.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},tr.prototype.onAdd=function(t){return this._map=t,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jn(t,{button:"left",element:this._compass}),dt.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},tr.prototype.onRemove=function(){dt.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),dt.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},tr.prototype._createButton=function(t,e,n){var r=dt.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",n),r};var er,nr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},rr=function(e){function n(n){if(e.call(this),(arguments[0]instanceof t.default$1.HTMLElement||2===arguments.length)&&(n=t.extend({element:n},arguments[1])),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.default.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=dt.create("div");var r=dt.createNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"height","41px"),r.setAttributeNS(null,"width","27px"),r.setAttributeNS(null,"viewBox","0 0 27 41");var i=dt.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var o=dt.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var a=dt.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"transform","translate(3.0, 29.0)"),a.setAttributeNS(null,"fill","#000000");for(var s=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];s<u.length;s+=1){var l=u[s],c=dt.createNS("http://www.w3.org/2000/svg","ellipse");c.setAttributeNS(null,"opacity","0.04"),c.setAttributeNS(null,"cx","10.5"),c.setAttributeNS(null,"cy","5.80029008"),c.setAttributeNS(null,"rx",l.rx),c.setAttributeNS(null,"ry",l.ry),a.appendChild(c)}var p=dt.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var h=dt.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(h);var f=dt.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");var d=dt.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(d);var y=dt.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var m=dt.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var v=dt.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#000000"),v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962");var g=dt.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),m.appendChild(v),m.appendChild(g),o.appendChild(a),o.appendChild(p),o.appendChild(f),o.appendChild(y),o.appendChild(m),r.appendChild(o),this._element.appendChild(r),this._offset=t.default.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),delete this._map),dt.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Bt.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),dt.setTransform(this._element,nr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"),lt(this._element,this._anchor,"marker"))},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.default.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),ir={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},or=function(e){function n(n){e.call(this),this.options=t.extend({},ir,n),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==er?n(er):void 0!==t.default$1.navigator.permissions?t.default$1.navigator.permissions.query({name:"geolocation"}).then(function(t){er="denied"!==t.state,n(er)}):(er=!!t.default$1.navigator.geolocation,n(er)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),dt.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(t){var e=new Bt(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy;this._map.fitBounds(e.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=dt.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=dt.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new rr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.default$1.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.default$1.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.default$1.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),ar={maxWidth:100,unit:"metric"},sr=function(e){this.options=t.extend({},ar,e),t.bindAll(["_onMove","setUnit"],this)};sr.prototype.getDefaultPosition=function(){return"bottom-left"},sr.prototype._onMove=function(){ct(this._map,this._container,this.options)},sr.prototype.onAdd=function(t){return this._map=t,this._container=dt.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},sr.prototype.onRemove=function(){dt.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},sr.prototype.setUnit=function(t){this.options.unit=t,ct(this._map,this._container,this.options)};var ur=function(){this._fullscreen=!1,t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.default$1.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.default$1.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.default$1.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.default$1.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};ur.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=dt.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._container},ur.prototype.onRemove=function(){dt.remove(this._container),this._map=null,t.default$1.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ur.prototype._checkFullscreenSupport=function(){return!!(t.default$1.document.fullscreenEnabled||t.default$1.document.mozFullScreenEnabled||t.default$1.document.msFullscreenEnabled||t.default$1.document.webkitFullscreenEnabled)},ur.prototype._setupUI=function(){var e=this._fullscreenButton=dt.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.default$1.document.addEventListener(this._fullscreenchange,this._changeIcon)},ur.prototype._isFullscreen=function(){return this._fullscreen},ur.prototype._changeIcon=function(){(t.default$1.document.fullscreenElement||t.default$1.document.mozFullScreenElement||t.default$1.document.webkitFullscreenElement||t.default$1.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},ur.prototype._onClickFullscreen=function(){this._isFullscreen()?t.default$1.document.exitFullscreen?t.default$1.document.exitFullscreen():t.default$1.document.mozCancelFullScreen?t.default$1.document.mozCancelFullScreen():t.default$1.document.msExitFullscreen?t.default$1.document.msExitFullscreen():t.default$1.document.webkitCancelFullScreen&&t.default$1.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()};var lr={closeButton:!0,closeOnClick:!0,className:""},cr=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(lr),n),t.bindAll(["_update","_onClickClose"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&dt.remove(this._content),this._container&&(dt.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(t){return this._lngLat=Bt.convert(t),this._pos=null,this._update(),this},n.prototype.setText=function(e){return this.setDOMContent(t.default$1.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.default$1.document.createDocumentFragment(),i=t.default$1.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&dt.remove(this._content),this._content=dt.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=dt.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(){var e=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=dt.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=dt.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return e._container.classList.add(t)})),this._map.transform.renderWorldCopies&&(this._lngLat=ut(this._lngLat,this._pos,this._map.transform));var n=this._pos=this._map.project(this._lngLat),r=this.options.anchor,i=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.default(0,0),top:new t.default(0,n),"top-left":new t.default(r,r),"top-right":new t.default(-r,r),bottom:new t.default(0,-n),"bottom-left":new t.default(r,-r),"bottom-right":new t.default(-r,-r),left:new t.default(n,0),right:new t.default(-n,0)}}if(n instanceof t.default||Array.isArray(n)){var i=t.default.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.default.convert(n.center||[0,0]),top:t.default.convert(n.top||[0,0]),"top-left":t.default.convert(n["top-left"]||[0,0]),"top-right":t.default.convert(n["top-right"]||[0,0]),bottom:t.default.convert(n.bottom||[0,0]),"bottom-left":t.default.convert(n["bottom-left"]||[0,0]),"bottom-right":t.default.convert(n["bottom-right"]||[0,0]),left:t.default.convert(n.left||[0,0]),right:t.default.convert(n.right||[0,0])}}return e(new t.default(0,0))}(this.options.offset);if(!r){var o,a=this._container.offsetWidth,s=this._container.offsetHeight;o=n.y+i.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<a/2?o.push("left"):n.x>this._map.transform.width-a/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}var u=n.add(i[r]).round();dt.setTransform(this._container,nr[r]+" translate("+u.x+"px,"+u.y+"px)"),lt(this._container,r,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),pr={version:"0.47.0",supported:ft,workerCount:Math.max(Math.floor(t.default$2.hardwareConcurrency/2),1),setRTLTextPlugin:t.setRTLTextPlugin,Map:Jn,NavigationControl:tr,GeolocateControl:or,AttributionControl:Wn,ScaleControl:sr,FullscreenControl:ur,Popup:cr,Marker:rr,Style:fn,LngLat:Bt,LngLatBounds:Ft,Point:t.default,Evented:t.Evented,config:xt,get accessToken(){return xt.ACCESS_TOKEN},set accessToken(t){xt.ACCESS_TOKEN=t},workerUrl:""};return pr}),r})},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(12),f=n(28),d=n(7),y=n(71),m=["longitude","latitude","zoom","bearing","pitch"],v=["latitude","longitude","zoom","width","height"],g=["bearing","pitch"];!function(t){function e(){var t;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.propNames=m,t}c(e,t),s(e,[{key:"initializeProps",value:function(t,e){for(var n={},r={},i=0;i<v.length;i++){var o=v[i],a=t[o],s=e[o];Object(h.a)(Object(y.b)(a)&&Object(y.b)(s),"".concat(o," must be supplied for transition")),n[o]=a,r[o]=Object(y.a)(o,a,s)}for(var u=0;u<g.length;u++){var l=g[u],c=t[l]||0,p=e[l]||0;n[l]=c,r[l]=Object(y.a)(l,c,p)}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){for(var r,i=Object(d.b)(t,e,n),o=0;o<g.length;o++)r=g[o],i[r]=Object(y.c)(t[r],e[r],n);return i}}])}(f.a)},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",function(){return m});var h=n(12),f=n(28),d=n(71),y=["longitude","latitude","zoom","bearing","pitch"],m=function(t){function e(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:y;return o(this,e),t=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),t.propNames=n,t}return c(e,t),s(e,[{key:"initializeProps",value:function(t,e){var n={},r={},i=!0,o=!1,a=void 0;try{for(var s,u=this.propNames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=t[l],p=e[l];Object(h.a)(Object(d.b)(c)&&Object(d.b)(p),"".concat(l," must be supplied for transition")),n[l]=c,r[l]=Object(d.a)(l,c,p)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r={},i=!0,o=!1,a=void 0;try{for(var s,u,l=this.propNames[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=s.value,r[u]=Object(d.c)(t[u],e[u],n)}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r}}]),e}(f.a)},function(t,e,n){"use strict";var r=n(217);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(72),o=n(222),a=n(223),s=n(224),u=n(225),l=n(18),c=n(226),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h={events:null,recognizers:null,Manager:i.a,rightButton:!1,touchAction:"none",legacyBlockScroll:!0},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.options=Object.assign({},h,n),this.eventHandlers=[],this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);var i=n.events;i&&this.on(i)}return p(t,[{key:"setElement",value:function(t){var e=this;if(this.element&&this.destroy(),this.element=t,t){var n=this.options,r=n.Manager;this.manager=new r(t,{touchAction:n.touchAction,recognizers:n.recognizers||l.e}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(l.f).forEach(function(t){var n=e.manager.get(t);n&&l.f[t].forEach(function(t){n.recognizeWith(t)})}),this.wheelInput=new o.a(t,this._onOtherEvent,{enable:!1,legacyBlockScroll:n.legacyBlockScroll}),this.moveInput=new a.a(t,this._onOtherEvent,{enable:!1}),this.keyInput=new s.a(t,this._onOtherEvent,{enable:!1}),this.contextmenuInput=new u.a(t,this._onOtherEvent,{rightButton:n.rightButton}),this.eventHandlers.forEach(function(t){var n=t.recognizerName,r=t.eventAlias,i=t.wrappedHandler;e._toggleRecognizer(n,!0),e.manager.on(r,i)})}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(t,e,n){if("string"===typeof t)this._addEventHandler(t,e,n);else{n=e;for(var r in t)this._addEventHandler(r,t[r],n)}}},{key:"off",value:function(t,e){if("string"===typeof t)this._removeEventHandler(t,e);else for(var n in t)this._removeEventHandler(n,t[n])}},{key:"_toggleRecognizer",value:function(t,e){var n=this.manager;if(n){var r=n.get(t);if(r){r.set({enable:e});var i=l.g[t];i&&!this.options.recognizers&&i.forEach(function(r){var i=n.get(r);e?i.requireFailure(t):i.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e)}}},{key:"_addEventHandler",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.manager,i=this.eventHandlers,o=this._wrapEventHandler(t,e,n),a=l.c[t]||t,s=l.b[a]||a;this._toggleRecognizer(s,!0);var u=i.filter(function(t){return t.eventAlias===a&&t.srcElement!==n&&(!t.srcElement||t.srcElement.contains(n))});i.push({event:t,eventAlias:a,recognizerName:s,srcElement:n,handler:e,wrappedHandler:o}),u.forEach(function(t){return r.off(a,t.wrappedHandler)}),r&&r.on(a,o),u.forEach(function(t){return r.on(a,t.wrappedHandler)})}},{key:"_removeEventHandler",value:function(t,e){for(var n=this.manager,r=this.eventHandlers,i=!1,o=r.length;o--;){var a=r[o];a.event===t&&a.handler===e&&(n&&n.off(a.eventAlias,a.wrappedHandler),r.splice(o,1),i=!0)}if(i){var s=l.c[t]||t,u=l.b[s]||s;r.find(function(t){return t.recognizerName===u})||this._toggleRecognizer(u,!1)}}},{key:"_wrapEventHandler",value:function(t,e,n){var r=this;return function(i){var o=i.mjolnirEvent;(o||(o=r._normalizeEvent(i),i.mjolnirEvent=o),o.handled&&o.handled!==n)||(!n||n.contains(i.srcEvent.target))&&e(Object.assign({},o,{type:t,stopPropagation:function(){o.handled||(o.handled=n)}}))}}},{key:"_normalizeEvent",value:function(t){var e=this.element;return Object.assign({},t,Object(c.b)(t),Object(c.a)(t,e),{handled:!1,rootElement:e})}},{key:"_onBasicInput",value:function(t){var e=t.srcEvent,n=l.a[e.type];n&&this.manager.emit(n,t)}},{key:"_onOtherEvent",value:function(t){this.manager.emit(t.type,t)}}]),t}();e.a=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){n.d(e,"isBrowserMainThread",function(){return s});var r=n(219),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="object"===("undefined"===typeof t?"undefined":i(t))&&"[object process]"===String(t)&&!t.browser,a=!o||r.a,s=a&&"undefined"!==typeof document;e.default=a}.call(e,n(6))},function(t,e,n){"use strict";(function(t){var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(){return"undefined"!==typeof window&&"object"===n(window.process)&&"renderer"===window.process.type||(!("undefined"===typeof t||"object"!==n(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"===typeof navigator?"undefined":n(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}()}).call(e,n(6))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function i(t){var e=t.prototype.handler;t.prototype.handler=function(t){var n=this.store;t.button>0&&(r(n,function(e){return e.pointerId===t.pointerId})||n.push(t)),e.call(this,t)}}function o(t){t.prototype.handler=function(t){var e=l[t.type];e&a&&t.button>=0&&(this.pressed=!0),e&s&&0===t.which&&(e=u),this.pressed&&(e&u&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}e.b=i,e.a=o;var a=1,s=2,u=4,l={mousedown:a,mousemove:s,mouseup:u}},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(f(t,n),e)}function l(t,e,n){return!!Array.isArray(t)&&(c(t,n[e],n),!0)}function c(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function p(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function h(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&dt(r,n)}function f(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==vt?t.apply(e?e[0]||s:s,e):t}function y(t,e){return t===s?e:t}function m(t,e,n){c(b(e),function(e){t.addEventListener(e,n,!1)})}function v(t,e,n){c(b(e),function(e){t.removeEventListener(e,n,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function E(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function S(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<yt.length;){if(n=yt[o],(r=n?n+i:e)in t)return r;o++}return s}function k(){return Et++}function T(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function C(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function P(t){var e=t.options.inputClass;return new(e||(Tt?U:Ct?$:kt?H:V))(t,M)}function M(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&Mt&&r-i===0,a=e&(At|Ot)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,I(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function I(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=z(e)),i>1&&!n.firstMultiple?n.firstMultiple=z(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=R(r);e.timeStamp=bt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=B(s,u),e.distance=j(s,u),A(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var l=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=_t(l.x)>_t(l.y)?l.x:l.y,e.scale=a?N(a.pointers,r):1,e.rotation=a?F(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,O(n,e);var c=t.element;g(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function A(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Mt&&o.eventType!==At||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function O(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Ot&&(u>Pt||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,p=L(u,l,c);r=p.x,i=p.y,n=_t(p.x)>_t(p.y)?p.x:p.y,o=D(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:gt(t.pointers[n].clientX),clientY:gt(t.pointers[n].clientY)},n++;return{timeStamp:bt(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:gt(t[0].clientX),y:gt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:gt(n/e),y:gt(r/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?zt:_t(t)>=_t(e)?t<0?Rt:Lt:e<0?Dt:jt}function j(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function B(t,e,n){n||(n=Vt);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function F(t,e){return B(e[1],e[0],Ut)+B(t[1],t[0],Ut)}function N(t,e){return j(e[0],e[1],Ut)/j(t[0],t[1],Ut)}function V(){this.evEl=Zt,this.evWin=$t,this.pressed=!1,C.apply(this,arguments)}function U(){this.evEl=Gt,this.evWin=Xt,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function q(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,C.apply(this,arguments)}function Z(t,e){var n=w(t.touches),r=w(t.changedTouches);return e&(At|Ot)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function $(){this.evTarget=te,this.targetIds={},C.apply(this,arguments)}function W(t,e){var n=w(t.touches),r=this.targetIds;if(e&(Mt|It)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return g(t.target,u)}),e===Mt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(At|Ot)&&delete r[a[i].identifier],i++;return s.length?[E(o.concat(s),"identifier",!0),s]:void 0}function H(){C.apply(this,arguments);var t=f(this.handler,this);this.touch=new $(this.manager,t),this.mouse=new V(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&Mt?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(At|Ot)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ee)}}function Y(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=ne&&a<=ne)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function J(t){if(_(t,se))return se;var e=_(t,ue),n=_(t,le);return e&&n?se:e||n?e?ue:le:_(t,ae)?ae:oe}function Q(t){this.options=dt({},this.defaults,t||{}),this.id=k(),this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=pe,this.simultaneous={},this.requireFail=[]}function tt(t){return t&me?"cancel":t&de?"end":t&fe?"move":t&he?"start":""}function et(t){return t==jt?"down":t==Dt?"up":t==Rt?"left":t==Lt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function rt(){Q.apply(this,arguments)}function it(){rt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){rt.apply(this,arguments)}function at(){Q.apply(this,arguments),this._timer=null,this._input=null}function st(){rt.apply(this,arguments)}function ut(){rt.apply(this,arguments)}function lt(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ct(t,e){return e=e||{},e.recognizers=y(e.recognizers,ct.defaults.preset),new pt(t,e)}function pt(t,e){this.options=dt({},ct.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=P(this),this.touchAction=new K(this,this.options.touchAction),ht(this,!0),c(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var n=t.element;if(n.style){var r;c(t.options.cssProps,function(i,o){r=S(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function ft(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var dt,yt=["","webkit","Moz","MS","ms","o"],mt=o.createElement("div"),vt="function",gt=Math.round,_t=Math.abs,bt=Date.now;dt="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var xt=p(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),wt=p(function(t,e){return xt(t,e,!0)},"merge","Use `assign`."),Et=1,St=/mobile|tablet|ip(ad|hone|od)|android/i,kt="ontouchstart"in i,Tt=S(i,"PointerEvent")!==s,Ct=kt&&St.test(navigator.userAgent),Pt=25,Mt=1,It=2,At=4,Ot=8,zt=1,Rt=2,Lt=4,Dt=8,jt=16,Bt=Rt|Lt,Ft=Dt|jt,Nt=Bt|Ft,Vt=["x","y"],Ut=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(T(this.element),this.evWin,this.domHandler)}};var qt={mousedown:Mt,mousemove:It,mouseup:At},Zt="mousedown",$t="mousemove mouseup";h(V,C,{handler:function(t){var e=qt[t.type];e&Mt&&0===t.button&&(this.pressed=!0),e&It&&1!==t.which&&(e=At),this.pressed&&(e&At&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Wt={pointerdown:Mt,pointermove:It,pointerup:At,pointercancel:Ot,pointerout:Ot},Ht={2:"touch",3:"pen",4:"mouse",5:"kinect"},Gt="pointerdown",Xt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(Gt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),h(U,C,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Wt[r],o=Ht[t.pointerType]||t.pointerType,a="touch"==o,s=x(e,t.pointerId,"pointerId");i&Mt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(At|Ot)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Yt={touchstart:Mt,touchmove:It,touchend:At,touchcancel:Ot},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";h(q,C,{handler:function(t){var e=Yt[t.type];if(e===Mt&&(this.started=!0),this.started){var n=Z.call(this,t,e);e&(At|Ot)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:Mt,touchmove:It,touchend:At,touchcancel:Ot},te="touchstart touchmove touchend touchcancel";h($,C,{handler:function(t){var e=Qt[t.type],n=W.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ne=25;h(H,C,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)G.call(this,e,n);else if(i&&Y.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var re=S(mt.style,"touchAction"),ie=re!==s,oe="auto",ae="manipulation",se="none",ue="pan-x",le="pan-y",ce=function(){if(!ie)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),ie&&this.manager.element.style&&ce[t]&&(this.manager.element.style[re]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return c(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,se)&&!ce[se],o=_(r,le)&&!ce[le],a=_(r,ue)&&!ce[ue];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}return a&&o?void 0:i||o&&n&Bt||a&&n&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var pe=1,he=2,fe=4,de=8,ye=de,me=16;Q.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<de&&e(n.options.event+tt(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=de&&e(n.options.event+tt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|pe)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ye|me|32)&&(this.state=pe),this.state=this.process(e),this.state&(he|fe|de|me)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},h(rt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(he|fe),i=this.attrTest(t);return r&&(n&Ot||!i)?e|me:r||i?n&At?e|de:e&he?e|fe:he:32}}),h(it,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Nt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Bt&&e.push(le),t&Ft&&e.push(ue),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Bt?(i=0===o?zt:o<0?Rt:Lt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?zt:a<0?Dt:jt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&he||!(this.state&he)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(ot,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&he)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(at,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(At|Ot)&&!i)this.reset();else if(t.eventType&Mt)this.reset(),this._timer=u(function(){this.state=ye,this.tryEmit()},e.time,this);else if(t.eventType&At)return ye;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ye&&(t&&t.eventType&At?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=bt(),this.manager.emit(this.options.event,this._input)))}}),h(st,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[se]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&he)}}),h(ut,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Bt|Ft,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Bt|Ft)?e=t.overallVelocity:n&Bt?e=t.overallVelocityX:n&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&_t(e)>this.options.velocity&&t.eventType&At},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(lt,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&Mt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=At)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||j(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=ye,this.tryEmit()},e.interval,this),he):ye}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ye&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ct.VERSION="2.0.7",ct.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[ut,{direction:Bt}],[it,{direction:Bt},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};pt.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ye)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(he|fe|de)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return c(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return c(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ft(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},dt(ct,{INPUT_START:Mt,INPUT_MOVE:It,INPUT_END:At,INPUT_CANCEL:Ot,STATE_POSSIBLE:pe,STATE_BEGAN:he,STATE_CHANGED:fe,STATE_ENDED:de,STATE_RECOGNIZED:ye,STATE_CANCELLED:me,STATE_FAILED:32,DIRECTION_NONE:zt,DIRECTION_LEFT:Rt,DIRECTION_RIGHT:Lt,DIRECTION_UP:Dt,DIRECTION_DOWN:jt,DIRECTION_HORIZONTAL:Bt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:Nt,Manager:pt,Input:C,TouchAction:K,TouchInput:$,MouseInput:V,PointerEventInput:U,TouchMouseInput:H,SingleTouchInput:q,Recognizer:Q,AttrRecognizer:rt,Tap:lt,Pan:it,Swipe:ut,Pinch:ot,Rotate:st,Press:at,on:m,off:v,each:c,merge:wt,extend:xt,assign:dt,inherit:h,bindFn:f,prefixed:S}),("undefined"!==typeof i?i:"undefined"!==typeof self?self:{}).Hammer=ct,(r=function(){return ct}.call(e,n,e,t))!==s&&(t.exports=r)}(window,document)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(18),o=n(73),a=(n.n(o),function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),s=-1!==o.userAgent.indexOf("firefox"),u=i.d.WHEEL_EVENTS,l=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.events=u.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return a(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"wheel"===t&&(this.options.enable=e)}},{key:"handleEvent",value:function(t){if(this.options.enable){this.options.legacyBlockScroll&&t.preventDefault();var e=t.deltaY;o.window.WheelEvent&&(s&&t.deltaMode===o.window.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.window.devicePixelRatio),t.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE&&(e*=40));var n={x:t.clientX,y:t.clientY};0!==e&&e%4.000244140625===0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this._onWheel(t,-e,n)}}},{key:"_onWheel",value:function(t,e,n){this.callback({type:"wheel",center:n,delta:e,srcEvent:t,pointerType:"mouse",target:t.target})}}]),t}();e.a=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(18),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i.d.MOUSE_EVENTS,s=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},o),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return o(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"pointermove"===t&&(this.enableMoveEvent=e),"pointerleave"===t&&(this.enableLeaveEvent=e)}},{key:"handleEvent",value:function(t){if(this.enableLeaveEvent&&"mouseleave"===t.type&&this.callback({type:"pointerleave",srcEvent:t,pointerType:"mouse",target:t.target}),this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:t,pointerType:"mouse",target:t.target});break;case"mouseup":this.pressed=!1}}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(18),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=i.d.KEY_EVENTS,s=function(){function t(e,n){var i=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},o),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=a.concat(o.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=1,e.style.outline="none",this.events.forEach(function(t){return e.addEventListener(t,i.handleEvent)})}return o(t,[{key:"destroy",value:function(){var t=this;this.events.forEach(function(e){return t.element.removeEventListener(e,t.handleEvent)})}},{key:"enableEventType",value:function(t,e){"keydown"===t&&(this.enableDownEvent=e),"keyup"===t&&(this.enableUpEvent=e)}},{key:"handleEvent",value:function(t){var e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:"keydown",srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:"keyup",srcEvent:t,key:t.key,target:t.target}))}}]),t}();e.a=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(this,t),this.element=e,this.callback=n,this.options=Object.assign({enable:!0},i),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}return i(t,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"handleEvent",value:function(t){this.callback({type:"contextmenu",center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target}),this.options.rightButton&&t.preventDefault()}}]),t}();e.a=o},function(t,e,n){"use strict";function r(t){var e=u[t.srcEvent.type];if(!e)return null;var n=t.srcEvent,r=n.buttons,i=n.button,g=n.which,_=!1,b=!1,x=!1;return e===s||e===a&&!Number.isFinite(r)?(_=g===l,b=g===c,x=g===p):e===a?(_=Boolean(r&y),b=Boolean(r&v),x=Boolean(r&m)):e===o&&(_=i===h,b=i===f,x=i===d),{leftButton:_,middleButton:b,rightButton:x}}function i(t,e){var n=t.srcEvent;if(!t.center&&!Number.isFinite(n.clientX))return null;var r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),o=i.width/e.offsetWidth,a=i.height/e.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-e.clientLeft)/o,y:(r.y-i.top-e.clientTop)/a}}}e.b=r,e.a=i;var o=1,a=2,s=4,u={pointerdown:o,pointermove:a,pointerup:s,mousedown:o,mousemove:a,mouseup:s},l=1,c=2,p=3,h=0,f=1,d=2,y=1,m=2,v=4},function(t,e,n){"use strict";var r=n(228),i=n.n(r),o=i.a.webkit||i.a.blink?"-webkit-":i.a.gecko?"-moz-":"";e.a={DEFAULTS:{},CURSOR:{GRABBING:"".concat(o,"grabbing"),GRAB:"".concat(o,"grab"),POINTER:"pointer"}}},function(t,e,n){!function(e,r,i){"undefined"!=typeof t&&t.exports?t.exports=i():n(229)("bowser",i)}(0,0,function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,o=e(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),u=!s&&/android/i.test(t),l=/nexus\s*[0-6]\s*/i.test(t),c=!l&&/nexus\s*[0-9]+/i.test(t),p=/CrOS/.test(t),h=/silk/i.test(t),f=/sailfish/i.test(t),d=/tizen/i.test(t),y=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),g=!o&&!h&&/macintosh/i.test(t),_=!u&&!f&&!d&&!y&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),x=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),E=!w&&/[^-]mobi/i.test(t),S=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:a,version:x||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:a,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||x}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:a,version:x||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:a,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:a,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:a,version:x||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:a,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:a,version:x||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:a,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:a,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:a,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:a,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:a,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:a,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},b?(i.msedge=a,i.version=b):(i.msie=a,i.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:a,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:p?i={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:a,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:a,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||x}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:a,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:a,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=a,i.osname="Firefox OS")):h?i={name:"Amazon Silk",silk:a,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:a,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:a,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:x||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:y?(i={name:"WebOS",osname:"WebOS",webos:a,version:x||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=a)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:a,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:d?i={name:"Tizen",osname:"Tizen",tizen:a,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||x}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:a,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||x}:/chromium/i.test(t)?i={name:"Chromium",chromium:a,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||x}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:u?i={name:"Android",version:x}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:a},x&&(i.version=x)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},x&&(i.version=x)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:a,version:e(/googlebot\/(\d+(\.\d+))/i)||x}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=a):(i.name=i.name||"Webkit",i.webkit=a),!i.version&&x&&(i.version=x)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=a,i.version=i.version||e(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!u&&!i.silk?!i.windowsphone&&o?(i[o]=a,i.ios=a,i.osname="iOS"):g?(i.mac=a,i.osname="macOS"):S?(i.xbox=a,i.osname="Xbox"):v?(i.windows=a,i.osname="Windows"):_&&(i.linux=a,i.osname="Linux"):(i.android=a,i.osname="Android");var k="";i.windows?k=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?k=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?(k=e(/Mac OS X (\d+([_\.\s]\d+)*)/i),k=k.replace(/[_\s]/g,".")):o?(k=e(/os (\d+([_\s]\d+)*) like mac os x/i),k=k.replace(/[_\s]/g,".")):u?k=e(/android[ \/-](\d+(\.\d+)*)/i):i.webos?k=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?k=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?k=e(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(k=e(/tizen[\/\s](\d+(\.\d+)*)/i)),k&&(i.osversion=k);var T=!i.windows&&k.split(".")[0];return w||c||"ipad"==o||u&&(3==T||T>=4&&!E)||i.silk?i.tablet=a:(E||"iphone"==o||"ipod"==o||u||l||i.blackberry||i.webos||i.bada)&&(i.mobile=a),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===r([i.version,"1.0"])||i.mzbrowser&&1===r([i.version,"6.0"])||i.focus&&1===r([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=a:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=a:i.x=a,i}function e(t){return t.split(".").length}function n(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function r(t){for(var r=Math.max(e(t[0]),e(t[1])),i=n(t,function(t){var i=r-e(t);return t+=new Array(i+1).join(".0"),n(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(e,n,i){var o=s;"string"===typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=t(i));var a=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!==typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return r([a,e[u]])<0}return n}function o(t,e,n){return!i(t,e,n)}var a=!0,s=t("undefined"!==typeof navigator?navigator.userAgent||"":"");return s.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"===typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=r,s.check=o,s._detect=t,s.detect=t,s})},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function p(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=n(0),v=(n.n(m),n(1)),g=n.n(v),_=n(5),b=Object.assign({},_.a.propTypes,{className:g.a.string,longitude:g.a.number.isRequired,latitude:g.a.number.isRequired,offsetLeft:g.a.number,offsetTop:g.a.number}),x=Object.assign({},_.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0}),w=function(t){function e(){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return d(e,t),p(e,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,r=t.latitude,i=t.offsetLeft,a=t.offsetTop,s=this.context.viewport.project([n,r]),u=o(s,2),l=u[0],c=u[1];return Object(m.createElement)("div",{className:"mapboxgl-marker ".concat(e),ref:this._onContainerLoad,style:{position:"absolute",left:l+i,top:c+a},children:this.props.children})}}]),e}(_.a);w.displayName="Marker",w.propTypes=b,w.defaultProps=x},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return u(t)||s(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}function u(t){if(Array.isArray(t))return t}function l(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function p(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?y(t):e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var m=n(0),v=(n.n(m),n(1)),g=n.n(v),_=n(5),b=n(232),x=Object.assign({},_.a.propTypes,{className:g.a.string,longitude:g.a.number.isRequired,latitude:g.a.number.isRequired,offsetLeft:g.a.number,offsetTop:g.a.number,tipSize:g.a.number,closeButton:g.a.bool,closeOnClick:g.a.bool,anchor:g.a.oneOf(Object.keys(b.a)),dynamicPosition:g.a.bool,onClose:g.a.func}),w=Object.assign({},_.a.defaultProps,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,closeButton:!0,closeOnClick:!0,onClose:function(){}}),E=function(t){function e(t){var n;return l(this,e),n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._getPosition=n._getPosition.bind(y(n)),n._onClose=n._onClose.bind(y(n)),n._contentLoaded=n._contentLoaded.bind(y(n)),n._renderTip=n._renderTip.bind(y(n)),n._renderContent=n._renderContent.bind(y(n)),n._closeOnClick=!1,n}return f(e,t),p(e,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"_getPosition",value:function(t,e){var n=this.context.viewport,r=this.props,i=r.anchor,o=r.dynamicPosition,a=r.tipSize;return this._content&&o?Object(b.b)({x:t,y:e,anchor:i,padding:a,width:n.width,height:n.height,selfWidth:this._content.clientWidth,selfHeight:this._content.clientHeight}):i}},{key:"_onClick",value:function(t){this.props.captureClick&&t.stopPropagation(),(this.props.closeOnClick||this._closeOnClick)&&this.props.onClose()}},{key:"_onClose",value:function(){this._closeOnClick=!0}},{key:"_contentLoaded",value:function(t){this._content=t}},{key:"_renderTip",value:function(){var t=this.props.tipSize;return Object(m.createElement)("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:t}})}},{key:"_renderContent",value:function(){var t=this.props,e=t.closeButton,n=t.children;return Object(m.createElement)("div",{key:"content",ref:this._contentLoaded,className:"mapboxgl-popup-content"},[e&&Object(m.createElement)("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:this._onClose},"\xd7"),n])}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.longitude,r=t.latitude,i=t.offsetLeft,a=t.offsetTop,s=this.context.viewport.project([n,r]),u=o(s,2),l=u[0],c=u[1],p=this._getPosition(l,c),h=b.a[p],f={position:"absolute",left:l+i,top:c+a,transform:"translate(".concat(100*-h.x,"%, ").concat(100*-h.y,"%)")};return Object(m.createElement)("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(p," ").concat(e),style:f,ref:this._onContainerLoad},[this._renderTip(),this._renderContent()])}}]),e}(_.a);E.displayName="Popup",E.propTypes=x,E.defaultProps=w},function(t,e,n){"use strict";function r(t){var e=t.x,n=t.y,r=t.width,o=t.height,a=t.selfWidth,s=t.selfHeight,u=t.anchor,l=t.padding,c=void 0===l?0:l,p=i[u],h=p.x,f=p.y,d=n-f*s,y=d+s;if(d<c)for(;d<c&&f>=.5;)f-=.5,d+=.5*s;else if(y>o-c)for(;y>o-c&&f<=.5;)f+=.5,y-=.5*s;var m=e-h*a,v=m+a,g=.5;if(.5===f&&(h=Math.floor(h),g=1),m<c)for(;m<c&&h>=g;)h-=g,m+=g*a;else if(v>r-c)for(;v>r-c&&h<=1-g;)h+=g,v-=g*a;return Object.keys(i).find(function(t){var e=i[t];return e.x===h&&e.y===f})}n.d(e,"a",function(){return i}),e.b=r;var i={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}}},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(5),m=n(11),v=n(17),g=n(75),_=Object.assign({},v.b.defaultProps,{transitionDuration:300}),b=Object.assign({},y.a.propTypes,{className:d.a.string,onViewStateChange:d.a.func,onViewportChange:d.a.func,showCompass:d.a.bool,showZoom:d.a.bool}),x=Object.assign({},y.a.defaultProps,{className:"",onViewStateChange:function(){},onViewportChange:function(){},showCompass:!0,showZoom:!0}),w=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),Object(g.a)(t),n._updateViewport=n._updateViewport.bind(p(n)),n._onZoomIn=n._onZoomIn.bind(p(n)),n._onZoomOut=n._onZoomOut.bind(p(n)),n._onResetNorth=n._onResetNorth.bind(p(n)),n._renderCompass=n._renderCompass.bind(p(n)),n._renderButton=n._renderButton.bind(p(n)),n}return l(e,t),s(e,[{key:"shouldComponentUpdate",value:function(t,e,n){return this.context.viewport.bearing!==n.viewport.bearing}},{key:"_updateViewport",value:function(t){var e=this.context.viewport,n=new m.b(Object.assign({},e,t)),r=Object.assign({},n.getViewportProps(),_);this.props.onViewStateChange({viewState:r}),(this.props.onChangeViewport||this.props.onViewportChange)(r)}},{key:"_onZoomIn",value:function(){this._updateViewport({zoom:this.context.viewport.zoom+1})}},{key:"_onZoomOut",value:function(){this._updateViewport({zoom:this.context.viewport.zoom-1})}},{key:"_onResetNorth",value:function(){this._updateViewport({bearing:0,pitch:0})}},{key:"_renderCompass",value:function(){var t=this.context.viewport.bearing;return Object(h.createElement)("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(t,"deg)")}})}},{key:"_renderButton",value:function(t,e,n,r){return Object(h.createElement)("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n,children:r})}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.showCompass,r=t.showZoom;return Object(h.createElement)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(e),ref:this._onContainerLoad},[r&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),r&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass())])}}]),e}(y.a);w.displayName="NavigationControl",w.propTypes=b,w.defaultProps=x},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?p(t):e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(5),m=n(235),v=(n.n(m),Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired})),g={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},_=function(t){function e(t){var n;return o(this,e),n=u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),n._redraw=n._redraw.bind(p(n)),n._canvasLoaded=n._canvasLoaded.bind(p(n)),n}return l(e,t),s(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t=m.window.devicePixelRatio||1,e=this._canvas,n=e.getContext("2d");n.save(),n.scale(t,t);var r=this.context,i=r.viewport,o=r.isDragging;this.props.redraw({width:i.width,height:i.height,ctx:n,isDragging:o,project:i.project.bind(i),unproject:i.unproject.bind(i)}),n.restore()}},{key:"_canvasLoaded",value:function(t){this._canvas=t,this._onContainerLoad(t)}},{key:"render",value:function(){var t=m.window.devicePixelRatio||1,e=this.context.viewport,n=e.width,r=e.height;return Object(h.createElement)("canvas",{ref:this._canvasLoaded,width:n*t,height:r*t,style:{width:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute",left:0,top:0}})}}]),e}(y.a);_.displayName="CanvasOverlay",_.propTypes=v,_.defaultProps=g},function(t,e,n){(function(e){t.exports={window:"undefined"==typeof window?e:window,global:"undefined"==typeof e?window:e,document:"undefined"==typeof document?{}:document}}).call(e,n(4))},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(5),m=Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired,style:d.a.object}),v={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},g=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,r=Object.assign({position:"absolute",left:0,top:0,width:e.width,height:e.height},this.props.style);return Object(h.createElement)("div",{ref:this._onContainerLoad,style:r},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}(y.a);g.displayName="HTMLOverlay",g.propTypes=m,g.defaultProps=v},function(t,e,n){"use strict";function r(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!r(t,e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n,r=0;r<e.length;r++)n=e[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(0),f=(n.n(h),n(1)),d=n.n(f),y=n(5),m=Object.assign({},y.a.propTypes,{redraw:d.a.func.isRequired,style:d.a.object}),v={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1},g=function(t){function e(){return o(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),s(e,[{key:"render",value:function(){var t=this.context,e=t.viewport,n=t.isDragging,r=Object.assign({position:"absolute",left:0,top:0},this.props.style);return Object(h.createElement)("svg",{width:e.width,height:e.height,ref:this._onContainerLoad,style:r},this.props.redraw({width:e.width,height:e.height,isDragging:n,project:e.project.bind(e),unproject:e.unproject.bind(e)}))}}]),e}(y.a);g.displayName="SVGOverlay",g.propTypes=m,g.defaultProps=v},function(t,e,n){"use strict";var r=n(13),i=n(239),o=Object(r.c)({weather:i.a});e.a=o},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=n(41);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];switch(e.type){case i.a:return[e.payload.data].concat(r(t))}return t}}]);
//# sourceMappingURL=main.a1394861.js.map